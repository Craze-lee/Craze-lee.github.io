<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[ã€Golangè¿›é˜¶ã€‘å®šæ—¶å™¨]]></title>
    <url>%2F2019%2F05%2F21%2FGolang%2F%E8%BF%9B%E9%98%B6%2F%E5%AE%9A%E6%97%B6%E5%99%A8%2F</url>
    <content type="text"><![CDATA[Ticker1. ç”¨æ—¶é—´é˜»å¡ä¸»ç¨‹åºï¼Œä»è€Œæ§åˆ¶ticker1234567891011121314func main() &#123; // åˆå§‹åŒ–tickerï¼Œæ¯ç§’æ‰§è¡Œä¸€æ¬¡ var ticker = time.NewTicker(1 * time.Second) go func() &#123; for t := range ticker.C &#123; fmt.Println("tick at", t) &#125; &#125;() // é˜»å¡ä¸»ç¨‹åºé˜²é€€å‡º time.Sleep(time.Second * 5) // ä¸»åŠ¨ç»ˆæ­¢ ticker.Stop()&#125; è¾“å‡ºç»“æœ ticker1 at 2019-05-21 14:57:56.562591 +0800 CST m=+1.005065934ticker1 at 2019-05-21 14:57:57.562549 +0800 CST m=+2.005016651ticker1 at 2019-05-21 14:57:58.558122 +0800 CST m=+3.000583914ticker1 at 2019-05-21 14:57:59.563205 +0800 CST m=+4.005660201ticker1 at 2019-05-21 14:58:00.562585 +0800 CST m=+5.005033303 2. ç”¨channelæ¥ç²¾å‡†æ§åˆ¶æ¬¡æ•°12345678910111213141516func main() &#123; var ticker2 = time.NewTicker(100 * time.Millisecond) // åˆ›å»ºbufferä¸º2çš„channel c := make(chan int, 2) go func() &#123; for t := range ticker2.C&#123; // å¾€channelå†™æ•°æ®ï¼Œå†™æ»¡bufferåç»ˆæ­¢ç¨‹åº c &lt;- 1 fmt.Println("ticker2 at ", t) &#125; &#125;() time.Sleep(time.Second * 500) fmt.Println("ticker stopped")&#125; è¾“å‡ºç»“æœ ticker2 at 2019-05-21 14:57:55.65885 +0800 CST m=+0.101330668ticker2 at 2019-05-21 14:57:55.758399 +0800 CST m=+0.200878747]]></content>
      <categories>
        <category>Golang</category>
        <category>è¿›é˜¶</category>
      </categories>
      <tags>
        <tag>Golang</tag>
        <tag>Golangè¿›é˜¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Golangè¿›é˜¶ã€‘è¯»å†™æ–‡ä»¶]]></title>
    <url>%2F2019%2F05%2F20%2FGolang%2F%E8%BF%9B%E9%98%B6%2F%E8%AF%BB%E5%86%99%E6%96%87%E4%BB%B6%2F</url>
    <content type="text"></content>
      <categories>
        <category>Golang</category>
        <category>è¿›é˜¶</category>
      </categories>
      <tags>
        <tag>Golang</tag>
        <tag>Golangè¿›é˜¶</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>%2F2019%2F05%2F20%2F%E6%AF%8F%E6%97%A5%E4%B8%80%E9%9D%A2%2F%E5%A4%B4%E6%9D%A1%E9%9D%A2%E8%AF%95%E9%A2%98%2F</url>
    <content type="text"><![CDATA[# æ¥è‡ªv2ex 1.Redis å¸¸è§é—®é¢˜ï¼ˆ 100%ï¼‰æ•°æ®ç»“æ„ï¼Œä¸ memcached çš„åŒºåˆ«ï¼Œçº¿ç¨‹ï¼Œio å¤šè·¯å¤ç”¨ï¼ˆ selectï¼Œpollï¼Œepoll ï¼‰2.zookeeper ï¼ˆ 100%ï¼‰ç”¨æ³•ï¼Œåˆ†å¸ƒå¼é”ï¼Œzab åè®®3.MySQL å¸¸è§é—®é¢˜ï¼ˆ 100%ï¼‰å­˜å‚¨å¼•æ“ï¼Œé”ï¼Œéš”ç¦»çº§åˆ«4.è®¡ç®—æœºç½‘è·¯ï¼ˆå…¨ç¨‹æŠ±ç€ç”µè„‘è¾¹æŸ¥è¾¹é—®ï¼‰ï¼štcp å››æ¬¡æŒ¥æ‰‹ï¼ˆç®€å•çš„è¯´äº†ä¸‹ FIN å’Œ ACK ï¼‰é—®ä»€ä¹ˆæ—¶å€™å…³é—­è¿æ¥ï¼Ÿ closewait å’Œ timedwaited å‘ç”Ÿåœ¨å“ªé‡Œï¼ˆä¸€å¼€å§‹æ²¡è¯´å¯¹ï¼Œåœ¨å¼•å¯¼ä¸‹è¯´å‡ºï¼‰ tcp å’Œ UDP çš„åŒºåˆ«ï¼ˆ 100%ï¼‰ç½‘ç»œåˆ†å±‚æ¯ä¸€å±‚å…·ä½“æ˜¯ä»€ä¹ˆï¼ˆæˆ‘å›ç­”æ²¡è®°ä½åªè®°å¾—æœ€ä¸Šå±‚åº”ç”¨å±‚ï¼Œæœ€ä¸‹å±‚ç‰©ç†å±‚ï¼ŒHTTPâ†’TCP/ UDPâ†’IP ï¼‰DNS æ˜¯ä»€ä¹ˆï¼ˆå¿˜äº†ï¼ŒçœŸå¿˜äº†ğŸ˜‚ï¼Œæˆ‘éƒ½ä½©æœæˆ‘è‡ªå·±è¿™å¿˜äº†ï¼‰ä»€ä¹ˆæ˜¯ä¸€æ¡è¿æ¥ï¼Œå¦‚ä½•ç¡®å®šä¸€æ¡è¿æ¥ï¼ˆ emmmï¼Œæ ¹æ®è¿æ¥ id ï¼Ÿè¢«æ€¼ï¼‰é•¿è¿æ¥å’ŒçŸ­è¿æ¥çš„åŒºåˆ«ï¼ˆä¸å¤ªäº†è§£ï¼‰]]></content>
  </entry>
  <entry>
    <title><![CDATA[ã€Golangé›¶åŸºç¡€å…¥é—¨ã€‘07 Channel]]></title>
    <url>%2F2019%2F05%2F18%2FGolang%2F%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%2F07%20Channel%2F</url>
    <content type="text"><![CDATA[channel æ˜¯goroutineçš„é€šé“ï¼Œæ‰€ä»¥ä¸èƒ½ç›´æ¥åœ¨égoroutineé‡Œç›´æ¥è¿›è¡Œæ“ä½œï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼Œä¾‹å¦‚ 1234c := make(chan int)c &lt;- 1fatal error: all goroutines are asleep - deadlock! var i chan int // åŒå‘channel var i chan&lt;- int // å•å‘ï¼Œåªèƒ½æ”¶æ•°æ®i &lt;- 1 // è¿™æ˜¯å…è®¸çš„j &lt;- i // è¿™æ˜¯ä¸å…è®¸çš„ var i &lt;-chan int // å•å‘ï¼Œåªèƒ½å‘æ•°æ® buffer channelbufferå¯ä»¥å‡å°‘goroutineçš„åˆ‡æ¢ï¼Œä¾‹å¦‚ä¸‹é¢ï¼Œåˆ›å»ºäº†3bufferçš„channelï¼Œåœ¨å¾€channelå†™æ•°æ®æ—¶ï¼Œå‰3ä¸ªå†™å…¥éƒ½æ˜¯ä¼šå­˜å‚¨åˆ°bufferï¼Œä½†æ˜¯å†™ç¬¬4ä¸ªçš„æ—¶å€™ï¼Œä¼šå‘ç°æŠ¥é”™ï¼Œfatal error: all goroutines are asleep - deadlock!ï¼Œå› ä¸ºbufferå·²æ»¡ï¼Œæ²¡æœ‰goroutineå¤„ç†è¯¥channelæ•°æ®ã€‚æ‰€ä»¥å¦‚æœæ˜¯æ²¡æœ‰bufferçš„channelï¼Œæ¯æ¬¡å†™å…¥éƒ½ä¼šæœ‰ä¸€æ¬¡goroutineçš„åˆ‡æ¢ã€‚ 1234567func bufferChannel() &#123; c := make(chan int, 3) // åˆ›å»ºå¸¦æœ‰3 bufferçš„channel c &lt;- 'a' c &lt;- 'b' c &lt;- 'c' //c &lt;- 'd' // å–æ¶ˆæ³¨é‡Šåä¼šæŠ¥é”™ï¼Œå› ä¸ºæ²¡æœ‰æ¥å—å¤„ç†channelçš„æ–¹æ³•&#125; channel close1234567891011121314func worker(c chan int) &#123; for n := range c &#123; fmt.Printf("received %c\n", n) &#125;&#125;func closeDemo() &#123; c := make(chan int, 3) go worker(c) c &lt;- 'a' c &lt;- 'b' c &lt;- 'c' close(c) // ä¸»åŠ¨å…³é—­channelï¼Œå¦‚æœä¸ä¸»åŠ¨å…³é—­ï¼Œgoroutineä¼šä¸€ç›´æ”¶æ•°æ®&#125; ä¸è¦é€šè¿‡å…±äº«å†…å­˜æ¥é€šä¿¡ï¼Œé€šè¿‡é€šä¿¡æ¥å…±äº«å†…å­˜ è¿™ç¯‡æ–‡ç« é‡Œé¢è¯´çš„æ¯”è¾ƒæ¸…æ¥šäº†ï¼Œä½¿ç”¨å…±äº«å†…å­˜çš„è¯åœ¨å¤šçº¿ç¨‹çš„åœºæ™¯ä¸‹ä¸ºäº†å¤„ç†ç«æ€ï¼Œéœ€è¦åŠ é”ï¼Œä½¿ç”¨èµ·æ¥æ¯”è¾ƒéº»çƒ¦ã€‚å¦å¤–ä½¿ç”¨è¿‡å¤šçš„é”ï¼Œå®¹æ˜“ä½¿å¾—ç¨‹åºçš„ä»£ç é€»è¾‘åšæ¶©éš¾æ‡‚ï¼Œå¹¶ä¸”å®¹æ˜“ä½¿ç¨‹åºæ­»é”ï¼Œæ­»é”äº†ä»¥åæ’æŸ¥é—®é¢˜ç›¸å½“å›°éš¾ï¼Œç‰¹åˆ«æ˜¯å¾ˆå¤šé”åŒæ—¶å­˜åœ¨çš„æ—¶å€™ã€‚ goè¯­è¨€çš„channelä¿è¯åŒä¸€ä¸ªæ—¶é—´åªæœ‰ä¸€ä¸ªgoroutineèƒ½å¤Ÿè®¿é—®é‡Œé¢çš„æ•°æ®ï¼Œä¸ºå¼€å‘è€…æä¾›äº†ä¸€ç§ä¼˜é›…ç®€å•çš„å·¥å…·ï¼Œæ‰€ä»¥goåŸç”Ÿçš„åšæ³•å°±æ˜¯ä½¿ç”¨channleæ¥é€šä¿¡ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å…±äº«å†…å­˜æ¥é€šä¿¡ã€‚ http://legendtkl.com/2017/07/30/understanding-golang-channel/]]></content>
      <categories>
        <category>Golang</category>
        <category>é›¶åŸºç¡€å…¥é—¨</category>
      </categories>
      <tags>
        <tag>Golang</tag>
        <tag>Golangé›¶åŸºç¡€å…¥é—¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€PHPã€‘åƒåœ¾å›æ”¶GC]]></title>
    <url>%2F2019%2F05%2F16%2Fphp%2F%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6GC%2F</url>
    <content type="text"><![CDATA[åƒåœ¾å›æ”¶æ˜¯ä»€ä¹ˆå†™äº†è¿™ä¹ˆå¤šå¹´çš„PHPï¼Œä½ è¿˜ä¸çŸ¥é“å®ƒçš„åƒåœ¾å›æ”¶æœºåˆ¶ï¼Ÿä¸æ€•è‡ªå·±è¢«å›æ”¶äº†å—ï¼Ÿ æˆ‘è§‰å¾—ä½ å¾—æœ‰åŒ (é™)å¿ƒ(è–ª)ç²¾ç¥å•Šã€‚]]></content>
      <categories>
        <category>PHP</category>
      </categories>
      <tags>
        <tag>PHP</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€MySQL åŸç†ã€‘02 ç´¢å¼•åŸç†ä¸å®ç°ï¼ˆä¸€ï¼‰]]></title>
    <url>%2F2019%2F05%2F14%2FMySQL%2FMySQL%E7%B4%A2%E5%BC%95%2F</url>
    <content type="text"><![CDATA[å‰è¨€ è®²åˆ°ç´¢å¼•ï¼Œç¬¬ä¸€ååº”è‚¯å®šæ˜¯èƒ½æé«˜æŸ¥è¯¢æ•ˆç‡ã€‚ä¾‹å¦‚ä¹¦çš„ç›®å½•ï¼Œæƒ³è¦æŸ¥æ‰¾æŸä¸€ç« èŠ‚ï¼Œä¼šå…ˆä»ç›®å½•ä¸­å®šä½ã€‚å¦‚æœæ²¡æœ‰ç›®å½•ï¼Œé‚£ä¹ˆå°±éœ€è¦å°†æ‰€æœ‰å†…å®¹éƒ½çœ‹ä¸€éæ‰èƒ½æ‰¾åˆ°ã€‚ ç´¢å¼•çš„è®¾è®¡å¯¹ç¨‹åºçš„æ€§èƒ½è‡³å…³é‡è¦ï¼Œè‹¥ç´¢å¼•å¤ªå°‘ï¼Œå¯¹æŸ¥è¯¢æ€§èƒ½å—å½±å“ï¼›è€Œå¦‚æœç´¢å¼•å¤ªå¤šï¼Œåˆ™ä¼šå½±å“å¢/æ”¹/åˆ ç­‰çš„æ€§èƒ½ã€‚ çŸ¥è¯†ç‚¹MySQLä¸­ä¸€èˆ¬æ”¯æŒä»¥ä¸‹å‡ ç§å¸¸è§çš„ç´¢å¼•ï¼š B+æ ‘ç´¢å¼• å…¨æ–‡ç´¢å¼• å“ˆå¸Œç´¢å¼• æˆ‘ä»¬ä»Šå¤©é‡ç‚¹æ¥è®²ä¸‹B+æ ‘ç´¢å¼•ï¼Œä»¥åŠä¸ºä»€ä¹ˆè¦ç”¨B+æ ‘æ¥ä½œä¸ºç´¢å¼•çš„æ•°æ®ç»“æ„ã€‚ B+æ ‘ç´¢å¼•å¹¶ä¸èƒ½ç›´æ¥æ‰¾åˆ°å…·ä½“çš„è¡Œï¼Œåªæ˜¯æ‰¾åˆ°è¢«æŸ¥æ‰¾è¡Œæ‰€åœ¨çš„é¡µï¼Œç„¶åDBé€šè¿‡æŠŠæ•´é¡µè¯»å…¥å†…å­˜ï¼Œå†åœ¨å†…å­˜ä¸­æŸ¥æ‰¾ã€‚ é‡æ¸©æ•°æ®ç»“æ„1.1 å“ˆå¸Œç»“æ„å¦‚æœ‰ 3ã€1ã€2ã€10ã€9ã€0ã€4ã€6è¿™8ä¸ªæ•°æ®ï¼Œå»ºç«‹å¦‚å›¾1-1æ‰€ç¤ºå“ˆå¸Œç´¢å¼•ã€‚ ç›´æ¥æŸ¥è¯¢ï¼šç°åœ¨è¦ä»8ä¸ªæ•°ä¸­æŸ¥æ‰¾6è¿™æ¡è®°å½•ï¼Œåªéœ€è¦è®¡ç®—6çš„å“ˆå¸Œå€¼ï¼Œä¾¿å¯å¿«é€Ÿå®šä½è®°å½•ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(1)ã€‚ èŒƒå›´æŸ¥è¯¢ï¼šå¦‚æœè¦è¿›è¡ŒèŒƒå›´æŸ¥è¯¢ï¼ˆå¤§äº4çš„æ•°æ®ï¼‰ï¼Œé‚£è¿™ä¸ªç´¢å¼•å°±å®Œå…¨æ²¡ç”¨äº†ã€‚ å›¾1-1 å“ˆå¸Œç´¢å¼• 1.2 äºŒå‰æ ‘æŸ¥æ‰¾æ ‘äºŒå‰æ ‘æ˜¯ä¸€ç§ç»å…¸çš„æ•°æ®ç»“æ„ï¼Œè¦æ±‚å·¦å­æ ‘å°äºæ ¹èŠ‚ç‚¹ï¼Œå³å­æ ‘å¤§äºæ ¹èŠ‚ç‚¹ã€‚ å¦‚æœ‰ 3ã€1ã€2ã€10ã€9ã€0ã€4ã€6è¿™8ä¸ªæ•°æ®ï¼Œå»ºç«‹å¦‚å›¾1-2æ‰€ç¤ºäºŒåˆ†æŸ¥æ‰¾æ ‘ã€‚ ç›´æ¥æŸ¥è¯¢ï¼šå‡è®¾æŸ¥æ‰¾é”®å€¼ä¸º6çš„è®°å½•ï¼Œå…ˆæ‰¾åˆ°æ ¹4ï¼Œ4&lt;6ï¼Œå› æ­¤æŸ¥æ‰¾4çš„å³å­æ ‘ï¼Œæ‰¾åˆ°9ï¼›9å¤§äº6ï¼Œå› æ­¤æŸ¥æ‰¾9çš„å·¦å­æ ‘ï¼›ä¸€å…±æŸ¥æ‰¾3æ¬¡ã€‚ä½†å¦‚æœé¡ºåºæŸ¥æ‰¾ï¼Œåˆ™éœ€è¦æŸ¥æ‰¾8æ¬¡ï¼ˆä½äºæœ€åï¼‰ã€‚ èŒƒå›´æŸ¥è¯¢ï¼šå¦‚æœéœ€è¦æŸ¥æ‰¾å¤§äº4çš„æ•°æ®ï¼Œåˆ™éå†4çš„å³å­æ ‘å°±è¡Œäº†ã€‚ å›¾1-2 äºŒå‰æŸ¥æ‰¾æ ‘ 1.3 å¹³è¡¡äºŒå‰æ ‘ï¼ˆAVLæ ‘ï¼‰æŒ‰ç…§äºŒå‰æŸ¥æ‰¾æ ‘çš„å®šä¹‰ï¼Œå®ƒæ˜¯å¯ä»¥ä»»æ„çš„æ„é€ ï¼ŒåŒæ ·æ˜¯è¿™äº›æ•°å­—ï¼Œå¯ä»¥æŒ‰ç…§å›¾1-3-1çš„æ–¹å¼æ¥å»ºç«‹äºŒå‰æŸ¥æ‰¾æ ‘ã€‚åŒæ ·æŸ¥æ‰¾æ•°æ®6ï¼Œéœ€è¦æŸ¥æ‰¾5æ¬¡ã€‚ å›¾1-3-1 æ€§èƒ½è¾ƒå·®çš„äºŒå‰æŸ¥æ‰¾æ ‘ å› æ­¤ä¸ºäº†æœ€å¤§æ€§èƒ½åœ°æ„é€ ä¸€ä¸ªäºŒå‰æŸ¥æ‰¾æ ‘ï¼Œéœ€è¦å®ƒæ˜¯å¹³è¡¡çš„ï¼Œå³å¹³è¡¡äºŒå‰æ ‘ã€‚ å¹³è¡¡äºŒå‰æ ‘å®šä¹‰ï¼šé¦–å…ˆç¬¦åˆäºŒå‰æŸ¥æ‰¾æ ‘çš„å®šä¹‰ï¼Œå¦å¤–ä»»ä½•èŠ‚ç‚¹çš„ä¸¤ä¸ªå­æ ‘é«˜åº¦æœ€å¤§å·®ä¸º1ã€‚ å¹³è¡¡äºŒå‰æ ‘çš„æŸ¥è¯¢é€Ÿåº¦æ˜¯å¾ˆå¿«çš„ï¼Œä½†æ˜¯æœ‰ç¼ºç‚¹ï¼š ç»´æŠ¤æ ‘çš„ä»£ä»·æ˜¯éå¸¸å¤§ï¼Œåœ¨è¿›è¡Œæ’å…¥æˆ–æ›´æ–°æ—¶ï¼Œç»å¸¸ä¼šéœ€è¦å¤šæ¬¡å·¦æ—‹æˆ–å³æ—‹æ¥ç»´æŒå¹³è¡¡ã€‚å¦‚å›¾1-3-2æ‰€ç¤º æ•°æ®é‡å¤šçš„æ—¶å€™ï¼Œæ ‘ä¼šå¾ˆé«˜ï¼Œéœ€è¦å¤šæ¬¡I/Oæ“ä½œã€‚ åœ¨è¿›è¡ŒèŒƒå›´æŸ¥æ‰¾æ—¶ï¼Œå‡è®¾æŸ¥æ‰¾&gt;=3ï¼Œå…ˆæ‰¾åˆ°3ï¼Œç„¶åéœ€è¦æŸ¥æ‰¾åˆ°3çš„çˆ¶èŠ‚ç‚¹ï¼Œç„¶åéå†çˆ¶èŠ‚ç‚¹çš„å³å­æ ‘ã€‚ å›¾1-3-2 å¹³è¡¡äºŒå‰æ ‘AVL 1.4 B+ æ ‘åœ¨B+æ ‘ä¸­ï¼Œæ‰€æœ‰è®°å½•èŠ‚ç‚¹å­˜æ”¾åœ¨å¶å­èŠ‚ç‚¹ä¸Šï¼Œä¸”æ˜¯é¡ºåºå­˜æ”¾ï¼Œç”±å„å¶å­èŠ‚ç‚¹æŒ‡é’ˆè¿›è¡Œè¿æ¥ã€‚å¦‚æœä»æœ€å·¦è¾¹çš„å¶å­èŠ‚ç‚¹å¼€å§‹é¡ºåºéå†ï¼Œèƒ½å¾—åˆ°æ‰€æœ‰é”®å€¼çš„é¡ºåºæ’åºã€‚ å¦‚æœ‰ 3ã€1ã€2ã€10ã€9ã€0ã€4ã€6è¿™8ä¸ªæ•°æ®ï¼Œå¯å»ºç«‹å¦‚å›¾1-4-1æ‰€ç¤ºé«˜åº¦ä¸º2çš„B+æ ‘ã€‚ å›¾1-4-1 é«˜åº¦ä¸º2çš„B+æ ‘ åœ¨è¿›è¡Œæ›´æ–°æ—¶ï¼ŒB+æ ‘åŒæ ·éœ€è¦ç±»ä¼¼äºŒå‰æ ‘çš„æ—‹è½¬æ“ä½œã€‚ä¸¾ä¾‹ï¼Œå‡è®¾æ–°å¢ä¸€ä¸ª7ï¼Œé‚£å¯ä»¥ç›´æ¥å¡«å……åˆ°4ã€6çš„åé¢ã€‚å¦‚æœå†æ·»åŠ 8ï¼Œé‚£ä¹ˆå°±éœ€è¦è¿›è¡Œæ—‹è½¬äº†ï¼Œæ„Ÿå—ä¸‹é¢çš„B+æ ‘æ—‹è½¬è¿‡ç¨‹ã€‚ å›¾1-4-2 é«˜åº¦ä¸º3çš„B+æ ‘ é‡‡ç”¨B+æ ‘çš„ç´¢å¼•ç»“æ„ä¼˜ç‚¹ï¼š B+æ ‘çš„é«˜åº¦ä¸€èˆ¬ä¸º2-4å±‚ï¼Œæ‰€ä»¥æŸ¥æ‰¾è®°å½•æ—¶æœ€å¤šåªéœ€è¦2-4æ¬¡IOï¼Œç›¸å¯¹äºŒå‰å¹³è¡¡æ ‘å·²ç»å¤§å¤§é™ä½äº†ã€‚ èŒƒå›´æŸ¥æ‰¾æ—¶ï¼Œèƒ½é€šè¿‡å¶å­èŠ‚ç‚¹çš„æŒ‡é’ˆè·å–æ•°æ®ã€‚ä¾‹å¦‚æŸ¥æ‰¾å¤§äºç­‰äº3çš„æ•°æ®ï¼Œå½“åœ¨å¶å­èŠ‚ç‚¹ä¸­æŸ¥åˆ°3æ—¶ï¼Œé€šè¿‡3çš„å°¾æŒ‡é’ˆä¾¿èƒ½è·å–æ‰€æœ‰æ•°æ®ï¼Œè€Œä¸éœ€è¦å†åƒäºŒå‰æ ‘ä¸€æ ·å†è·å–åˆ°3çš„çˆ¶èŠ‚ç‚¹ã€‚ çœ‹åˆ°è¿™åº”è¯¥æ˜ç™½mysqlç´¢å¼•ä¸ºä»€ä¹ˆä½¿ç”¨B+æ ‘äº†å§ï¼ï¼ï¼ æœªå®Œå¾…ç»­â€¦]]></content>
      <categories>
        <category>MySQL</category>
        <category>åŸç†åˆ†æ</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
        <tag>åŸç†åˆ†æ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Golangè¿›é˜¶ã€‘flag å‘½ä»¤è¡ŒåŒ…ä½¿ç”¨]]></title>
    <url>%2F2019%2F05%2F06%2FGolang%2F%E8%BF%9B%E9%98%B6%2Fflag%E5%8C%85%E4%BD%BF%E7%94%A8%2F</url>
    <content type="text"><![CDATA[Package flagimport â€œflagâ€ flag åŒ…å®ç°å‘½ä»¤è¡Œæ ‡ç­¾è§£æ. ç®€å•Demo123456789101112131415package mainimport ( "flag" "fmt")var num = flag.Int("num", 1234, "Input your ip")var config = flag.String("config", "default.conf", "Input your config file path")func main() &#123; flag.Parse() fmt.Println("ip has value ", *num) fmt.Println("config file path ", *config)&#125; åƒLinuxå‘½ä»¤è¡Œä¸€æ ·æŸ¥çœ‹å¸®åŠ© æ‰§è¡Œæ—¶ä¸å¸¦å‚æ•°ï¼Œä½¿ç”¨é»˜è®¤å€¼ æ‰§è¡Œæ—¶èµ‹å€¼å‚æ•° ä½¿ç”¨è¯´æ˜ï¼š å®šä¹‰æ ‡ç­¾ 1234567891011// å®šä¹‰intergeræ ‡ç­¾var num = flag.Int("num", 1234, "Input your ip")// å®šä¹‰stringæ ‡ç­¾var config = flag.String("config", "default.conf", "Input your config file path")// Var()å‡½æ•°å°†æ ‡ç­¾ç»‘å®šåˆ°æŒ‡å®šå˜é‡ä¸­var flagvar intfunc InitFlag() &#123; flag.IntVar(&amp;flagvar, "flagvar", 1234, "Input your flagvar name")&#125; è§£æå‚æ•° 1flag.Parse() ä½¿ç”¨æ ‡ç­¾ 12fmt.Println(&quot;ip has value &quot;, *num)fmt.Println(&quot;config file path &quot;, *config) ç»éªŒåœ¨å¼€å‘çš„æ—¶å€™ï¼Œå¾ˆå¤šæ—¶å€™ä¼šæœ‰å¤šä¸ªç¯å¢ƒï¼ŒåŸºæœ¬ä¼šä»¥è¿™ç§æ–¹å¼å»åŠ è½½å¯¹åº”ç¯å¢ƒçš„é…ç½®æ–‡ä»¶ å‚è€ƒï¼šhttps://godoc.org/flag]]></content>
      <categories>
        <category>Golang</category>
        <category>è¿›é˜¶</category>
      </categories>
      <tags>
        <tag>Golang</tag>
        <tag>Golangè¿›é˜¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Gopher China 2016]]></title>
    <url>%2F2019%2F05%2F04%2FGolang%2FGopher%E5%88%86%E4%BA%AB%2FGopher%20China%202016%2F</url>
    <content type="text"><![CDATA[Why Gogofmt å›¢é˜Ÿä»£ç é£æ ¼ä¸€è‡´å¼ºç±»å‹è¯­è¨€ï¼Œä»»ä½•ä¸¥è‚ƒçš„é¡¹ç›®éƒ½ä¸åº”è¯¥ç”¨å¼±ç±»å‹è¯­è¨€import å¾ˆå¥½çš„å¼€æºååŒå¼€å‘profile èƒ½åŠ›å¼ºå¤§build standalone binary ç®€å•éƒ¨ç½²goroutines æä¾›å¤©ç„¶çš„å¹¶å‘ç¼–ç¨‹å¾®æœåŠ¡æœ€å¥½çš„è¯­è¨€ï¼šnative webæ¡†æ¶ã€gRPCã€docker GC ä¼˜åŒ–æ€è·¯Mark and Sweep: å¤§é‡æ—¶é—´ç”¨äºæ‰«æå¯¹è±¡ å¸¸è§„æ‰‹æ®µçš„æ ¸å¿ƒï¼šå‡å°‘å¯¹è±¡]]></content>
      <categories>
        <category>Golang</category>
        <category>Gopher</category>
      </categories>
      <tags>
        <tag>Golang</tag>
        <tag>Gopher</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Gopher China å¤§ä¼šè§†é¢‘]]></title>
    <url>%2F2019%2F05%2F04%2FGolang%2FGopher%E5%88%86%E4%BA%AB%2FGopherChina%E5%A4%A7%E4%BC%9A%E8%A7%86%E9%A2%91%E5%A4%A7%E5%85%A8%2F</url>
    <content type="text"><![CDATA[https://segmentfault.com/a/1190000018560530]]></content>
      <categories>
        <category>Golang</category>
        <category>Gopher</category>
      </categories>
      <tags>
        <tag>Golang</tag>
        <tag>Gopher</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Golangé›¶åŸºç¡€å…¥é—¨ã€‘06 Goroutine]]></title>
    <url>%2F2019%2F04%2F20%2FGolang%2F%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%2F06%20Goroutine%2F</url>
    <content type="text"><![CDATA[å¼•è¨€ç°åœ¨å¾ˆå¤šä¸€çº¿å¤§å‚éƒ½è½¬å‹åˆ°Goï¼Œç©¶å…¶åŸå› å°±æ˜¯è¯¥è¯­è¨€å¯¹å¹¶å‘æ”¯æŒçš„å¥½ã€‚ç›¸ä¿¡å¤§å®¶éƒ½çŸ¥é“Golangæ˜¯åœ¨è¯­è¨€çº§åŸç”Ÿæ”¯æŒåç¨‹ï¼Œå…ˆçœ‹çœ‹ä¸‹é¢è¿™æ®µä»£ç  1234567891011func main() &#123; for i:=0; i&lt;10; i++ &#123; go func(i int) &#123; for &#123; fmt.Printf("åç¨‹: %d \n", i) &#125; &#125;(i) &#125; // é˜²æ­¢ç¨‹åºæ¥ä¸åŠæ‰“å°å°±é€€å‡º time.Sleep(10*time.Microsecond)&#125; è¾“å‡ºç»“æœå¦‚ä¸‹ï¼Œä½ ä¼šå‘ç°æ¯æ¬¡è¿è¡Œï¼Œè¾“å‡ºå†…å®¹éƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ ä¸€ã€å¹¶è¡Œä¸å¹¶å‘å¹¶è¡Œæ˜¯æŒ‡ç¨‹åºçš„è¿è¡ŒçŠ¶æ€ï¼Œè¦æœ‰ä¸¤ä¸ªçº¿ç¨‹æ­£åœ¨æ‰§è¡Œæ‰èƒ½ç®—æ˜¯Parallelismï¼› å¹¶å‘æŒ‡ç¨‹åºçš„é€»è¾‘ç»“æ„ï¼ŒConcurrencyåˆ™åªè¦æœ‰ä¸¤ä¸ªä»¥ä¸Šçº¿ç¨‹è¿˜åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å³å¯ã€‚ ç®€å•åœ°è¯´ï¼ŒParallelismè¦åœ¨å¤šæ ¸æˆ–è€…å¤šå¤„ç†å™¨æƒ…å†µä¸‹æ‰èƒ½åšåˆ°ï¼Œè€ŒConcurrencyåˆ™ä¸éœ€è¦ã€‚å¯¹åº”åé¢çš„runtime.GOMAXPROCS(runtime.NumCPU()) äºŒã€è¿›ç¨‹ï¼Œçº¿ç¨‹ä¸åç¨‹goroutinesæ˜¯Goçš„å¹¶å‘åŸºç¡€ï¼Œä¸ºäº†å¸®åŠ©æˆ‘ä»¬ç†è§£è¿™ä¸ªæ¦‚å¿µï¼Œæˆ‘ä»¬å…ˆæ¥è°ˆä¸€è°ˆå¹¶å‘çš„å‘å±•æ•…äº‹ã€‚ 2.1 è¿›ç¨‹ Processè¿›ç¨‹æ˜¯ç¨‹åºå…³äºæŸæ•°æ®é›†åˆä¸Šçš„ä¸€æ¬¡è¿è¡Œæ´»åŠ¨ï¼Œæ˜¯ç³»ç»Ÿè¿›è¡Œèµ„æºåˆ†é…å’Œè°ƒåº¦çš„åŸºæœ¬å•ä½ï¼Œæ˜¯çº¿ç¨‹çš„å®¹å™¨ã€‚ åœ¨åˆ†æ—¶ç³»ç»Ÿä¸­ï¼Œæ“ä½œç³»ç»Ÿé€šè¿‡è®°å½•å½“å‰è¿›ç¨‹çš„çŠ¶æ€ï¼Œç„¶åæ¢å¤å¦ä¸€ä¸ªè¿›ç¨‹çš„çŠ¶æ€ï¼Œåœ¨æ´»åŠ¨è¿›ç¨‹ä¹‹é—´å¿«é€Ÿåˆ‡æ¢CPUçš„å¤„ç†ï¼Œè€Œäº§ç”Ÿäº†ä¸€ç§å¹¶å‘æ‰§è¡Œçš„é”™è§‰ï¼Œè¿™ä¸ªè¿‡ç¨‹ç§°ä¸ºä¸Šä¸‹æ–‡åˆ‡æ¢(switch cost)ã€‚ ä¸Šä¸‹æ–‡åˆ‡æ¢çš„æˆæœ¬æ˜¯ï¼š å†…æ ¸éœ€è¦å­˜å‚¨è¯¥è¿›ç¨‹çš„æ‰€æœ‰CPUå¯„å­˜å™¨çš„å†…å®¹ï¼Œç„¶åæ¢å¤å¦ä¸€ä¸ªè¿›ç¨‹çš„å€¼ã€‚ç”±äºè¿›ç¨‹åˆ‡æ¢å¯ä»¥åœ¨è¿›ç¨‹æ‰§è¡Œçš„ä»»ä½•æ—¶åˆ»å‘ç”Ÿï¼Œæ“ä½œç³»ç»Ÿéœ€è¦å­˜å‚¨æ‰€æœ‰è¿™äº›å¯„å­˜å™¨çš„å†…å®¹ï¼Œå› ä¸ºå®ƒä¸çŸ¥é“å½“å‰æ­£åœ¨ä½¿ç”¨å“ªäº›å¯„å­˜å™¨ã€‚ å†…æ ¸éœ€è¦å°†CPUçš„è™šæ‹Ÿåœ°å€åˆ·æ–°ä¸ºç‰©ç†åœ°å€æ˜ å°„ï¼ˆTLBç¼“å­˜ï¼‰ã€‚ æ“ä½œç³»ç»Ÿä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€ï¼Œä»¥åŠé€‰æ‹©ä¸‹ä¸€ä¸ªè¿›ç¨‹éƒ½ä¼šå ç”¨CPUçš„è°ƒåº¦ç¨‹åºå‡½æ•°çš„å¼€é”€ã€‚ 2.2 çº¿ç¨‹ threadçº¿ç¨‹æ˜¯æ“ä½œç³»ç»Ÿèƒ½å¤Ÿè¿›è¡Œè¿ç®—è°ƒåº¦çš„æœ€å°å•ä½ï¼Œåœ¨æ¦‚å¿µä¸Šä¸è¿›ç¨‹ç±»ä¼¼ï¼Œä½†å…±äº«ç›¸åŒçš„å†…å­˜ç©ºé—´ã€‚ç”±äºçº¿ç¨‹å…±äº«åœ°å€ç©ºé—´ï¼Œå› æ­¤åˆ›å»ºã€åˆ‡æ¢é€Ÿåº¦æ›´å¿«ã€‚ä½†ä»ç„¶æœ‰æ˜‚è´µçš„ä¸Šä¸‹æ–‡åˆ‡æ¢æˆæœ¬; å¿…é¡»ä¿ç•™å¾ˆå¤šçŠ¶æ€ã€‚ 2.3 åç¨‹ Coroutineåç¨‹æ˜¯ç”¨æˆ·æ€çº¿ç¨‹ï¼Œä¸ä¾é å†…æ ¸æ¥ç®¡ç†è°ƒåº¦ï¼Œå…·å¤‡ä»¥ä¸‹ç‰¹ç‚¹ï¼š è½»é‡çº§çº¿ç¨‹ éæŠ¢å å¼å¤šä»»åŠ¡å¤„ç†ï¼Œç”±åç¨‹è‡ªå·±æœ¬çœä¸»åŠ¨äº¤å‡ºæ§åˆ¶æƒ ä»¥ä¸‹åˆ—å‡ºäº†goroutineä¹‹é—´åˆ‡æ¢çš„ä¸»è¦çš„æ—¶é—´ç‚¹ï¼š ï¼ˆ1ï¼‰Channelå‘é€å’Œæ¥æ”¶æ“ä½œï¼ˆå¦‚æœè¿™äº›æ“ä½œæ˜¯é˜»å¡çš„ï¼‰ï¼›ï¼ˆ2ï¼‰æ‰§è¡Œgoè¯­å¥ï¼Œè™½ç„¶ä¸èƒ½ä¿è¯æ–°çš„goroutineé©¬ä¸Šè¢«è°ƒåº¦æ‰§è¡Œï¼›ï¼ˆ3ï¼‰é˜»å¡çš„ç³»ç»Ÿè°ƒç”¨ï¼Œåƒæ–‡ä»¶æ“ä½œï¼Œç½‘ç»œæ“ä½œï¼ŒIOç­‰ç­‰ï¼›ï¼ˆ4ï¼‰åœä¸‹æ¥è¿›å…¥åƒåœ¾å›æ”¶å‘¨æœŸä»¥åã€‚ æ¢å¥è¯è®²ï¼Œåœ¨goroutineä¸èƒ½ç»§ç»­è¿›è¡Œè¿ç®—ä»¥åï¼ˆéœ€è¦æ›´å¤šæ•°æ®ï¼Œæ›´å¤šç©ºé—´ï¼Œç­‰ç­‰ï¼‰ï¼Œéƒ½ä¼šè¿›è¡Œåˆ‡æ¢ã€‚ åŒå‘é€šé“å°±æ˜¯channel GOçš„åç¨‹ Goroutinesæ¯ä¸ªå¹¶å‘çš„æ‰§è¡Œå•å…ƒå«åšgoroutineï¼Œç”¨å…³é”®è¯goæ¥åˆ›å»ºã€‚å…·ä½“goroutineæ”¾åœ¨å“ªä¸ªçº¿ç¨‹ï¼Œç”±è°ƒåº¦å™¨æ§åˆ¶ä¸åˆ‡æ¢ã€‚ å‡è®¾è¦è®¡ç®—ä¸¤ä¸ªéå¸¸å¤æ‚çš„é€»è¾‘ï¼Œç„¶åè¾“å‡ºç»“æœã€‚åœ¨æ­£å¸¸æ˜¯çº¿æ€§ç¨‹åºé‡Œé¢ï¼Œä¼šä¾æ¬¡è°ƒç”¨è®¡ç®—çš„é€»è¾‘ï¼Œå®Œæˆä¹‹åå†è°ƒç”¨è¾“å‡ºé€»è¾‘ã€‚ä½†å¦‚æœæ˜¯åœ¨æœ‰ä¸¤ä¸ªç”šè‡³æ›´å¤šä¸ªgoroutineçš„ç¨‹åºä¸­ï¼Œå¯¹ä¸¤ä¸ªè®¡ç®—é€»è¾‘çš„è°ƒç”¨å°±å¯ä»¥åœ¨åŒä¸€æ—¶é—´ã€‚ 1234567891011121314151617181920func main() &#123; var wg sync.WaitGroup wg.Add(2) go func() &#123; for i:=0; i&lt;100; i++ &#123; defer wg.Done() fmt.Println("A:", i) time.Sleep(1*time.Second) &#125; &#125;() go func() &#123; for i:=0; i&lt;100; i++ &#123; defer wg.Done() fmt.Println("B:", i) time.Sleep(2*time.Second) &#125; &#125;() wg.Wait()&#125; æˆ‘ä»¬è¿è¡Œè¿™ä¸ªç¨‹åºï¼Œä¼šå‘ç°Aå’ŒBå‰ç¼€ä¼šäº¤å‰å‡ºç°ï¼Œå³ä¸¤ä¸ªç¨‹åºæ˜¯å¹¶å‘åœ¨æ‰§è¡Œçš„ï¼Œå¹¶ä¸”æ¯æ¬¡è¿è¡Œçš„ç»“æœå¯èƒ½ä¸ä¸€æ ·ï¼Œè¿™å°±æ˜¯Goè°ƒåº¦å™¨è°ƒåº¦çš„ç»“æœã€‚ è¿™é‡Œçš„sync.WaitGroupå…¶å®æ˜¯ä¸€ä¸ªè®¡æ•°çš„ä¿¡å·é‡ï¼Œä½¿ç”¨å®ƒçš„ç›®çš„æ˜¯è¦mainå‡½æ•°ç­‰å¾…ä¸¤ä¸ªgoroutineæ‰§è¡Œå®Œæˆåå†ç»“æŸï¼Œä¸ç„¶è¿™ä¸¤ä¸ªgoroutineè¿˜åœ¨è¿è¡Œçš„æ—¶å€™ï¼Œç¨‹åºå°±ç»“æŸäº†ï¼Œçœ‹ä¸åˆ°æƒ³è¦çš„ç»“æœã€‚ sync.WaitGroupçš„ä½¿ç”¨ä¹Ÿéå¸¸ç®€å•ï¼Œå…ˆæ˜¯ä½¿ç”¨Add æ–¹æ³•è®¾è®¾ç½®è®¡ç®—å™¨ä¸º2ï¼Œæ¯ä¸€ä¸ªgoroutineçš„å‡½æ•°æ‰§è¡Œå®Œä¹‹åï¼Œå°±è°ƒç”¨Doneæ–¹æ³•å‡1ã€‚Waitæ–¹æ³•çš„æ„æ€æ˜¯å¦‚æœè®¡æ•°å™¨å¤§äº0ï¼Œå°±ä¼šé˜»å¡ï¼Œæ‰€ä»¥main å‡½æ•°ä¼šä¸€ç›´ç­‰å¾…2ä¸ªgoroutineå®Œæˆåï¼Œå†ç»“æŸã€‚ å¯¹äºé€»è¾‘å¤„ç†å™¨çš„ä¸ªæ•°ï¼Œä¸æ˜¯è¶Šå¤šè¶Šå¥½ï¼Œè¦æ ¹æ®ç”µè„‘çš„å®é™…ç‰©ç†æ ¸æ•°ï¼Œå¦‚æœä¸æ˜¯å¤šæ ¸çš„ï¼Œè®¾ç½®å†å¤šçš„é€»è¾‘å¤„ç†å™¨ä¸ªæ•°ä¹Ÿæ²¡ç”¨ï¼Œå¦‚æœéœ€è¦è®¾ç½®çš„è¯ï¼Œä¸€èˆ¬æˆ‘ä»¬é‡‡ç”¨å¦‚ä¸‹ä»£ç è®¾ç½®ã€‚ 1runtime.GOMAXPROCS(runtime.NumCPU()) æ‰€ä»¥å¯¹äºå¹¶å‘æ¥è¯´ï¼Œå°±æ˜¯Goè¯­è¨€æœ¬èº«è‡ªå·±å®ç°çš„è°ƒåº¦ï¼Œå¯¹äºå¹¶è¡Œæ¥è¯´ï¼Œæ˜¯å’Œè¿è¡Œçš„ç”µè„‘çš„ç‰©ç†å¤„ç†å™¨çš„æ ¸æ•°æœ‰å…³çš„ï¼Œå¤šæ ¸å°±å¯ä»¥å¹¶è¡Œå¹¶å‘ï¼Œå•æ ¸åªèƒ½å¹¶å‘äº†ã€‚]]></content>
      <categories>
        <category>Golang</category>
        <category>é›¶åŸºç¡€å…¥é—¨</category>
      </categories>
      <tags>
        <tag>Golang</tag>
        <tag>Golangé›¶åŸºç¡€å…¥é—¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Elastic Search åˆ†å¸ƒå¼ç‰¹æ€§]]></title>
    <url>%2F2019%2F04%2F12%2FElasticSearch%2FES%E5%88%86%E5%B8%83%E5%BC%8F%E5%AD%98%E5%82%A8%2F</url>
    <content type="text"><![CDATA[å½“ç´¢å¼•ä¸€ä¸ªæ–‡æ¡£çš„æ—¶å€™ï¼Œæ–‡æ¡£ä¼šè¢«å­˜å‚¨åˆ°ä¸€ä¸ªä¸»åˆ†ç‰‡ä¸­ã€‚ è·¯ç”±å…¬å¼ï¼š shard = hash(routing) % number_of_primary_shards ä¸»åˆ†ç‰‡å’Œå‰¯åˆ†ç‰‡äº¤äº’ å¯ä»¥å‘é€è¯·æ±‚åˆ°é›†ç¾¤ä¸­çš„ä»»ä¸€èŠ‚ç‚¹ã€‚ æ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰èƒ½åŠ›å¤„ç†ä»»æ„è¯·æ±‚ã€‚ æ¯ä¸ªèŠ‚ç‚¹éƒ½çŸ¥é“é›†ç¾¤ä¸­ä»»ä¸€æ–‡æ¡£ä½ç½®ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥å°†è¯·æ±‚è½¬å‘åˆ°éœ€è¦çš„èŠ‚ç‚¹ä¸Šã€‚ å½“å‘é€è¯·æ±‚çš„æ—¶å€™ï¼Œ ä¸ºäº†æ‰©å±•è´Ÿè½½ï¼Œæ›´å¥½çš„åšæ³•æ˜¯è½®è¯¢é›†ç¾¤ä¸­æ‰€æœ‰çš„èŠ‚ç‚¹ã€‚ æ–°å»ºã€ç´¢å¼•å’Œåˆ é™¤å•ä¸ªæ–‡æ¡£ ä»¥ä¸‹æ˜¯åœ¨ä¸»å‰¯åˆ†ç‰‡å’Œä»»ä½•å‰¯æœ¬åˆ†ç‰‡ä¸Šé¢ æˆåŠŸæ–°å»ºï¼Œç´¢å¼•å’Œåˆ é™¤æ–‡æ¡£æ‰€éœ€è¦çš„æ­¥éª¤é¡ºåºï¼š å®¢æˆ·ç«¯å‘ Node 1 å‘é€æ–°å»ºã€ç´¢å¼•æˆ–è€…åˆ é™¤è¯·æ±‚ã€‚èŠ‚ç‚¹ä½¿ç”¨æ–‡æ¡£çš„ _id ç¡®å®šæ–‡æ¡£å±äºåˆ†ç‰‡ 0 ã€‚è¯·æ±‚ä¼šè¢«è½¬å‘åˆ° Node 3ï¼Œå› ä¸ºåˆ†ç‰‡ 0 çš„ä¸»åˆ†ç‰‡ç›®å‰è¢«åˆ†é…åœ¨Node 3 ä¸Šã€‚Node 3 åœ¨ä¸»åˆ†ç‰‡ä¸Šé¢æ‰§è¡Œè¯·æ±‚ã€‚å¦‚æœæˆåŠŸäº†ï¼Œå®ƒå°†è¯·æ±‚å¹¶è¡Œè½¬å‘åˆ° Node 1 å’Œ Node 2 çš„å‰¯æœ¬åˆ†ç‰‡ä¸Šã€‚ä¸€æ—¦æ‰€æœ‰çš„å‰¯æœ¬åˆ†ç‰‡éƒ½æŠ¥å‘ŠæˆåŠŸ, Node 3 å°†å‘åè°ƒèŠ‚ç‚¹æŠ¥å‘ŠæˆåŠŸï¼Œåè°ƒèŠ‚ç‚¹å‘å®¢æˆ·ç«¯æŠ¥å‘ŠæˆåŠŸã€‚ è¯»å–æ–‡æ¡£ä»¥ä¸‹æ˜¯ä»ä¸»åˆ†ç‰‡æˆ–è€…å‰¯æœ¬åˆ†ç‰‡æ£€ç´¢æ–‡æ¡£çš„æ­¥éª¤é¡ºåºï¼š 1ã€å®¢æˆ·ç«¯å‘ Node 1 å‘é€è·å–è¯·æ±‚ã€‚ 2ã€èŠ‚ç‚¹ä½¿ç”¨æ–‡æ¡£çš„ _id æ¥ç¡®å®šæ–‡æ¡£å±äºåˆ†ç‰‡ 0 ã€‚åˆ†ç‰‡ 0 çš„å‰¯æœ¬åˆ†ç‰‡å­˜åœ¨äºæ‰€æœ‰çš„ä¸‰ä¸ªèŠ‚ç‚¹ä¸Šã€‚ åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒå°†è¯·æ±‚è½¬å‘åˆ° Node 2 ã€‚ 3ã€Node 2 å°†æ–‡æ¡£è¿”å›ç»™ Node 1 ï¼Œç„¶åå°†æ–‡æ¡£è¿”å›ç»™å®¢æˆ·ç«¯ã€‚ åœ¨å¤„ç†è¯»å–è¯·æ±‚æ—¶ï¼Œåè°ƒç»“ç‚¹åœ¨æ¯æ¬¡è¯·æ±‚çš„æ—¶å€™éƒ½ä¼šé€šè¿‡è½®è¯¢æ‰€æœ‰çš„å‰¯æœ¬åˆ†ç‰‡æ¥è¾¾åˆ°è´Ÿè½½å‡è¡¡ã€‚ mgetè¯»å–å¤šä¸ªæ–‡æ¡£ ä»¥ä¸‹æ˜¯ä½¿ç”¨å•ä¸ª mget è¯·æ±‚å–å›å¤šä¸ªæ–‡æ¡£æ‰€éœ€çš„æ­¥éª¤é¡ºåºï¼šå®¢æˆ·ç«¯å‘ Node 1 å‘é€ mget è¯·æ±‚ã€‚Node 1 ä¸ºæ¯ä¸ªåˆ†ç‰‡æ„å»ºå¤šæ–‡æ¡£è·å–è¯·æ±‚ï¼Œç„¶åå¹¶è¡Œè½¬å‘è¿™äº›è¯·æ±‚åˆ°æ‰˜ç®¡åœ¨æ¯ä¸ªæ‰€éœ€çš„ä¸»åˆ†ç‰‡æˆ–è€…å‰¯æœ¬åˆ†ç‰‡çš„èŠ‚ç‚¹ä¸Šã€‚ä¸€æ—¦æ”¶åˆ°æ‰€æœ‰ç­”å¤ï¼Œ Node 1 æ„å»ºå“åº”å¹¶å°†å…¶è¿”å›ç»™å®¢æˆ·ç«¯ã€‚ ä½¿ç”¨ bulk ä¿®æ”¹å¤šä¸ªæ–‡æ¡£ bulk API æŒ‰å¦‚ä¸‹æ­¥éª¤é¡ºåºæ‰§è¡Œï¼š å®¢æˆ·ç«¯å‘ Node 1 å‘é€ bulk è¯·æ±‚ã€‚Node 1 ä¸ºæ¯ä¸ªèŠ‚ç‚¹åˆ›å»ºä¸€ä¸ªæ‰¹é‡è¯·æ±‚ï¼Œå¹¶å°†è¿™äº›è¯·æ±‚å¹¶è¡Œè½¬å‘åˆ°æ¯ä¸ªåŒ…å«ä¸»åˆ†ç‰‡çš„èŠ‚ç‚¹ä¸»æœºã€‚ä¸»åˆ†ç‰‡ä¸€ä¸ªæ¥ä¸€ä¸ªæŒ‰é¡ºåºæ‰§è¡Œæ¯ä¸ªæ“ä½œã€‚å½“æ¯ä¸ªæ“ä½œæˆåŠŸæ—¶ï¼Œä¸»åˆ†ç‰‡å¹¶è¡Œè½¬å‘æ–°æ–‡æ¡£ï¼ˆæˆ–åˆ é™¤ï¼‰åˆ°å‰¯æœ¬åˆ†ç‰‡ï¼Œç„¶åæ‰§è¡Œä¸‹ä¸€ä¸ªæ“ä½œã€‚ ä¸€æ—¦æ‰€æœ‰çš„å‰¯æœ¬åˆ†ç‰‡æŠ¥å‘Šæ‰€æœ‰æ“ä½œæˆåŠŸï¼Œè¯¥èŠ‚ç‚¹å°†å‘åè°ƒèŠ‚ç‚¹æŠ¥å‘ŠæˆåŠŸï¼Œåè°ƒèŠ‚ç‚¹å°†è¿™äº›å“åº”æ”¶é›†æ•´ç†å¹¶è¿”å›ç»™å®¢æˆ·ç«¯ã€‚bulk API è¿˜å¯ä»¥åœ¨æ•´ä¸ªæ‰¹é‡è¯·æ±‚çš„æœ€é¡¶å±‚ä½¿ç”¨ consistency å‚æ•°ï¼Œä»¥åŠåœ¨æ¯ä¸ªè¯·æ±‚ä¸­çš„å…ƒæ•°æ®ä¸­ä½¿ç”¨ routing å‚æ•°ã€‚]]></content>
      <categories>
        <category>ElasticSearch</category>
      </categories>
      <tags>
        <tag>ElasticSearch</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Elastic Search åˆ†å¸ƒå¼ç‰¹æ€§]]></title>
    <url>%2F2019%2F04%2F11%2FElasticSearch%2FES%E6%95%B0%E6%8D%AE%E8%BE%93%E5%85%A5%E4%B8%8E%E8%BE%93%E5%87%BA%2F</url>
    <content type="text"><![CDATA[åœ¨ Elasticsearch ä¸­ï¼Œ æ¯ä¸ªå­—æ®µçš„æ‰€æœ‰æ•°æ® éƒ½æ˜¯ é»˜è®¤è¢«ç´¢å¼•çš„ ã€‚ å³æ¯ä¸ªå­—æ®µéƒ½æœ‰ä¸ºäº†å¿«é€Ÿæ£€ç´¢è®¾ç½®çš„ä¸“ç”¨å€’æ’ç´¢å¼•ã€‚è€Œä¸”ï¼Œä¸åƒå…¶ä»–å¤šæ•°çš„æ•°æ®åº“ï¼Œå®ƒèƒ½åœ¨ åŒä¸€ä¸ªæŸ¥è¯¢ä¸­ ä½¿ç”¨æ‰€æœ‰è¿™äº›å€’æ’ç´¢å¼•ï¼Œå¹¶ä»¥æƒŠäººçš„é€Ÿåº¦è¿”å›ç»“æœã€‚ æ–‡æ¡£ ä¸€ä¸ªå¯¹è±¡ä»…ä»…æ˜¯ç±»ä¼¼äº hash ã€ hashmap ã€å­—å…¸æˆ–è€…å…³è”æ•°ç»„çš„ JSON å¯¹è±¡ï¼Œå¯¹è±¡ä¸­ä¹Ÿå¯ä»¥åµŒå¥—å…¶ä»–çš„å¯¹è±¡ã€‚ å¯¹è±¡å¯èƒ½åŒ…å«äº†å¦å¤–ä¸€äº›å¯¹è±¡ã€‚ åœ¨ Elasticsearch ä¸­ï¼Œæœ¯è¯­ æ–‡æ¡£ æœ‰ç€ç‰¹å®šçš„å«ä¹‰ã€‚å®ƒæ˜¯æŒ‡æœ€é¡¶å±‚æˆ–è€…æ ¹å¯¹è±¡, è¿™ä¸ªæ ¹å¯¹è±¡è¢«åºåˆ—åŒ–æˆ JSON å¹¶å­˜å‚¨åˆ° Elasticsearch ä¸­ï¼ŒæŒ‡å®šäº†å”¯ä¸€ IDã€‚ æ–‡æ¡£å…ƒæ•°æ®_indexï¼šä¸€ä¸ª ç´¢å¼• åº”è¯¥æ˜¯å› å…±åŒçš„ç‰¹æ€§è¢«åˆ†ç»„åˆ°ä¸€èµ·çš„æ–‡æ¡£é›†åˆã€‚ç±»æ¯”æ•°æ®åº“_typeï¼šåœ¨ç´¢å¼•ä¸­å¯¹æ•°æ®è¿›è¡Œé€»è¾‘åˆ†åŒºã€‚ç±»æ¯”æ•°æ®è¡¨_idï¼šå½“å®ƒå’Œ _index ä»¥åŠ _type ç»„åˆå°±å¯ä»¥å”¯ä¸€ç¡®å®š Elasticsearch ä¸­çš„ä¸€ä¸ªæ–‡æ¡£ã€‚ç±»æ¯”æ•°æ®å”¯ä¸€æ ‡è¯† å†™æ•°æ® 12345678910111213141516171819202122232425262728PUT /&#123;index&#125;/&#123;type&#125;/&#123;id&#125;&#123; &quot;field&quot;: &quot;value&quot;, ...&#125;# For Example curl -X PUT &quot;10.96.83.188:9200/website/blog/123&quot; -H &apos;Content-Type: application/json&apos; -d&apos;&#123; &quot;title&quot;: &quot;My first blog entry&quot;, &quot;text&quot;: &quot;Just trying this out...&quot;, &quot;date&quot;: &quot;2014/01/01&quot;&#125;&apos;&#123;&quot;_index&quot;:&quot;website&quot;,&quot;_type&quot;:&quot;blog&quot;,&quot;_id&quot;:&quot;123&quot;,&quot;_version&quot;:1,&quot;result&quot;:&quot;created&quot;,&quot;_shards&quot;:&#123;&quot;total&quot;:2,&quot;successful&quot;:1,&quot;failed&quot;:0&#125;,&quot;created&quot;:true&#125;# å¦‚æœæ²¡æœ‰æŒ‡å®šIDï¼ŒElasticsearch å¯ä»¥å¸®æˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆ ID curl -X POST &quot;10.96.83.188:9200/website/blog/&quot; -H &apos;Content-Type: application/json&apos; -d&apos;&#123; &quot;title&quot;: &quot;My second blog entry&quot;, &quot;text&quot;: &quot;Still trying this out...&quot;, &quot;date&quot;: &quot;2014/01/01&quot;&#125;&apos;&#123;&quot;_index&quot;:&quot;website&quot;,&quot;_type&quot;:&quot;blog&quot;,&quot;_id&quot;:&quot;AWoPmj2eBvBN4YG5RXks&quot;,&quot;_version&quot;:1,&quot;result&quot;:&quot;created&quot;,&quot;_shards&quot;:&#123;&quot;total&quot;:2,&quot;successful&quot;:1,&quot;failed&quot;:0&#125;,&quot;created&quot;:true&#125; è¯»æ•°æ®pretty ä¸ºäº†è®©è¾“å‡ºæ›´å‹å¥½ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455#å–æ‰€æœ‰å­—æ®µcurl -X GET &quot;10.96.83.188:9200/website/blog/123?pretty&quot;&#123; &quot;_index&quot; : &quot;website&quot;, &quot;_type&quot; : &quot;blog&quot;, &quot;_id&quot; : &quot;123&quot;, &quot;_version&quot; : 1, &quot;found&quot; : true, &quot;_source&quot; : &#123; &quot;title&quot; : &quot;My first blog entry&quot;, &quot;text&quot; : &quot;Just trying this out...&quot;, &quot;date&quot; : &quot;2014/01/01&quot; &#125;&#125;# å–éƒ¨åˆ†å­—æ®µcurl -X GET &quot;10.96.83.188:9200/website/blog/123?_source=title,text&amp;pretty&quot;&#123; &quot;_index&quot; : &quot;website&quot;, &quot;_type&quot; : &quot;blog&quot;, &quot;_id&quot; : &quot;123&quot;, &quot;_version&quot; : 1, &quot;found&quot; : true, &quot;_source&quot; : &#123; &quot;text&quot; : &quot;Just trying this out...&quot;, &quot;title&quot; : &quot;My first blog entry&quot; &#125;&#125;# åªå–æ•°æ®ï¼Œä¸å»å…ƒæ•°æ® curl -X GET &quot;10.96.83.188:9200/website/blog/123/_source&quot;&#123; &quot;title&quot;: &quot;My first blog entry&quot;, &quot;text&quot;: &quot;Just trying this out...&quot;, &quot;date&quot;: &quot;2014/01/01&quot;&#125;# è¯»å–å¤šä¸ªæ•°æ®curl -X GET &quot;10.96.83.188:9200/_mget?pretty&quot; -H &apos;Content-Type: application/json&apos; -d&apos;&#123; &quot;docs&quot; : [ &#123; &quot;_index&quot; : &quot;website&quot;, &quot;_type&quot; : &quot;blog&quot;, &quot;_id&quot; : 1 &#125;, &#123; &quot;_index&quot; : &quot;website&quot;, &quot;_type&quot; : &quot;blog&quot;, &quot;_id&quot; : 124 &#125; ]&#125;&apos; åˆ¤æ–­æ–‡æ¡£æ˜¯å¦å­˜åœ¨(200å­˜åœ¨ï¼Œ404ä¸å­˜åœ¨) 123456789$ curl -I -XHEAD &quot;10.96.83.188:9200/website/blog/123/&quot;HTTP/1.1 200 OKcontent-type: text/plain; charset=UTF-8content-length: 0$ curl -I -XHEAD &quot;10.96.83.188:9200/website/blog/124/&quot;HTTP/1.1 404 Not Foundcontent-type: text/plain; charset=UTF-8content-length: 0 æ›´æ–°æ“ä½œ åˆ›å»ºæ–°æ–‡æ¡£ è¦ä¹ˆidä¿è¯å”¯ä¸€ï¼Œè¦ä¹ˆä¸å¸¦idæ–°å»ºï¼Œç”±ESè‡ªåŠ¨åˆ›å»ºåˆ›å»ºæ—¶ï¼Œå¸¦ä¸Š_createï¼Œä¿è¯åªæ–°å¢ï¼Œå¦‚æœå·²å­˜åœ¨åˆ™æŠ¥é”™ 123456789curl -X PUT &quot;10.96.83.188:9200/website/blog/123/_create&quot; -H &apos;Content-Type: application/json&apos; -d&apos;&#123; &quot;title&quot;: &quot;My first blog entry&quot;, &quot;text&quot;: &quot;I am starting to get the hang of this...&quot;, &quot;date&quot;: &quot;2014/01/02&quot;&#125;&apos;&#123;&quot;error&quot;:&#123;&quot;root_cause&quot;:[&#123;&quot;type&quot;:&quot;version_conflict_engine_exception&quot;,&quot;reason&quot;:&quot;[blog][123]: version conflict, document already exists (current version [2])&quot;,&quot;index_uuid&quot;:&quot;_sBTT-DdSnKytaOhbXEYfw&quot;,&quot;shard&quot;:&quot;0&quot;,&quot;index&quot;:&quot;website&quot;&#125;],&quot;type&quot;:&quot;version_conflict_engine_exception&quot;,&quot;reason&quot;:&quot;[blog][123]: version conflict, document already exists (current version [2])&quot;,&quot;index_uuid&quot;:&quot;_sBTT-DdSnKytaOhbXEYfw&quot;,&quot;shard&quot;:&quot;0&quot;,&quot;index&quot;:&quot;website&quot;&#125;,&quot;status&quot;:409&#125; åˆ é™¤æ–‡æ¡£ 12curl -X DELETE &quot;10.96.83.188:9200/website/blog/123&quot;&#123;&quot;found&quot;:true,&quot;_index&quot;:&quot;website&quot;,&quot;_type&quot;:&quot;blog&quot;,&quot;_id&quot;:&quot;123&quot;,&quot;_version&quot;:3,&quot;result&quot;:&quot;deleted&quot;,&quot;_shards&quot;:&#123;&quot;total&quot;:2,&quot;successful&quot;:1,&quot;failed&quot;:0&#125;&#125; æ›´æ–°éƒ¨åˆ†æ–‡æ¡£ 12345678910111213141516171819202122232425curl -X POST &quot;10.96.83.188:9200/website/blog/1/_update&quot; -H &apos;Content-Type: application/json&apos; -d&apos;&#123; &quot;doc&quot; : &#123; &quot;tags&quot; : [ &quot;testing&quot; ], &quot;views&quot;: 0 &#125;&#125;&apos;curl -X GET &quot;10.96.83.188:9200/website/blog/1?pretty&quot;&#123; &quot;_index&quot; : &quot;website&quot;, &quot;_type&quot; : &quot;blog&quot;, &quot;_id&quot; : &quot;1&quot;, &quot;_version&quot; : 3, &quot;found&quot; : true, &quot;_source&quot; : &#123; &quot;title&quot; : &quot;My first blog entry&quot;, &quot;text&quot; : &quot;Starting to get the hang of this...&quot;, &quot;views&quot; : 0, &quot;tags&quot; : [ &quot;testing&quot; ] &#125;&#125; ä¹è§‚å¹¶å‘æ§åˆ¶]]></content>
      <categories>
        <category>ElasticSearch</category>
      </categories>
      <tags>
        <tag>ElasticSearch</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Elastic Search åˆ†å¸ƒå¼ç‰¹æ€§]]></title>
    <url>%2F2019%2F04%2F11%2FElasticSearch%2FES%E5%88%86%E5%B8%83%E5%BC%8F%E7%89%B9%E6%80%A7%2F</url>
    <content type="text"><![CDATA[Elasticsearch å¯ä»¥æ¨ªå‘æ‰©å±•è‡³æ•°ç™¾ï¼ˆç”šè‡³æ•°åƒï¼‰çš„æœåŠ¡å™¨èŠ‚ç‚¹ï¼ŒåŒæ—¶å¯ä»¥å¤„ç†PBçº§æ•°æ®ã€‚Elasticsearch å¤©ç”Ÿå°±æ˜¯åˆ†å¸ƒå¼çš„ï¼Œå¹¶ä¸”åœ¨è®¾è®¡æ—¶å±è”½äº†åˆ†å¸ƒå¼çš„å¤æ‚æ€§ã€‚è¿™é‡Œåˆ—ä¸¾äº†ä¸€äº›åœ¨åå°è‡ªåŠ¨æ‰§è¡Œçš„æ“ä½œï¼š åˆ†é…æ–‡æ¡£åˆ°ä¸åŒçš„å®¹å™¨ æˆ– åˆ†ç‰‡ ä¸­ï¼Œæ–‡æ¡£å¯ä»¥å‚¨å­˜åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªèŠ‚ç‚¹ä¸­ æŒ‰é›†ç¾¤èŠ‚ç‚¹æ¥å‡è¡¡åˆ†é…è¿™äº›åˆ†ç‰‡ï¼Œä»è€Œå¯¹ç´¢å¼•å’Œæœç´¢è¿‡ç¨‹è¿›è¡Œè´Ÿè½½å‡è¡¡ å¤åˆ¶æ¯ä¸ªåˆ†ç‰‡ä»¥æ”¯æŒæ•°æ®å†—ä½™ï¼Œä»è€Œé˜²æ­¢ç¡¬ä»¶æ•…éšœå¯¼è‡´çš„æ•°æ®ä¸¢å¤± å°†é›†ç¾¤ä¸­ä»»ä¸€èŠ‚ç‚¹çš„è¯·æ±‚è·¯ç”±åˆ°å­˜æœ‰ç›¸å…³æ•°æ®çš„èŠ‚ç‚¹ é›†ç¾¤æ‰©å®¹æ—¶æ— ç¼æ•´åˆæ–°èŠ‚ç‚¹ï¼Œé‡æ–°åˆ†é…åˆ†ç‰‡ä»¥ä¾¿ä»ç¦»ç¾¤èŠ‚ç‚¹æ¢å¤ Elasticsearch æ˜¯åˆ©ç”¨åˆ†ç‰‡å°†æ•°æ®åˆ†å‘åˆ°é›†ç¾¤å†…å„å¤„çš„ã€‚åˆ†ç‰‡æ˜¯æ•°æ®çš„å®¹å™¨ï¼Œæ–‡æ¡£ä¿å­˜åœ¨åˆ†ç‰‡å†…ï¼Œåˆ†ç‰‡åˆè¢«åˆ†é…åˆ°é›†ç¾¤å†…çš„å„ä¸ªèŠ‚ç‚¹é‡Œã€‚ å½“ä½ çš„é›†ç¾¤è§„æ¨¡æ‰©å¤§æˆ–è€…ç¼©å°æ—¶ï¼Œ Elasticsearch ä¼šè‡ªåŠ¨çš„åœ¨å„èŠ‚ç‚¹ä¸­è¿ç§»åˆ†ç‰‡ï¼Œä½¿å¾—æ•°æ®ä»ç„¶å‡åŒ€åˆ†å¸ƒåœ¨é›†ç¾¤é‡Œã€‚ ä¸€ä¸ªåˆ†ç‰‡å¯ä»¥æ˜¯ ä¸» åˆ†ç‰‡æˆ–è€… å‰¯æœ¬ åˆ†ç‰‡ã€‚ ç´¢å¼•å†…ä»»æ„ä¸€ä¸ªæ–‡æ¡£éƒ½å½’å±äºä¸€ä¸ªä¸»åˆ†ç‰‡ï¼Œæ‰€ä»¥ä¸»åˆ†ç‰‡çš„æ•°ç›®å†³å®šç€ç´¢å¼•èƒ½å¤Ÿä¿å­˜çš„æœ€å¤§æ•°æ®é‡ã€‚ ä¸€ä¸ªå‰¯æœ¬åˆ†ç‰‡åªæ˜¯ä¸€ä¸ªä¸»åˆ†ç‰‡çš„æ‹·è´ã€‚ å‰¯æœ¬åˆ†ç‰‡ä½œä¸ºç¡¬ä»¶æ•…éšœæ—¶ä¿æŠ¤æ•°æ®ä¸ä¸¢å¤±çš„å†—ä½™å¤‡ä»½ï¼Œå¹¶ä¸ºæœç´¢å’Œè¿”å›æ–‡æ¡£ç­‰è¯»æ“ä½œæä¾›æœåŠ¡ã€‚ æ‰©å®¹ä¸»åˆ†ç‰‡çš„æ•°ç›®åœ¨ç´¢å¼•åˆ›å»ºæ—¶ å°±å·²ç»ç¡®å®šäº†ä¸‹æ¥ã€‚å®é™…ä¸Šï¼Œè¿™ä¸ªæ•°ç›®å®šä¹‰äº†è¿™ä¸ªç´¢å¼•èƒ½å¤Ÿ å­˜å‚¨ çš„æœ€å¤§æ•°æ®é‡ã€‚ä½†æ˜¯ï¼Œè¯»æ“ä½œâ€”â€”æœç´¢å’Œè¿”å›æ•°æ®â€”â€”å¯ä»¥åŒæ—¶è¢«ä¸»åˆ†ç‰‡ æˆ– å‰¯æœ¬åˆ†ç‰‡æ‰€å¤„ç†ï¼Œæ‰€ä»¥å½“ä½ æ‹¥æœ‰è¶Šå¤šçš„å‰¯æœ¬åˆ†ç‰‡æ—¶ï¼Œä¹Ÿå°†æ‹¥æœ‰è¶Šé«˜çš„ååé‡ã€‚ å½“ç„¶ï¼Œå¦‚æœåªæ˜¯åœ¨ç›¸åŒèŠ‚ç‚¹æ•°ç›®çš„é›†ç¾¤ä¸Šå¢åŠ æ›´å¤šçš„å‰¯æœ¬åˆ†ç‰‡å¹¶ä¸èƒ½æé«˜æ€§èƒ½ï¼Œå› ä¸ºæ¯ä¸ªåˆ†ç‰‡ä»èŠ‚ç‚¹ä¸Šè·å¾—çš„èµ„æºä¼šå˜å°‘ã€‚ ä½ éœ€è¦å¢åŠ æ›´å¤šçš„ç¡¬ä»¶èµ„æºæ¥æå‡ååé‡ã€‚ æ•…éšœ å…³é—­çš„èŠ‚ç‚¹æ˜¯ä¸€ä¸ªä¸»èŠ‚ç‚¹ã€‚è€Œé›†ç¾¤å¿…é¡»æ‹¥æœ‰ä¸€ä¸ªä¸»èŠ‚ç‚¹æ¥ä¿è¯æ­£å¸¸å·¥ä½œï¼Œæ‰€ä»¥å‘ç”Ÿçš„ç¬¬ä¸€ä»¶äº‹æƒ…å°±æ˜¯é€‰ä¸¾ä¸€ä¸ªæ–°çš„ä¸»èŠ‚ç‚¹ï¼š Node 2 ã€‚æ–°çš„ä¸»èŠ‚ç‚¹ç«‹å³å°†è¿™äº›åˆ†ç‰‡åœ¨ Node 2 å’Œ Node 3 ä¸Šå¯¹åº”çš„å‰¯æœ¬åˆ†ç‰‡æå‡ä¸ºä¸»åˆ†ç‰‡ï¼Œ æ­¤æ—¶é›†ç¾¤çš„çŠ¶æ€å°†ä¼šä¸º yellow ã€‚ è¿™ä¸ªæå‡ä¸»åˆ†ç‰‡çš„è¿‡ç¨‹æ˜¯ç¬é—´å‘ç”Ÿçš„ï¼Œå¦‚åŒæŒ‰ä¸‹ä¸€ä¸ªå¼€å…³ä¸€èˆ¬ã€‚]]></content>
      <categories>
        <category>ElasticSearch</category>
      </categories>
      <tags>
        <tag>ElasticSearch</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Elastic Search åŸºç¡€ä»‹ç»]]></title>
    <url>%2F2019%2F04%2F11%2FElasticSearch%2FES%E5%9F%BA%E7%A1%80%E4%BB%8B%E7%BB%8D%2F</url>
    <content type="text"><![CDATA[ElasticSearch æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼ã€å¯æ‰©å±•ã€å®æ—¶çš„æœç´¢ä¸æ•°æ®åˆ†æå¼•æ“ã€‚ åŠŸèƒ½ä»‹ç» å…¨æ–‡æœç´¢ ç»“æ„åŒ–æ•°æ®çš„å®æ—¶ç»Ÿè®¡ æ•°æ®åˆ†æ å¤æ‚çš„è¯­è¨€å¤„ç† åœ°ç†ä½ç½®å’Œå¯¹è±¡é—´å…³è”å…³ç³» åº”ç”¨åœºæ™¯ Wikipedia ä½¿ç”¨ Elasticsearch æä¾›å¸¦æœ‰é«˜äº®ç‰‡æ®µçš„å…¨æ–‡æœç´¢ Stack Overflow å°†åœ°ç†ä½ç½®æŸ¥è¯¢èå…¥å…¨æ–‡æ£€ç´¢ä¸­å»ï¼Œå¹¶ä¸”ä½¿ç”¨ more-like-this æ¥å£å»æŸ¥æ‰¾ç›¸å…³çš„é—®é¢˜ä¸ç­”æ¡ˆ GitHub ä½¿ç”¨ Elasticsearch å¯¹1300äº¿è¡Œä»£ç è¿›è¡ŒæŸ¥è¯¢ ç‰¹ç‚¹ ä¸€ä¸ªåˆ†å¸ƒå¼çš„å®æ—¶æ–‡æ¡£å­˜å‚¨ï¼Œæ¯ä¸ªå­—æ®µ å¯ä»¥è¢«ç´¢å¼•ä¸æœç´¢ ä¸€ä¸ªåˆ†å¸ƒå¼å®æ—¶åˆ†ææœç´¢å¼•æ“ èƒ½èƒœä»»ä¸Šç™¾ä¸ªæœåŠ¡èŠ‚ç‚¹çš„æ‰©å±•ï¼Œå¹¶æ”¯æŒ PB çº§åˆ«çš„ç»“æ„åŒ–æˆ–è€…éç»“æ„åŒ–æ•°æ® æ“ä½œç´¢å¼•ç»“æ„åˆ†æè·¯å¾„ /megacorp/employee/1 åŒ…å«äº†ä¸‰éƒ¨åˆ†çš„ä¿¡æ¯ï¼š megacorpï¼šç´¢å¼•åç§°ï¼Œç±»ä¼¼æ•°æ®åº“employeeï¼šç±»å‹åç§°ï¼Œç±»ä¼¼æ•°æ®è¡¨1ï¼šç‰¹å®šé›‡å‘˜çš„IDï¼Œç±»ä¼¼è¡¨é‡Œçš„ID å†™å…¥ 123456789curl -X PUT &quot;localhost:9200/megacorp/employee/1&quot; -H &apos;Content-Type: application/json&apos; -d&apos;&#123; &quot;first_name&quot; : &quot;John&quot;, &quot;last_name&quot; : &quot;Smith&quot;, &quot;age&quot; : 25, &quot;about&quot; : &quot;I love to go rock climbing&quot;, &quot;interests&quot;: [ &quot;sports&quot;, &quot;music&quot; ]&#125;&apos; æŸ¥è¯¢ 12345678910curl &apos;localhost:9200/megacorp/employee/1?pretty&apos;&#123;&quot;_index&quot;:&quot;megacorp&quot;,&quot;_type&quot;:&quot;employee&quot;,&quot;_id&quot;:&quot;2&quot;,&quot;_version&quot;:1,&quot;found&quot;:true,&quot;_source&quot;:&#123; &quot;first_name&quot; : &quot;John&quot;, &quot;last_name&quot; : &quot;Smith&quot;, &quot;age&quot; : 25, &quot;about&quot; : &quot;I love to go rock climbing&quot;, &quot;interests&quot;: [ &quot;sports&quot;, &quot;music&quot; ]&#125;&#125; æœç´¢ 1234567891011121314151617181920212223242526curl -X GET &quot;10.96.83.188:9200/megacorp/employee/_search&quot;&#123;&quot;took&quot;:71,&quot;timed_out&quot;:false,&quot;_shards&quot;:&#123;&quot;total&quot;:5,&quot;successful&quot;:5,&quot;failed&quot;:0&#125;,&quot;hits&quot;:&#123;&quot;total&quot;:3,&quot;max_score&quot;:1.0,&quot;hits&quot;:[&#123;&quot;_index&quot;:&quot;megacorp&quot;,&quot;_type&quot;:&quot;employee&quot;,&quot;_id&quot;:&quot;2&quot;,&quot;_score&quot;:1.0,&quot;_source&quot;:&#123; &quot;first_name&quot; : &quot;Jane&quot;, &quot;last_name&quot; : &quot;Smith&quot;, &quot;age&quot; : 32, &quot;about&quot; : &quot;I like to collect rock albums&quot;, &quot;interests&quot;: [ &quot;music&quot; ]&#125;&#125;,&#123;&quot;_index&quot;:&quot;megacorp&quot;,&quot;_type&quot;:&quot;employee&quot;,&quot;_id&quot;:&quot;1&quot;,&quot;_score&quot;:1.0,&quot;_source&quot;:&#123; &quot;first_name&quot; : &quot;John&quot;, &quot;last_name&quot; : &quot;Smith&quot;, &quot;age&quot; : 25, &quot;about&quot; : &quot;I love to go rock climbing&quot;, &quot;interests&quot;: [ &quot;sports&quot;, &quot;music&quot; ]&#125;&#125;,&#123;&quot;_index&quot;:&quot;megacorp&quot;,&quot;_type&quot;:&quot;employee&quot;,&quot;_id&quot;:&quot;3&quot;,&quot;_score&quot;:1.0,&quot;_source&quot;:&#123; &quot;first_name&quot; : &quot;Douglas&quot;, &quot;last_name&quot; : &quot;Fir&quot;, &quot;age&quot; : 35, &quot;about&quot;: &quot;I like to build cabinets&quot;, &quot;interests&quot;: [ &quot;forestry&quot; ]&#125;&#125;]&#125;&#125; ç®€å•æŸ¥è¯¢ query_string 123456789101112131415161718curl -X GET &quot;10.96.83.188:9200/megacorp/employee/_search?q=last_name:Smith&quot;&#123;&quot;took&quot;:31,&quot;timed_out&quot;:false,&quot;_shards&quot;:&#123;&quot;total&quot;:5,&quot;successful&quot;:5,&quot;failed&quot;:0&#125;,&quot;hits&quot;:&#123;&quot;total&quot;:2,&quot;max_score&quot;:0.2876821,&quot;hits&quot;:[&#123;&quot;_index&quot;:&quot;megacorp&quot;,&quot;_type&quot;:&quot;employee&quot;,&quot;_id&quot;:&quot;2&quot;,&quot;_score&quot;:0.2876821,&quot;_source&quot;:&#123; &quot;first_name&quot; : &quot;Jane&quot;, &quot;last_name&quot; : &quot;Smith&quot;, &quot;age&quot; : 32, &quot;about&quot; : &quot;I like to collect rock albums&quot;, &quot;interests&quot;: [ &quot;music&quot; ]&#125;&#125;,&#123;&quot;_index&quot;:&quot;megacorp&quot;,&quot;_type&quot;:&quot;employee&quot;,&quot;_id&quot;:&quot;1&quot;,&quot;_score&quot;:0.2876821,&quot;_source&quot;:&#123; &quot;first_name&quot; : &quot;John&quot;, &quot;last_name&quot; : &quot;Smith&quot;, &quot;age&quot; : 25, &quot;about&quot; : &quot;I love to go rock climbing&quot;, &quot;interests&quot;: [ &quot;sports&quot;, &quot;music&quot; ]&#125;&#125;]&#125;&#125; æŸ¥è¯¢è¡¨è¾¾å¼æœç´¢ query 123456789101112131415161718192021222324252627curl -X GET &quot;10.96.83.188:9200/megacorp/employee/_search&quot; -H &apos;Content-Type: application/json&apos; -d&apos;&#123; &quot;query&quot; : &#123; &quot;match&quot; : &#123; &quot;last_name&quot; : &quot;Smith&quot; &#125; &#125;&#125;&apos;&#123;&quot;took&quot;:9,&quot;timed_out&quot;:false,&quot;_shards&quot;:&#123;&quot;total&quot;:5,&quot;successful&quot;:5,&quot;failed&quot;:0&#125;,&quot;hits&quot;:&#123;&quot;total&quot;:2,&quot;max_score&quot;:0.2876821,&quot;hits&quot;:[&#123;&quot;_index&quot;:&quot;megacorp&quot;,&quot;_type&quot;:&quot;employee&quot;,&quot;_id&quot;:&quot;2&quot;,&quot;_score&quot;:0.2876821,&quot;_source&quot;:&#123; &quot;first_name&quot; : &quot;Jane&quot;, &quot;last_name&quot; : &quot;Smith&quot;, &quot;age&quot; : 32, &quot;about&quot; : &quot;I like to collect rock albums&quot;, &quot;interests&quot;: [ &quot;music&quot; ]&#125;&#125;,&#123;&quot;_index&quot;:&quot;megacorp&quot;,&quot;_type&quot;:&quot;employee&quot;,&quot;_id&quot;:&quot;1&quot;,&quot;_score&quot;:0.2876821,&quot;_source&quot;:&#123; &quot;first_name&quot; : &quot;John&quot;, &quot;last_name&quot; : &quot;Smith&quot;, &quot;age&quot; : 25, &quot;about&quot; : &quot;I love to go rock climbing&quot;, &quot;interests&quot;: [ &quot;sports&quot;, &quot;music&quot; ]&#125;&#125;]&#125;&#125; æ›´å¤æ‚çš„æœç´¢ è¿‡æ»¤å™¨ filter 123456789101112131415161718192021222324252627curl -X GET &quot;10.96.83.188:9200/megacorp/employee/_search&quot; -H &apos;Content-Type: application/json&apos; -d&apos;&#123; &quot;query&quot; : &#123; &quot;bool&quot;: &#123; &quot;must&quot;: &#123; &quot;match&quot; : &#123; &quot;last_name&quot; : &quot;smith&quot; &#125; &#125;, &quot;filter&quot;: &#123; &quot;range&quot; : &#123; &quot;age&quot; : &#123; &quot;gt&quot; : 30 &#125; &#125; &#125; &#125; &#125;&#125;&apos;&#123;&quot;took&quot;:15,&quot;timed_out&quot;:false,&quot;_shards&quot;:&#123;&quot;total&quot;:5,&quot;successful&quot;:5,&quot;failed&quot;:0&#125;,&quot;hits&quot;:&#123;&quot;total&quot;:1,&quot;max_score&quot;:0.2876821,&quot;hits&quot;:[&#123;&quot;_index&quot;:&quot;megacorp&quot;,&quot;_type&quot;:&quot;employee&quot;,&quot;_id&quot;:&quot;2&quot;,&quot;_score&quot;:0.2876821,&quot;_source&quot;:&#123; &quot;first_name&quot; : &quot;Jane&quot;, &quot;last_name&quot; : &quot;Smith&quot;, &quot;age&quot; : 32, &quot;about&quot; : &quot;I like to collect rock albums&quot;, &quot;interests&quot;: [ &quot;music&quot; ]&#125;&#125;]&#125;&#125; å…¨æ–‡æœç´¢ 1234567891011121314151617181920212223242526curl -X GET &quot;10.96.83.188:9200/megacorp/employee/_search&quot; -H &apos;Content-Type: application/json&apos; -d&apos;&#123; &quot;query&quot; : &#123; &quot;match&quot; : &#123; &quot;about&quot; : &quot;rock climbing&quot; &#125; &#125;&#125;&apos;&#123;&quot;took&quot;:8,&quot;timed_out&quot;:false,&quot;_shards&quot;:&#123;&quot;total&quot;:5,&quot;successful&quot;:5,&quot;failed&quot;:0&#125;,&quot;hits&quot;:&#123;&quot;total&quot;:2,&quot;max_score&quot;:0.53484553,&quot;hits&quot;:[&#123;&quot;_index&quot;:&quot;megacorp&quot;,&quot;_type&quot;:&quot;employee&quot;,&quot;_id&quot;:&quot;1&quot;,&quot;_score&quot;:0.53484553,&quot;_source&quot;:&#123; &quot;first_name&quot; : &quot;John&quot;, &quot;last_name&quot; : &quot;Smith&quot;, &quot;age&quot; : 25, &quot;about&quot; : &quot;I love to go rock climbing&quot;, &quot;interests&quot;: [ &quot;sports&quot;, &quot;music&quot; ]&#125;&#125;,&#123;&quot;_index&quot;:&quot;megacorp&quot;,&quot;_type&quot;:&quot;employee&quot;,&quot;_id&quot;:&quot;2&quot;,&quot;_score&quot;:0.26742277,&quot;_source&quot;:&#123; &quot;first_name&quot; : &quot;Jane&quot;, &quot;last_name&quot; : &quot;Smith&quot;, &quot;age&quot; : 32, &quot;about&quot; : &quot;I like to collect rock albums&quot;, &quot;interests&quot;: [ &quot;music&quot; ]&#125;&#125;]&#125;&#125; Elasticsearch é»˜è®¤æŒ‰ç…§ç›¸å…³æ€§å¾—åˆ†æ’åºï¼Œå³æ¯ä¸ªæ–‡æ¡£è·ŸæŸ¥è¯¢çš„åŒ¹é…ç¨‹åº¦ã€‚ç¬¬ä¸€ä¸ªæœ€é«˜å¾—åˆ†çš„ç»“æœå¾ˆæ˜æ˜¾ï¼šJohn Smith çš„ about å±æ€§æ¸…æ¥šåœ°å†™ç€ â€œrock climbingâ€Jane Smithä¹Ÿä½œä¸ºç»“æœè¿”å›ï¼ŒåŸå› æ˜¯å¥¹çš„ about å±æ€§é‡Œæåˆ°äº† â€œrockâ€ ã€‚å› ä¸ºåªæœ‰ â€œrockâ€ è€Œæ²¡æœ‰ â€œclimbingâ€ ï¼Œæ‰€ä»¥å¥¹çš„ç›¸å…³æ€§å¾—åˆ†ä½äº John çš„ã€‚ è¿™æ˜¯å®Œå…¨åŒºåˆ«äºä¼ ç»Ÿå…³ç³»å‹æ•°æ®åº“çš„ä¸€ä¸ªæ¦‚å¿µï¼Œæ•°æ®åº“ä¸­çš„ä¸€æ¡è®°å½•è¦ä¹ˆåŒ¹é…è¦ä¹ˆä¸åŒ¹é…ã€‚ çŸ­è¯­æœç´¢ æƒ³è¦ç²¾ç¡®åŒ¹é…ä¸€ç³»åˆ—å•è¯æˆ–è€…çŸ­è¯­ã€‚åŒ¹é…åŒæ—¶åŒ…å« â€œrockâ€ å’Œ â€œclimbingâ€ ï¼Œå¹¶ä¸” äºŒè€…ä»¥çŸ­è¯­ â€œrock climbingâ€ çš„å½¢å¼ç´§æŒ¨ç€çš„é›‡å‘˜è®°å½•ã€‚ä¸ºæ­¤å¯¹ match æŸ¥è¯¢ç¨ä½œè°ƒæ•´ï¼Œä½¿ç”¨ä¸€ä¸ªå«åš match_phrase çš„æŸ¥è¯¢ 123456789101112131415161718 curl -X GET &quot;10.96.83.188:9200/megacorp/employee/_search&quot; -H &apos;Content-Type: application/json&apos; -d&apos;&#123; &quot;query&quot; : &#123; &quot;match_phrase&quot; : &#123; &quot;about&quot; : &quot;rock climbing&quot; &#125; &#125;&#125;&apos;&#123;&quot;took&quot;:13,&quot;timed_out&quot;:false,&quot;_shards&quot;:&#123;&quot;total&quot;:5,&quot;successful&quot;:5,&quot;failed&quot;:0&#125;,&quot;hits&quot;:&#123;&quot;total&quot;:1,&quot;max_score&quot;:0.53484553,&quot;hits&quot;:[&#123;&quot;_index&quot;:&quot;megacorp&quot;,&quot;_type&quot;:&quot;employee&quot;,&quot;_id&quot;:&quot;1&quot;,&quot;_score&quot;:0.53484553,&quot;_source&quot;:&#123; &quot;first_name&quot; : &quot;John&quot;, &quot;last_name&quot; : &quot;Smith&quot;, &quot;age&quot; : 25, &quot;about&quot; : &quot;I love to go rock climbing&quot;, &quot;interests&quot;: [ &quot;sports&quot;, &quot;music&quot; ]&#125;&#125;]&#125;&#125; é«˜äº®æœç´¢ è¿”å›ç»“æœä¸ä¹‹å‰ä¸€æ ·ï¼Œä¸æ­¤åŒæ—¶ç»“æœä¸­è¿˜å¤šäº†ä¸€ä¸ªå«åš highlight çš„éƒ¨åˆ†ã€‚è¿™ä¸ªéƒ¨åˆ†åŒ…å«äº† about å±æ€§åŒ¹é…çš„æ–‡æœ¬ç‰‡æ®µï¼Œå¹¶ä»¥ HTML æ ‡ç­¾ å°è£… 1234567891011121314151617181920212223curl -X GET &quot;10.96.83.188:9200/megacorp/employee/_search&quot; -H &apos;Content-Type: application/json&apos; -d&apos;&#123; &quot;query&quot; : &#123; &quot;match_phrase&quot; : &#123; &quot;about&quot; : &quot;rock climbing&quot; &#125; &#125;, &quot;highlight&quot;: &#123; &quot;fields&quot; : &#123; &quot;about&quot; : &#123;&#125; &#125; &#125;&#125;&apos;&#123;&quot;took&quot;:36,&quot;timed_out&quot;:false,&quot;_shards&quot;:&#123;&quot;total&quot;:5,&quot;successful&quot;:5,&quot;failed&quot;:0&#125;,&quot;hits&quot;:&#123;&quot;total&quot;:1,&quot;max_score&quot;:0.53484553,&quot;hits&quot;:[&#123;&quot;_index&quot;:&quot;megacorp&quot;,&quot;_type&quot;:&quot;employee&quot;,&quot;_id&quot;:&quot;1&quot;,&quot;_score&quot;:0.53484553,&quot;_source&quot;:&#123; &quot;first_name&quot; : &quot;John&quot;, &quot;last_name&quot; : &quot;Smith&quot;, &quot;age&quot; : 25, &quot;about&quot; : &quot;I love to go rock climbing&quot;, &quot;interests&quot;: [ &quot;sports&quot;, &quot;music&quot; ]&#125;,&quot;highlight&quot;:&#123;&quot;about&quot;:[&quot;I love to go &lt;em&gt;rock&lt;/em&gt; &lt;em&gt;climbing&lt;/em&gt;&quot;]&#125;&#125;]&#125;&#125; åˆ†æ 123456789101112131415161718192021222324252627282930313233curl -X GET &quot;10.96.83.188:9200/megacorp/employee/_search&quot; -H &apos;Content-Type: application/json&apos; -d&apos;&#123; &quot;aggs&quot;: &#123; &quot;all_interests&quot;: &#123; &quot;terms&quot;: &#123; &quot;field&quot;: &quot;interests&quot; &#125; &#125; &#125;&#125;&apos;&#123; ... &quot;hits&quot;: &#123; ... &#125;, &quot;aggregations&quot;: &#123; &quot;all_interests&quot;: &#123; &quot;buckets&quot;: [ &#123; &quot;key&quot;: &quot;music&quot;, &quot;doc_count&quot;: 2 &#125;, &#123; &quot;key&quot;: &quot;forestry&quot;, &quot;doc_count&quot;: 1 &#125;, &#123; &quot;key&quot;: &quot;sports&quot;, &quot;doc_count&quot;: 1 &#125; ] &#125; &#125;&#125;]]></content>
      <categories>
        <category>ElasticSearch</category>
      </categories>
      <tags>
        <tag>ElasticSearch</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¹¿å‘Šåè¯è§£é‡Š-Ad Network]]></title>
    <url>%2F2019%2F04%2F11%2F%E8%AE%A1%E7%AE%97%E5%B9%BF%E5%91%8A%2F%E5%B9%BF%E5%91%8A%E5%90%8D%E8%AF%8D%E8%A7%A3%E9%87%8A-Ad_Network%2F</url>
    <content type="text"><![CDATA[Ad Network å¹¿å‘Šç½‘ç»œå¹³å° 1. å®šä¹‰å³â€œåœ¨çº¿å¹¿å‘Šè”ç›Ÿâ€ï¼Œæ˜¯ä¸€ç§ä»‹äºæƒ³å‡ºå”®å¹¿å‘Šç©ºé—´çš„ç½‘ç«™ä¸æƒ³åœ¨ç½‘ç«™ä¸ŠåˆŠç™»å¹¿å‘Šçš„å¹¿å‘Šä¸»ä¹‹é—´çš„å¹³å°.(ç™¾åº¦ç™¾ç§‘) 2. è¿è¡Œæœºåˆ¶æœ€å¼€å§‹ï¼ŒAd network é›†åˆäº†ä¼—å¤šçš„ä¸­å°ç½‘ç«™ï¼Œæ±‡é›†åå³æ‹¥æœ‰äº†åƒæ˜¯å¤§å¹³å°çš„æµé‡ï¼Œç”šè‡³æ›´å¤šã€‚å› æ­¤å¼€å§‹æœ‰å¹¿å‘Šä¸»æ„¿æ„ä¸ Ad network è´­ä¹°å¹¿å‘Šï¼Œç”šè‡³åŸæœ¬æ‹¥æœ‰é«˜æµé‡çš„ç½‘ç«™ï¼Œå› ç‚ºæœ‰ä¸€äº›è¾ƒå°‘çš„ç‰ˆä½æ²’æœ‰å–å‡ºï¼Œå› æ­¤ä¹ŸåŠ å…¥äº† Ad networkã€‚]]></content>
      <categories>
        <category>è®¡ç®—å¹¿å‘Š</category>
      </categories>
      <tags>
        <tag>è®¡ç®—å¹¿å‘Š</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¹¿å‘Šåè¯è§£é‡Š-Ad Exchange]]></title>
    <url>%2F2019%2F04%2F10%2F%E8%AE%A1%E7%AE%97%E5%B9%BF%E5%91%8A%2F%E5%B9%BF%E5%91%8A%E5%90%8D%E8%AF%8D%E8%A7%A3%E9%87%8A-Ad_Exchange%2F</url>
    <content type="text"><![CDATA[Ad Exchange (å¹¿å‘Šäº¤æ˜“å¹³å°) 1. å®šä¹‰ä¸€ä¸ªå¼€æ”¾çš„ã€èƒ½å¤Ÿå°†å‡ºç‰ˆå•†å’Œå¹¿å‘Šå•†è”ç³»åœ¨ä¸€èµ·çš„åœ¨çº¿å¹¿å‘Šå¸‚åœº(ç±»ä¼¼äºè‚¡ç¥¨äº¤æ˜“æ‰€)ã€‚(ç™¾åº¦ç™¾ç§‘) 2. è¿è¡Œæœºåˆ¶å½“ä¸€ä¸ªç”¨æˆ·è®¿é—®å¹¿å‘Šä½é¡µé¢æ—¶ï¼Œsspç«¯å‘Ad Exchangeå‘å‡ºè®¿é—®è®¯å·ï¼Œå‘ŠçŸ¥æœ‰ä¸€ä¸ªè®¿é—®è¯·æ±‚ï¼ŒsspæŠŠå¹¿å‘Šä½çš„å…·ä½“ä¿¡æ¯ï¼Œä¾‹å¦‚æ‰€å±ç«™ç‚¹ã€æœ€ä½å‡ºä»·ä»¥åŠé€šè¿‡DMPåˆ†æåŒ¹é…åçš„ç”¨æˆ·å±æ€§ä¿¡æ¯æ‰“åŒ…å‘é€ç»™å„ä¸ªDSPï¼ŒDSPç«¯å¼€å§‹å¯¹è¿™ä¸ªå¹¿å‘Šå±•ç°è¿›è¡Œç«ä»·ï¼Œç«ä»·è·èƒœè€…å°±èƒ½å¤Ÿè®©è‡ªå·±çš„å¹¿å‘Šå±•ç°åœ¨è¿™ä¸ªå¹¿å‘Šä½ä¸Šï¼Œè¿›è€Œè®©ç”¨æˆ·çœ‹åˆ°ã€‚ ä¸‹å›¾æè¿°çš„ä¾‹å­æ˜¯ä¸€ä¸ªå¯¹æ±½è½¦æ„Ÿå…´è¶£çš„ç”¨æˆ·è®¿é—®ç«™ç‚¹ï¼ŒDSPç«¯å„ä¸ªæ±½è½¦å‚å®¶å¯¹è¿™ä¸ªç”¨æˆ·å±•å¼€äº‰å¤ºçš„è¿‡ç¨‹ã€‚]]></content>
      <categories>
        <category>è®¡ç®—å¹¿å‘Š</category>
      </categories>
      <tags>
        <tag>è®¡ç®—å¹¿å‘Š</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¹¿å‘Šåè¯è§£é‡Š-DMP]]></title>
    <url>%2F2019%2F04%2F10%2F%E8%AE%A1%E7%AE%97%E5%B9%BF%E5%91%8A%2F%E5%B9%BF%E5%91%8A%E5%90%8D%E8%AF%8D%E8%A7%A3%E9%87%8A-DMP%2F</url>
    <content type="text"><![CDATA[DMPï¼ˆData-Management Platformï¼Œæ•°æ®ç®¡ç†å¹³å°ï¼‰ 1. å®šä¹‰æ˜¯æŠŠåˆ†æ•£çš„å¤šæ–¹æ•°æ®è¿›è¡Œæ•´åˆçº³å…¥ç»Ÿä¸€çš„æŠ€æœ¯å¹³å°ï¼Œå¹¶å¯¹è¿™äº›æ•°æ®è¿›è¡Œæ ‡å‡†åŒ–å’Œç»†åˆ†ï¼Œè®©ç”¨æˆ·å¯ä»¥æŠŠè¿™äº›ç»†åˆ†ç»“æœæ¨å‘ç°æœ‰çš„äº’åŠ¨è¥é”€ç¯å¢ƒé‡Œçš„å¹³å°ã€‚(ç™¾åº¦ç™¾ç§‘) 2. ä¸DSPå¯¹æ¯”DSP è‡ªå·±æœ‰å¯èƒ½æœ‰å—ä¼—æ•°æ®ï¼Œä½†æœ‰å¾ˆå¤šå…¶å®æ²¡æœ‰ï¼Œæˆ–è€…æœ‰ï¼Œä¹Ÿä¸å¤Ÿå…¨é¢ï¼Œä¸å¤Ÿå‡†ç¡®ã€‚é‚£æ€ä¹ˆåŠå‘¢ï¼Ÿä¸“ä¸šæä¾›è€…DMPå‡ºç°äº†ï¼Œç®€å•è®²ï¼Œå®ƒä»¬æ‰‹ä¸­æ¡æœ‰å—ä¼—æ•°æ®ï¼Œå¹¶ä¸”èƒ½å¤Ÿè®© DSP é©³æ¥åˆ°ä»–ä»¬è¿™é‡Œï¼Œåˆ©ç”¨å®ƒä»¬æ‰€æœ‰çš„æ•°æ®ã€‚ DMP ä¸ºäº†è·å–å—ä¼—çš„æ•°æ®ï¼Œå®ƒå¿…é¡»è‡³å°‘åšå‡ ä»¶äº‹æƒ…ï¼šå…¶ä¸€ï¼Œå®ƒéœ€è¦ä¸ºæ‰€æœ‰çš„å—ä¼—æ¯ä¸€ä¸ªåšä¸€ä¸ªæ ‡è®°ï¼Œè¿™ä¸ªæ ‡è®°åœ¨ç›®å‰çš„æŠ€æœ¯æ¡ä»¶ä¸‹ï¼Œä¸»è¦æ˜¯é€šè¿‡ä¸€ç§å«åš cookie çš„äº‹ç‰©å®Œæˆçš„ã€‚å…¶äºŒï¼Œå®ƒè¿˜éœ€è¦èƒ½å¤Ÿå®ç°è·¨åŸŸè¿½è¸ª DMPæ˜¯æœ¬è‰çº²ç›®ã€‚DSPæ˜¯ä¸“ä¸šè¯æä¹°æ‰‹ã€‚æ™®é€šäººå¯¹ç…§ç€æœ¬è‰çº²ç›®ä¹Ÿä¸å¤§ä¼šä¹°é”™è¯æï¼Œä½†å¯¹è¡Œæƒ…ä¸ç†Ÿæ‚‰ï¼Œä»·é’±é«˜äº†ä½äº†æ²¡è°±ï¼Œæ‰¾ä¸ªä¸“ä¸šä¹°æ‰‹ä»˜ç‚¹æœåŠ¡è´¹çœå¿ƒï¼Œè¯´ä¸å®šè¿˜çœé’±ã€‚ä¹°æ‰‹é€›çš„å¸‚åœºå¤šäº†ï¼Œæ…¢æ…¢çš„è‡ªå·±ä¹Ÿæœ‰ä¸ªå°æœ¬æœ¬ï¼Œè®°å½•ä¸åŒæ—¶æœŸå¥½è¯æçš„æˆè‰²ç­‰ç‰¹ç‚¹ï¼Œæ¯”æœ¬è‰çº²ç›®è¦ä¸æ—¶ä¿±è¿›ä¸€ä¸ä¸ï¼Œä½†è‚¯å®šæ²¡æœ¬è‰çº²ç›®è®°å½•çš„å…¨ã€‚ æŸ¥çœ‹å¤§å›¾ ã€æ‰©å±•é˜…è¯»ã€‘http://daily.zhihu.com/story/8700074?utm_campaign=in_app_share&amp;utm_medium=iOS&amp;utm_source=weixin]]></content>
      <categories>
        <category>è®¡ç®—å¹¿å‘Š</category>
      </categories>
      <tags>
        <tag>è®¡ç®—å¹¿å‘Š</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¹¿å‘Šåè¯è§£é‡Š-SSP]]></title>
    <url>%2F2019%2F04%2F10%2F%E8%AE%A1%E7%AE%97%E5%B9%BF%E5%91%8A%2F%E5%B9%BF%E5%91%8A%E5%90%8D%E8%AF%8D%E8%A7%A3%E9%87%8A-SSP%2F</url>
    <content type="text"><![CDATA[SSPï¼ˆSell/Supply-Side Platformï¼‰ä¾›åº”æ–¹å¹³å° 1. å®šä¹‰ä¾›åº”æ–¹å¹³å°èƒ½å¤Ÿè®©å‡ºç‰ˆå•†ä¹Ÿä»‹å…¥å¹¿å‘Šäº¤æ˜“ï¼Œä»è€Œä½¿å®ƒä»¬çš„åº“å­˜å¹¿å‘Šå¯ç”¨ã€‚é€šè¿‡è¿™ä¸€å¹³å°ï¼Œå‡ºç‰ˆå•†å¸Œæœ›ä»–ä»¬çš„åº“å­˜å¹¿å‘Šå¯ä»¥è·å¾—æœ€é«˜çš„æœ‰æ•ˆæ¯åƒæ¬¡å±•ç¤ºè´¹ç”¨ï¼Œè€Œä¸å¿…ä»¥ä½ä»·é”€å”®å‡ºå»(ç™¾åº¦ç™¾ç§‘) é€šä¿—çš„è®²ï¼šæ˜¯ç«™é•¿æœåŠ¡å¹³å°ï¼Œç«™é•¿ä»¬åœ¨SSPä¸Šç®¡ç†è‡ªå·±çš„å¹¿å‘Šä½ï¼Œæ§åˆ¶å¹¿å‘Šçš„å±•ç°ç­‰ã€‚ 2. è¿è¡Œæœºåˆ¶SSPä¸DSPæ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚DSPè´Ÿè´£ç®¡ç†å¹¿å‘Šåª’ä½“ä¿¡æ¯ï¼Œä»¥åŠå¹¿å‘Šåª’ä½“å¯¹åº”çš„ç”¨æˆ·å±æ€§ã€‚SSPè´Ÿè´£ä¾›åº”å¹¿å‘Šåª’ä½“ä¿¡æ¯ï¼Œæ ¹æ®ç«™é•¿æä¾›çš„å¹¿å‘Šè¦æ±‚ä»¥åŠå½“å‰ç”¨æˆ·å±æ€§ï¼Œä¸ŠæŠ¥åˆ°äº¤æ˜“å¹³å°ï¼Œæœ€ç»ˆæ•²å®šå±•ç¤ºçš„å¹¿å‘Šä¿¡æ¯ï¼Œå¹¶è¿”å›åˆ°ç«™é•¿ã€‚ 3. ç‰¹ç‚¹ å¿«é€Ÿæ¥å…¥å„ç§å¹¿å‘Šæºã€äº§å“ å¿«é€ŸéªŒè¯å¹¿å‘Šçš„ä¸åŒæ ·å¼ã€è°ƒæ•´å¹¿å‘Šé¡µé¢å¸ƒå±€ å¿«é€Ÿè°ƒæ•´å¹¿å‘Šç­–ç•¥ ç²¾å‡†çš„ç”¨æˆ·ç”»åƒåˆ»ç”» å‡†ç¡®çš„å¹¿å‘Šæ¨è åˆ†é’Ÿçº§æ•°æ®ç›‘æ§ æ”¯æŒæµ·é‡æ•°æ®ç»†ç²’åº¦çš„å¤šç»´æ•°æ®æŸ¥è¯¢ ####ã€æ‰©å±•é˜…è¯»ã€‘http://www.10tiao.com/html/488/201712/2247485109/1.html]]></content>
      <categories>
        <category>è®¡ç®—å¹¿å‘Š</category>
      </categories>
      <tags>
        <tag>è®¡ç®—å¹¿å‘Š</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¹¿å‘Šåè¯è§£é‡Š-DSP]]></title>
    <url>%2F2019%2F04%2F10%2F%E8%AE%A1%E7%AE%97%E5%B9%BF%E5%91%8A%2F%E5%B9%BF%E5%91%8A%E5%90%8D%E8%AF%8D%E8%A7%A3%E9%87%8A-DSP%2F</url>
    <content type="text"><![CDATA[DSPï¼ˆDemand-Side Platformï¼‰éœ€æ±‚æ–¹å¹³å° 1. å®šä¹‰éœ€æ±‚æ–¹å¹³å°å…è®¸å¹¿å‘Šå®¢æˆ·å’Œå¹¿å‘Šæœºæ„æ›´æ–¹ä¾¿ä»¥åŠæ›´æœ‰æ•ˆåœ°è´­ä¹°å¹¿å‘Šåº“å­˜ï¼Œå› ä¸ºè¯¥å¹³å°æ±‡é›†äº†å„ç§å¹¿å‘Šäº¤æ˜“å¹³å°ï¼Œå¹¿å‘Šç½‘ç»œï¼Œä¾›åº”æ–¹å¹³å°ï¼Œç”šè‡³åª’ä½“çš„åº“å­˜ã€‚å…¶å®å°±æ˜¯ä¸ºç”²æ–¹æä¾›äº†è·¨åª’ä»‹è·¨å¹³å°è·¨ç»ˆç«¯å¹¿å‘ŠæŠ•æ”¾å¹³å°ã€‚(ç™¾åº¦ç™¾ç§‘) 2. è¿è¡Œæœºåˆ¶ä»æ™®é€šç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­åœ°å€æ è¾“å…¥ç½‘ç«™çš„ç½‘å€ï¼Œåˆ°ç”¨æˆ·çœ‹åˆ°é¡µé¢ä¸Šçš„å†…å®¹å’Œå¹¿å‘Šè¿™çŸ­çŸ­å‡ ç™¾æ¯«ç§’ä¹‹å†…ï¼Œå°±éœ€è¦å‘ç”Ÿäº†å¥½å‡ ä¸ªç½‘ç»œå¾€è¿”(Round Trip)çš„ä¿¡æ¯äº¤æ¢ã€‚ Ad Exchangeé¦–å…ˆè¦å‘DSPå‘ç«ä»·(bidding)è¯·æ±‚ï¼Œå‘ŠçŸ¥DSPè¿™æ¬¡æ›å…‰çš„å±æ€§ï¼Œå¦‚ç‰©æ–™çš„å°ºå¯¸ã€å¹¿å‘Šä½å‡ºç°çš„URLå’Œç±»åˆ«ã€ä»¥åŠç”¨æˆ·çš„Cookie IDç­‰ï¼›DSPæ¥åˆ°ç«ä»·è¯·æ±‚åï¼Œä¹Ÿå¿…é¡»åœ¨å‡ åæ¯«ç§’ä¹‹å†…å†³å®šæ˜¯å¦ç«ä»·è¿™æ¬¡æ›å…‰, å¦‚æœå†³å®šç«ä»·ï¼Œå‡ºä»€ä¹ˆæ ·çš„ä»·æ ¼ï¼Œç„¶åæŠŠç«ä»·çš„å“åº”å‘å›åˆ°Ad Exchangeã€‚ å¦‚æœAd Exchangeåˆ¤å®šè¯¥DSPèµ¢å¾—äº†è¯¥æ¬¡ç«ä»·ï¼Œè¦åœ¨æçŸ­æ—¶é—´å†…æŠŠDSPæ‰€ä»£è¡¨çš„å¹¿å‘Šä¸»çš„å¹¿å‘Šè¿…é€Ÿé€åˆ°ç”¨æˆ·çš„æµè§ˆå™¨ä¸Šã€‚ DSPåœ¨æ•´ä¸ªè¿‡ç¨‹ä¸­ï¼Œé€šè¿‡è¿ç”¨äººç¾¤å®šå‘æŠ€æœ¯åˆ†æï¼Œæ‰€å¾—å‡ºçš„åˆ†æç»“æœå°†ç›´æ¥å½±å“å¹¿å‘Šä¸»çš„å¹¿å‘ŠæŠ•æ”¾æ•ˆæœã€‚ 3. ç‰¹ç‚¹ èƒ½å¤Ÿæ•´åˆã€ä¼˜åŒ–ã€ç®¡ç†ä¸åŒæ¸ é“çš„æµé‡ çœŸæ­£å®ç°å—ä¼—è´­ä¹°ï¼Œæ‹¥æœ‰å…ˆè¿›çš„ç”¨æˆ·å®šå‘(Audience Targeting)æŠ€æœ¯ã€‚ æ‹¥æœ‰å¼ºå¤§çš„RTB(Real-Time Bidding)çš„åŸºç¡€è®¾æ–½å’Œèƒ½åŠ›ã€‚ å…¨é¢ç»Ÿä¸€çš„æ•°æ®æŠ¥è¡¨ æ‰©å±•é˜…è¯»https://www.jianshu.com/p/0d14c0faf531?utm_campaign=maleskine&amp;utm_content=note&amp;utm_medium=seo_notes&amp;utm_source=recommendation]]></content>
      <categories>
        <category>è®¡ç®—å¹¿å‘Š</category>
      </categories>
      <tags>
        <tag>è®¡ç®—å¹¿å‘Š</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å¹¿å‘Šåè¯è§£é‡Š-RTB]]></title>
    <url>%2F2019%2F04%2F10%2F%E8%AE%A1%E7%AE%97%E5%B9%BF%E5%91%8A%2F%E5%B9%BF%E5%91%8A%E5%90%8D%E8%AF%8D%E8%A7%A3%E9%87%8A-RTB%2F</url>
    <content type="text"><![CDATA[RTBï¼ˆReal Time Biddingï¼‰å®æ—¶ç«ä»· 1. å®šä¹‰ä¸€ç§åˆ©ç”¨ç¬¬ä¸‰æ–¹æŠ€æœ¯åœ¨æ•°ä»¥ç™¾ä¸‡è®¡çš„ç½‘ç«™ä¸Šï¼Œé’ˆå¯¹æ¯ä¸ªç”¨æˆ·å±•ç¤ºè¡Œä¸ºè¿›è¡Œè¯„ä¼°ä»¥åŠå‡ºä»·çš„ç«ä»·æŠ€æœ¯(ç™¾åº¦ç™¾ç§‘) 2. è¿è¡Œæœºåˆ¶å››ä¸ªä¸»ä½“è§’è‰²ï¼šå¹¿å‘Šä¸»ï¼ˆAdvertiserï¼‰ã€DSPï¼ˆDemandSidePlatformï¼Œéœ€æ±‚æ–¹å¹³å°ï¼‰ã€å¹¿å‘Šäº¤æ˜“å¹³å°ï¼ˆAd Exchangeï¼‰ã€äº’è”ç½‘åª’ä½“ æ•´ä½“è¿è¡Œæœºåˆ¶ï¼šå¹¿å‘Šä¸»å°†éœ€æ±‚æ”¾åˆ°dspå¹³å°ä¸Šï¼Œäº’è”ç½‘åª’ä½“å°†è‡ªå·±çš„å¹¿å‘Šæµé‡èµ„æºæ”¾åˆ°å¹¿å‘Šäº¤æ˜“å¹³å°ï¼Œdspé€šè¿‡ä¸å¹¿å‘Šäº¤æ˜“å¹³å°çš„æŠ€æœ¯å¯¹æ¥å®Œæˆç«ä»·è´­ä¹°ã€‚ å½“ç”¨æˆ·è®¿é—®ç½‘ç«™æ—¶ï¼Œæµè§ˆç—•è¿¹é€šè¿‡cookieè®°å½•ï¼ŒSSPå³å‘Ad Exchangeå¹¿å‘Šäº¤æ˜“å¹³å°å‘é€ç”¨æˆ·ä¿¡æ¯ï¼Œéšåå¹¿å‘Šä½çš„å…·ä½“ä¿¡æ¯åˆ™ä¼šç»è¿‡DMPçš„åˆ†æåŒ¹é…åå‘é€ç»™DSPï¼ŒDSPå°†å¯¹æ­¤è¿›è¡Œç«ä»·ï¼Œä»·é«˜è€…ä¼šè·å¾—è¿™ä¸ªå¹¿å‘Šå±•ç°æœºä¼šï¼Œå¹¶è¢«ç›®æ ‡ç”¨æˆ·çœ‹åˆ° 3. ç‰¹ç‚¹ç²¾å‡†è¥é”€ã€æŠ€æœ¯è¦æ±‚é«˜]]></content>
      <categories>
        <category>è®¡ç®—å¹¿å‘Š</category>
      </categories>
      <tags>
        <tag>è®¡ç®—å¹¿å‘Š</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Golangé›¶åŸºç¡€å…¥é—¨ã€‘05 æ¥å£]]></title>
    <url>%2F2019%2F03%2F20%2FGolang%2F%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%2F05%20%E6%8E%A5%E5%8F%A3%2F</url>
    <content type="text"><![CDATA[ä»€ä¹ˆæ˜¯æ¥å£ æ¥å£æ˜¯è¡Œä¸ºæ–¹æ³•çš„æŠ½è±¡ä¸æ¦‚æ‹¬ æ¥å£åªæœ‰æ–¹æ³•å£°æ˜ï¼Œä¸ç”¨å’Œå®ç°çš„ç»†èŠ‚ç»‘å®šåœ¨ä¸€èµ·ï¼Œä¹Ÿæ²¡æœ‰æ•°æ®å­—æ®µ æ¥å£æ˜¯éšå¼å®ç°çš„ï¼Œåªè¦æŸä¸ªç±»å‹æ‹¥æœ‰è¯¥æ¥å£çš„æ‰€æœ‰æ–¹æ³•ï¼Œå°±ç®—æ˜¯æ¥å£å®ç°ï¼Œæ— éœ€åƒå…¶ä»–è¯­è¨€é‡Œçš„implementsæ˜¾ç¤ºå£°æ˜ 12345678910111213141516171819type action interface &#123; run()&#125;type cat struct &#123; name string&#125;func (c cat)run() &#123; fmt.Println("Run " + c.name)&#125;type dog struct &#123; name string&#125;func (d dog)run()&#123; fmt.Println("Run " + d.name)&#125; åµŒå…¥æ¥å£æˆ‘ä»¬ä¸Šæ¬¡è¯´ç»“æ„ä½“çš„æ—¶å€™ï¼Œå·²ç»è¯´è¿‡ç»“æ„ä½“æ˜¯èƒ½å¤ŸåµŒå…¥çš„ï¼Œæ¥å£ä¹Ÿæ˜¯å¯ä»¥åµŒå…¥çš„ï¼Œä¾‹å¦‚animalåµŒå…¥äº†actionã€displayæ¥å£ 123456789101112131415161718192021222324type animal interface &#123; action display&#125;type action interface &#123; run()&#125;type display interface &#123; color() string&#125;type cat struct &#123; name string&#125;func (c cat)run() &#123; fmt.Println("Run " + c.name)&#125;func (c cat)color() string &#123; return "Grey"&#125; ç±»å‹æ–­è¨€æ–­è¨€ç±»å‹çš„è¯­æ³•ï¼šx.(T)ï¼Œè¿™é‡Œxè¡¨ç¤ºä¸€ä¸ªæ¥å£çš„ç±»å‹ï¼ŒTè¡¨ç¤ºä¸€ä¸ªç±»å‹ï¼ˆä¹Ÿå¯ä¸ºæ¥å£ç±»å‹ï¼‰ã€‚ä¸€ä¸ªç±»å‹æ–­è¨€æ£€æŸ¥ä¸€ä¸ªæ¥å£å¯¹è±¡xçš„åŠ¨æ€ç±»å‹æ˜¯å¦å’Œæ–­è¨€çš„ç±»å‹TåŒ¹é…ã€‚ å¦‚æœç±»å‹æ¯”è¾ƒå°‘çš„è¯ï¼Œå¯ä»¥ç”¨if ok pattern 1234567func assertCat(a animal) &#123; if catA, ok := a.(cat); ok &#123; fmt.Println("Animal : " + catA.name) return &#125; fmt.Println("Unknow")&#125; å¦‚æœç±»å‹è¾ƒå¤šçš„æƒ…å†µå¯ä»¥ä½¿ç”¨switch case 12345678func assertAnimal(a animal) &#123; switch v := a.(type) &#123; case cat: fmt.Println("Animal: " + v.name) default: fmt.Println("Unknown animal") &#125;&#125; å¤šæ€æˆ‘ä»¬åœ¨å®ç°å¤šæ€çš„æ—¶å€™ï¼Œå¯ä»¥ç›´æ¥åšä¸€å±‚å°è£…ï¼Œæ¥å—æ¥å£çš„å®ä¾‹ï¼Œè¿™æ ·ä¾¿å®ç°äº†ç±»ä¼¼æŠ½è±¡å·¥å‚æ¨¡å¼ 12345678910func animalRun(a animal) &#123; a.run()&#125;func main() &#123; catA := cat&#123;"cat"&#125; dogA := dog&#123;"dog"&#125; animalRun(catA) animalRun(dogA)&#125;]]></content>
      <categories>
        <category>Golang</category>
        <category>é›¶åŸºç¡€å…¥é—¨</category>
      </categories>
      <tags>
        <tag>Golang</tag>
        <tag>Golangé›¶åŸºç¡€å…¥é—¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Golangé›¶åŸºç¡€å…¥é—¨ã€‘04 å‡½æ•°ä¸æ–¹æ³•]]></title>
    <url>%2F2019%2F03%2F19%2FGolang%2F%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%2F04%20%E5%87%BD%E6%95%B0%2F</url>
    <content type="text"><![CDATA[çº¯å‡½æ•°ç‹¬ç«‹å­˜åœ¨ï¼Œä¸ä¾é™„äºä»»ä½•å®ä½“ï¼Œæ²¡æœ‰æ¥æ”¶è€… 12345package helperfunc SayHi(name string) &#123; fmt.Printf("Hi %s", name)&#125; æ–¹æ³•ä¸å‡½æ•°ä¸ä¸€æ ·çš„ï¼Œåœ¨å®šä¹‰çš„æ—¶å€™ï¼Œä¼šä¸æ¥æ”¶è€…ç»‘å®šåœ¨ä¸€èµ·ã€‚ 123456789101112type human struct &#123; name string&#125;(h human)func SayHi() string &#123; return "Hi " + h.name&#125;func main()&#123; h := Human&#123;name:"lee"&#125; fmt.Println(h.SayHi())&#125; ä¸å‡½æ•°å¯¹æ¯”ï¼Œåº”è¯¥å¯ä»¥çœ‹åˆ°ï¼Œåœ¨å‡½æ•°funcå£°æ˜ä¹‹å‰å¢åŠ çš„ï¼ˆh humanï¼‰ï¼Œè¿™ä¸ªå°±æ˜¯æ¥æ”¶è€…ï¼Œæ¯ä¸€ä¸ªhummanç»‘å®šäº†è¯¥æ–¹æ³•ï¼Œç±»ä¼¼é¢å‘å¯¹è±¡é‡Œçš„æˆå‘˜å‡½æ•°ã€‚ å€¼æ¥æ”¶&amp;æŒ‡é’ˆæ¥æ”¶ å€¼æ¥æ”¶è€…ï¼Œåœ¨è°ƒç”¨çš„æ—¶å€™æ˜¯å€¼æ¥æ”¶è€…çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œæ‰€ä»¥å¯¹è¯¥å€¼çš„ä»»ä½•ä¿®æ”¹ï¼Œä¸ä¼šå½±å“åŸæ¥çš„ç±»å‹å˜é‡ã€‚ æŒ‡é’ˆæ¥æ”¶è€…ä¼ é€’çš„æ˜¯ä¸€ä¸ªæŒ‡å‘åŸå€¼æŒ‡é’ˆçš„å‰¯æœ¬ï¼Œæ‰€ä»¥ä¿®æ”¹æ—¶ï¼ŒåŒæ—¶ä¹Ÿä¼šå½±å“åŸæ¥ç±»å‹å˜é‡çš„å€¼ã€‚ 123456789// å€¼æ¥æ”¶ï¼Œä¸èƒ½ä¿®æ”¹åŸå€¼(h human)func set()&#123; h.name = "can not set"&#125;// æŒ‡é’ˆæ¥æ”¶ï¼Œèƒ½ä¿®æ”¹åŸå€¼(h *human)func modify()&#123; h.nam = "can modify"&#125; å¤šå€¼è¿”å›Goçš„å‡½æ•°æ–¹æ³•æ”¯æŒå¤šå€¼è¿”å›ï¼Œä¾‹å¦‚æ ‡å‡†åº“ä¸­ï¼Œå¾ˆå¤šéƒ½æ˜¯è¿”å›ä¸¤ä¸ªå€¼ï¼Œä¸€ä¸ªæ˜¯è¿”å›å€¼ï¼Œä¸€ä¸ªæ˜¯å‡ºé”™æ—¶çš„é”™è¯¯ä¿¡æ¯ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬ç»å¸¸çœ‹åˆ°ä¸‹é¢è¿™æ®µä»£ç çš„åŸå› ã€‚ 12345678if err != nil &#123; // do something&#125;// æˆ‘ä»¬å®šä¹‰æ–¹æ³•func modify(name string)(string, error)&#123;return name, nil&#125;]]></content>
      <categories>
        <category>Golang</category>
        <category>é›¶åŸºç¡€å…¥é—¨</category>
      </categories>
      <tags>
        <tag>Golang</tag>
        <tag>Golangé›¶åŸºç¡€å…¥é—¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Golangé›¶åŸºç¡€å…¥é—¨ã€‘03 æ•°æ®ç±»å‹]]></title>
    <url>%2F2019%2F03%2F19%2FGolang%2F%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%2F03%20%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%2F</url>
    <content type="text"><![CDATA[åŸºæœ¬æ•°æ®ç±»å‹æ•´å‹æœ‰ç¬¦å·ç±»å‹ï¼šint8ã€int16ã€int32ã€int64ï¼Œåˆ†åˆ«å¯¹åº”8ã€16ã€32ã€64bitå¤§å° æ— ç¬¦å·ç±»å‹ï¼šuint8ã€uint16ã€uint32ã€uint64 æµ®ç‚¹æ•°ä¸å¤æ•°float32å’Œfloat64 ä¸¤ç§ç²¾åº¦çš„å¤æ•°ç±»å‹ï¼šcomplex64å’Œcomplex128ï¼Œåˆ†åˆ«å¯¹åº”float32å’Œfloat64ä¸¤ç§æµ®ç‚¹æ•°ç²¾åº¦ã€‚ å¸ƒå°”å‹trueå’Œfalse å­—ç¬¦ä¸²åªæ”¯æŒåŒå¼•å·ï¼Œä¸æ”¯æŒå•å¼•å·ã€‚string := &quot;hello, go&quot; å¸¸é‡const æ ‡è®°ã€‚ ioatå¸¸é‡ç”Ÿæˆå™¨ï¼Œé€‚åˆç”Ÿæˆæšä¸¾ç±»å‹ã€‚å¦‚ä¸‹é¢çš„ä¾‹å­ï¼ŒSundayè¢«å£°æ˜ä¸º0ï¼ŒMondayä¸º1ï¼Œä¸€æ¬¡ç±»æ¨ã€‚ 1234567891011type Weekday intconst ( Sunday Weekday = iota Monday Tuesday Wednesday Thursday Friday Saturday) å¤åˆæ•°æ®ç±»å‹æ•°ç»„ arrayæ•°ç»„çš„é•¿åº¦æ˜¯å›ºå®šï¼Œæ‰€ä»¥å®é™…é¡¹ç›®ä¸­æ˜¯æ¯”è¾ƒå°‘ç›´æ¥ä½¿ç”¨ 123var num [10]int // å£°æ˜é•¿åº¦ä¸º10çš„intç±»å‹æ•°ç»„ï¼Œæ¯ä¸ªå€¼åˆå§‹å€¼ä¸º0var a [3]int = [3]int&#123;1, 2, 3&#125; // å£°æ˜æ—¶å®ä¾‹åŒ–var a = [...]int&#123;1, 2&#125; // ä½¿ç”¨...æ•°ç»„çš„é•¿åº¦ç”±åˆå§‹åŒ–çš„ä¸ªæ•°å†³å®šï¼Œä¾‹å¦‚è¿™é•¿åº¦ä¸º2 åˆ‡ç‰‡ sliceå˜é•¿çš„æ•°ç»„ï¼Œå¦‚æœä½ ä¹‹å‰æ˜¯å†™phpï¼Œé‚£ä½ å°±å¯ä»¥æŠŠsliceè®¤ä¸ºæ˜¯phpçš„æ— ç´¢å¼•æ•°ç»„äº†,ä¸€èˆ¬å†™ä½œ[]T ä¸€ä¸ªsliceç”±ä¸‰éƒ¨åˆ†æ„æˆï¼šæŒ‡é’ˆã€é•¿åº¦ã€å®¹é‡ã€‚å†…ç½®çš„lenå’Œcapå‡½æ•°è¿”å›å¯¹åº”é•¿åº¦å’Œå®¹é‡ã€‚len(s) == 0åˆ¤æ–­æ˜¯å¦ä¸ºç©ºï¼Œä¸åº”è¯¥ç”¨ s == nil appendæ‰©å±•slice 12var nums []intnums = append(nums, 1, 2) å“ˆå¸Œè¡¨ mapæ˜¯ä¸€ä¸ªæ— åºçš„key/valueå¯¹çš„é›†åˆï¼Œå†™æ³•ï¼šmap[K]Vã€‚ å¦‚æœä½ ä¹‹å‰æ˜¯å†™phpï¼Œé‚£ä½ å¯ä»¥æŠŠå®ƒè®¤ä¸ºæ˜¯phpçš„ç´¢å¼•æ•°ç»„ï¼Œä½†æ²¡æœ‰PHPçµæ´»ï¼Œä»–çš„keyï¼Œå¿…é¡»æ˜¯åŒä¸€ç±»å‹ï¼Œvalueä¹Ÿå¿…é¡»æ˜¯ç»Ÿä¸€ç±»å‹ã€‚ 1234567891011121314151617181920212223242526score := make(map[string]int) // åˆ›å»ºkeyä¸ºstringï¼Œvalueä¸ºintå‹// åˆå§‹åŒ–æ–¹æ³•1score := map[string]int&#123; "lilei": 88, "hanmeimei": 90,&#125;// åˆå§‹åŒ–æ–¹æ³•2score := make(map[string]int)score["lilei"] = 88score["hanmeimei"] = 90// éå†for name, num := range score &#123; fmt.Printf("%s\t%d\n", name, num)&#125;// deleteåˆ é™¤å…ƒç´ delete(ages, "li") // remove element ages["li"]// å°æŠ€å·§ï¼Œåˆ¤æ–­mapä¸­keyæ˜¯å¦å­˜åœ¨// mapçš„ä¸‹æ ‡è¯­æ³•å°†äº§ç”Ÿä¸¤ä¸ªå€¼ï¼›ç¬¬ä¸€ä¸ªæ˜¯å€¼ï¼Œç¬¬äºŒä¸ªæ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œç”¨äºæŠ¥å‘Šå…ƒç´ æ˜¯å¦çœŸçš„å­˜åœ¨ã€‚if num, ok := score["xiaoming"]; ok &#123; //å­˜åœ¨&#125; ç»“æ„ä½“ structå¤æ‚èšåˆæ•°æ®ç±»å‹ã€‚å¦‚æœæˆå‘˜é¦–å­—æ¯å¤§å†™ï¼Œåˆ™å¯¹å¤–å¯è§ã€‚ 12345type Student struct &#123; ID int Name string Age int&#125; ç»“æ„ä½“åµŒå…¥å’ŒåŒ¿åæˆå‘˜ 12345678910111213type Person struct &#123; Name, Addr string&#125;type Student struct &#123; Person Subject string&#125;var s students.Name = &quot;lilei&quot;s.Addr = &quot;beijing&quot;s.Subject = &quot;shuxue&quot; Goè¯­è¨€çš„ç‰¹æ€§ï¼šå¯ä»¥åªå£°æ˜ä¸€ä¸ªæˆå‘˜å¯¹åº”çš„æ•°æ®ç±»å‹è€Œä¸æŒ‡å®šæˆå‘˜åï¼Œå¦‚ä¸ŠPersonã€‚å®é™…é¡¹ç›®ä¸­å¼€å‘ä½¿ç”¨è¯¥å£°æ˜æ–¹å¼ã€‚]]></content>
      <categories>
        <category>Golang</category>
        <category>é›¶åŸºç¡€å…¥é—¨</category>
      </categories>
      <tags>
        <tag>Golang</tag>
        <tag>Golangé›¶åŸºç¡€å…¥é—¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€MySQL åŸç†ã€‘01 ä½“ç³»ç»“æ„]]></title>
    <url>%2F2019%2F03%2F07%2FMySQL%2FMySQL%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%2F</url>
    <content type="text"><![CDATA[MySQLä½“ç³»ç»“æ„â€“æ‘˜è‡ªMySQLå®˜æ–¹æ‰‹å†Œ æ•´ä½“å¯åˆ†å››å±‚ç¬¬ä¸€å±‚ï¼šè¿æ¥å±‚é˜²æ­¢èµ„æºçš„é¢‘ç¹åˆ†é…ã€é‡Šæ”¾ï¼Œæå‰å»ºç«‹ä¸€ä¸ªè¿æ¥æ±  åŠŸèƒ½ï¼šè¿›è¡Œèº«ä»½éªŒè¯ã€çº¿ç¨‹ç®¡ç†ã€è¿æ¥é™åˆ¶ã€å†…å­˜æ£€æŸ¥ã€æ•°æ®ç¼“å­˜ã€‚ å®ç°ï¼šé¢„å…ˆåœ¨è¿æ¥æ± ä¸­æ”¾å…¥ä¸€å®šæ•°é‡çš„è¿æ¥ï¼Œå½“éœ€è¦å»ºç«‹æ•°æ®åº“è¿æ¥æ—¶ï¼Œä»æ± ä¸­å–å‡ºä¸€ä¸ªï¼Œç”¨å®Œæ”¾å›å»ã€‚ é€šä¿¡åè®®ï¼š TCP/IPåè®®ï¼Œæœ¬åœ°ä¸è¿œç¨‹è¿æ¥ UNIXå¥—æ¥å­—æ–‡ä»¶ å…±äº«å†…å­˜ å‘½åç®¡é“ ç¬¬äºŒå±‚ï¼šSQLå±‚æ€»å…±ç”±5ä¸ªéƒ¨åˆ†ç»„æˆ 1. ç®¡ç†æœåŠ¡å’Œå·¥å…·ç»„ä»¶å¤‡ä»½ã€å¤åˆ¶ã€é›†ç¾¤ã€ç®¡ç†ã€é…ç½®ã€è¿ç§»ç­‰ç®¡ç†å·¥å…· 2. SQLæ¥å£ç»„ä»¶è¿›è¡ŒDMLã€DDLï¼Œå­˜å‚¨è¿‡ç¨‹ã€è§†å›¾ç­‰æ“ä½œå’Œç®¡ç† 3. è§£æå™¨ç»„ä»¶éªŒè¯å’Œè§£æSQLå‘½ä»¤ 4. æŸ¥è¯¢ä¼˜åŒ–å™¨å¯¹SQLæŸ¥è¯¢è¿›è¡Œä¼˜åŒ– 5. ç¼“å­˜å’Œç¼“å†²åŒºå¯¹ç»“æœé›†è¿›è¡Œç¼“å­˜ï¼Œæå‡é‡å¤æŸ¥è¯¢æ•ˆç‡ ç¬¬ä¸‰å±‚ï¼šæ’ä»¶å¼å­˜å‚¨å¼•æ“MySQLçš„å­˜å‚¨å¼•æ“æ˜¯æ’ä»¶å¼çš„ï¼Œèƒ½ç”±ç¬¬ä¸‰æ–¹å¼€å‘ â€“ æŸ¥çœ‹æ•°æ®åº“æ”¯æŒçš„å¼•æ“ 3.1 MyISAMæŸ¥è¯¢é€Ÿåº¦å¿«ï¼Œè¾ƒå¥½çš„ç´¢å¼•ä¼˜åŒ–å’Œæ•°æ®å‹ç¼©æŠ€æœ¯ï¼Œä¸æ”¯æŒäº‹åŠ¡ã€è¡¨é”è®¾è®¡ï¼Œæ”¯æŒå…¨æ–‡ç´¢å¼• MyISAMè¡¨ç”±MYDå’ŒMYIç»„æˆï¼ŒMYDå­˜æ”¾æ•°æ®æ•°æ®ï¼ŒMYIå­˜æ”¾ç´¢å¼•æ–‡ä»¶ 3.2 InnoDBæ”¯æŒäº‹åŠ¡ï¼Œè¡Œé”è®¾è®¡ã€æ”¯æŒå¤–é”®ã€‚ æ¯ä¸ªinnodbå­˜å‚¨å¼•æ“çš„è¡¨å•ç‹¬å­˜æ”¾åœ¨ç‹¬ç«‹çš„ibdæ–‡ä»¶ä¸­ 3.3 Memoryé€‚åˆå­˜å‚¨ä¸´æ—¶æ•°æ®ï¼Œå¦‚æœæ•°æ®åº“é‡å¯æˆ–å´©æºƒï¼Œæ•°æ®å°†æ¶ˆå¤±ã€‚åªæ”¯æŒè¡¨é”ï¼Œå¹¶å‘æ€§èƒ½å·®ã€‚ å…¶ä»–è¿˜æœ‰ Archive ã€ Federated ã€Mariaå­˜å‚¨å¼•æ“ç­‰ ç¬¬å››æ¬¡ï¼šç‰©ç†æ–‡ä»¶ æ”¯æŒçš„æ–‡ä»¶ç±»å‹ EXT3ã€EXT4ã€NTFSã€NFS æ–‡ä»¶å†…å®¹ æ•°æ®æ–‡ä»¶ æ—¥å¿—æ–‡ä»¶]]></content>
      <categories>
        <category>MySQL</category>
        <category>åŸç†åˆ†æ</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
        <tag>åŸç†åˆ†æ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Golangé›¶åŸºç¡€å…¥é—¨ã€‘02 å˜é‡ä¸ç±»å‹]]></title>
    <url>%2F2019%2F03%2F06%2FGolang%2F%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%2F02%20%E7%B1%BB%E5%9E%8B%E4%B8%8E%E5%8F%98%E9%87%8F%2F</url>
    <content type="text"><![CDATA[å¯è§æ€§æˆ‘ä»¬éƒ½çŸ¥é“å…¶ä»–é¢å‘å¯¹è±¡çš„è¯­è¨€ï¼Œéƒ½æ˜¯ç”¨å…³é”®è¯publicã€privateã€protectedæ¥æ ‡è®°å¯è§æ€§ã€‚ä½†åœ¨GOé‡Œï¼Œç›´æ¥ç”¨é¦–å­—æ¯çš„å¤§å°å†™æ¥å†³å®šå¯è§æ€§ï¼Œå¤§å†™å¯¹å¤–å¯è§ï¼Œå°å†™ä»…åŒ…å†…å¯è§ã€‚ä¾‹å¦‚fmtåŒ…çš„Printfå‡½æ•°åœ¨fmtåŒ…å¤–éƒ¨è®¿é—®ã€‚ Golangä¹ æƒ¯é©¼å³°å¼å‘½åï¼Œä¾‹å¦‚isExisits() å£°æ˜æœ‰å››ç§ç±»å‹çš„å£°æ˜è¯­å¥ï¼šå˜é‡varã€å¸¸é‡constã€ç±»å‹typeã€å‡½æ•°func å˜é‡1. varå£°æ˜ var å˜é‡åå­— ç±»å‹ = è¡¨è¾¾å¼ ä¸€èˆ¬ â€œç±»å‹â€ã€æˆ–è€…â€œ=â€å¯ä»¥çœç•¥ä¸€ä¸ªï¼Œä¾‹å¦‚ï¼š 12var i, j, k int // int, int, intvar b, f, s = true, 2.3, &quot;four&quot; // bool, float64, string ç”¨å¤„ï¼šç”¨äºéœ€è¦æ˜¾å¼æŒ‡å®šå˜é‡ç±»å‹åœ°æ–¹ï¼Œæˆ–è€…å› ä¸ºå˜é‡ç¨åä¼šè¢«é‡æ–°èµ‹å€¼è€Œåˆå§‹å€¼æ— å…³ç´§è¦çš„åœ°æ–¹ã€‚ 2. ç®€çŸ­å£°æ˜ å˜é‡åå­— := è¡¨è¾¾å¼ 1i := 100 ç”¨å¤„ï¼šç”¨äºå¤§éƒ¨åˆ†çš„å±€éƒ¨å˜é‡çš„å£°æ˜å’Œåˆå§‹åŒ–ã€‚ æ³¨æ„ï¼Œç®€çŸ­å˜é‡å£°æ˜è¯­å¥ä¸­å¿…é¡»è‡³å°‘è¦å£°æ˜ä¸€ä¸ªæ–°çš„å˜é‡ï¼Œä¸‹é¢çš„ä»£ç å°†ä¸èƒ½ç¼–è¯‘é€šè¿‡ï¼š 123f, err := os.Open(infile)// ...f, err := os.Create(outfile) // ç¼–è¯‘é”™è¯¯ï¼Œæç¤ºæ²¡æœ‰æ–°çš„å˜é‡ï¼Œä¸éœ€è¦:= æŒ‡é’ˆä¸€ä¸ªå˜é‡å¯¹åº”ä¸€ä¸ªä¿å­˜äº†å˜é‡å¯¹åº”ç±»å‹å€¼çš„å†…å­˜ç©ºé—´ã€‚ ä¸€ä¸ªæŒ‡é’ˆçš„å€¼æ˜¯å¦ä¸€ä¸ªå˜é‡çš„åœ°å€ã€‚ 12345i := 1p := &amp;i // p ç±»å‹ä¸º *int æŒ‡å‘ifmt.Println(*p) // "1"*p = 2 // å› ä¸ºpæŒ‡å‘äº†içš„åœ°å€ï¼Œæ‰€ä»¥ç›¸å½“äº i = 2fmt.Println(i) // "2" ç±»å‹ç±»å‹å£°æ˜è¯­å¥ä¸€èˆ¬å‡ºç°åœ¨åŒ…ä¸€çº§ï¼Œå› æ­¤å¦‚æœæ–°åˆ›å»ºçš„ç±»å‹åå­—çš„é¦–å­—ç¬¦å¤§å†™ï¼Œåˆ™åœ¨å¤–éƒ¨åŒ…ä¹Ÿå¯ä»¥ä½¿ç”¨ã€‚ type ç±»å‹åå­— åº•å±‚ç±»å‹ ä¾‹å­ï¼šæœ€å¸¸ç”¨çš„structï¼ŒUserè¢«å£°æ˜ä¸ºä¸€ä¸ªç±»å‹ 1234type User struct&#123; name string age string&#125;]]></content>
      <categories>
        <category>Golang</category>
        <category>é›¶åŸºç¡€å…¥é—¨</category>
      </categories>
      <tags>
        <tag>Golang</tag>
        <tag>Golangé›¶åŸºç¡€å…¥é—¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ã€Golangé›¶åŸºç¡€å…¥é—¨ã€‘01 Helloï¼ŒGo]]></title>
    <url>%2F2019%2F03%2F06%2FGolang%2F%E9%9B%B6%E5%9F%BA%E7%A1%80%E5%85%A5%E9%97%A8%2F01%20Hello%2C%20GO%2F</url>
    <content type="text"><![CDATA[ä¸€ã€ç¬¬ä¸€ä¸ªGoç¨‹åºï¼šhello.go1234567package mainimport "fmt"func main()&#123; fmt.Println("Hello, Go")&#125; äºŒã€go run ä¸€æ¬¡æ€§è°ƒè¯•12$ go run hello.goHello, Go è¯´æ˜ï¼š Goæ˜¯ä¸€é—¨ç¼–è¯‘å‹è¯­è¨€ï¼ŒGoè¯­è¨€çš„å·¥å…·é“¾å°†æºä»£ç åŠå…¶ä¾èµ–è½¬æ¢æˆè®¡ç®—æœºçš„æœºå™¨æŒ‡ä»¤ã€‚ go run ç¼–è¯‘ä¸€ä¸ªæˆ–å¤šä¸ªä»¥.goç»“å°¾çš„æºæ–‡ä»¶ï¼Œé“¾æ¥åº“æ–‡ä»¶ï¼Œå¹¶è¿è¡Œæœ€ç»ˆç”Ÿæˆçš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚ ä¸‰ã€go build ç›´æ¥ç”Ÿæˆå¯æ‰§è¡Œç¨‹åºå¦‚æœä¸åªæ˜¯ä¸€æ¬¡çš„è°ƒè¯•ï¼Œä½ å¯ä»¥ç¼–è¯‘è¿™ä¸ªç¨‹åºï¼Œä¿å­˜ç¼–è¯‘ç»“æœä»¥å¤‡å°†æ¥ä¹‹ç”¨ã€‚å¯ä»¥ç”¨buildå­å‘½ä»¤ï¼Œå°†ç›´æ¥ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ helloï¼Œä¹‹åç›´æ¥è¿è¡Œhelloå¯æ‰§è¡Œæ–‡ä»¶ï¼Œç»“æœä¸go runæ—¶æ˜¯ä¸€è‡´çš„ï¼š 123$ go build hello.go$ ./helloHello, GO å››ã€ä¸€äº›çŸ¥è¯†ç‚¹ Goè¯­è¨€é€šè¿‡åŒ…ï¼ˆpackageï¼‰ç»„ç»‡ï¼Œç±»ä¼¼å…¶ä»–è¯­è¨€çš„åº“ã€æ¨¡å—ã€å‘½åç©ºé—´ã€‚æ¯ä¸ªæºæ–‡ä»¶éƒ½ä»¥ä¸€æ¡ package å£°æ˜è¯­å¥å¼€å§‹ï¼Œè¿™ä¸ªä¾‹å­é‡Œå°±æ˜¯ package main main åŒ…æ¯”è¾ƒç‰¹æ®Šã€‚å®ƒå®šä¹‰äº†ä¸€ä¸ªç‹¬ç«‹å¯æ‰§è¡Œçš„ç¨‹åºï¼Œè€Œä¸æ˜¯ä¸€ä¸ªåº“ã€‚åœ¨ main é‡Œçš„ main å‡½æ•°ä¹Ÿå¾ˆç‰¹æ®Šï¼Œå®ƒæ˜¯æ•´ä¸ªç¨‹åºæ‰§è¡Œæ—¶çš„å…¥å£ ä½¿ç”¨ï¼ˆimportï¼‰æ¥å¯¼å…¥åˆ«çš„åŒ…ï¼Œimport &quot;fmt&quot; gofmt å·¥å…·æŠŠä»£ç æ ¼å¼åŒ–ä¸ºæ ‡å‡†æ ¼å¼ï¼Œæœ€å¥½åœ¨æ¯æ¬¡æäº¤Gitå‰æ‰§è¡Œä¸€æ¬¡ï¼Œä¿è¯ä»£ç é£æ ¼ä¸€è‡´ go clean ç§»é™¤å½“å‰æºç åŒ…é‡Œç¼–è¯‘ç”Ÿæˆçš„æ–‡ä»¶ï¼Œå¦‚test.out æŒ‰ç…§æƒ¯ä¾‹ï¼Œæœ€å¥½æ¯ä¸ªåŒ…çš„åŒ…å£°æ˜å‰æ·»åŠ æ³¨é‡Š 12// package for app's configpackage config ç©ºæ ‡è¯†ç¬¦ï¼ˆ_ä¸‹åˆ’çº¿ï¼‰ç±»ä¼¼åƒåœ¾ç®±ï¼Œå°†ä¸éœ€è¦çš„å˜é‡ä¸¢å¼ƒï¼Œå¦‚ä¸‹ï¼Œåªéœ€è¦rangeçš„valueï¼Œä¸éœ€è¦ç´¢å¼• 123for _, arg := range args &#123; // todo&#125;]]></content>
      <categories>
        <category>Golang</category>
        <category>é›¶åŸºç¡€å…¥é—¨</category>
      </categories>
      <tags>
        <tag>Golang</tag>
        <tag>Golangé›¶åŸºç¡€å…¥é—¨</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Zookeeper é…ç½®ä¸­å¿ƒå®ç°ï¼ˆGolangï¼‰]]></title>
    <url>%2F2019%2F03%2F02%2FZookeeper%2FZookeeper%20%E9%85%8D%E5%90%88Golang%E5%AE%9E%E7%8E%B0%E9%85%8D%E7%BD%AE%E4%B8%AD%E5%BF%83%2F</url>
    <content type="text"><![CDATA[ç›®æ ‡ä¸€ä¸ªä¹ä¸ç‰ˆè‡ªæ›´æ–°é…ç½®ä¸­å¿ƒï¼Œæ›´æ–°é…ç½®åï¼Œèƒ½åœ¨å„ä¸ªæœåŠ¡å™¨å®ç°æ›´æ–° æ¶æ„ è§’è‰² config-web: é…ç½®åå°ï¼Œä¸»è¦ç”¨äºç®¡ç†é…ç½®ï¼Œå¢æ”¹é…ç½® config-agent: ç›‘å¬é…ç½®ï¼Œé‡åˆ°å˜åŠ¨åï¼Œè‡ªåŠ¨æ‹‰å–æœ€æ–°æ–‡ä»¶åˆ°æœ¬åœ° config-sdk: ä¸šåŠ¡é›†æˆè¯¥sdkï¼Œç”¨äºè¯»å–é…ç½® config-web é…ç½®åå° æŒä¹…å­˜å‚¨ä¸ºMySQLï¼Œä¹Ÿå¯ä»¥åŠ ä¸€å±‚ç¼“å­˜Redisï¼Œè®¾ç½®ä¸€ä¸ªå”¯ä¸€çš„ä¸šåŠ¡KEYï¼Œå¯¹åº”çš„ZKé‡Œçš„ZNode å¯¹äºé…ç½®èŠ‚ç‚¹çš„æ“ä½œï¼Œæœ€ç»ˆå¿…é¡»è½ç›˜ï¼ŒæŒä¹…åŒ–å­˜å‚¨äºMySQL æŒä¹…å­˜å‚¨æˆåŠŸåï¼Œå°†é…ç½®çš„å†…å®¹å†™å…¥ZKé›†ç¾¤ä¸­ ä»¥ä¸‹æ˜¯createèŠ‚ç‚¹çš„ä»£ç ï¼Œsetçš„åŒï¼Œè¿™æ˜¯ç®€å•çš„æ“ä½œ 123456789101112131415161718192021222324package mainimport ( &quot;fmt&quot; . &quot;go-zk/connect&quot; &quot;github.com/samuel/go-zookeeper/zk&quot;)func main() &#123; conn := Connect() defer conn.Close() flags := int32(zk.FlagSequence) acl := zk.WorldACL(zk.PermAll) // create node path := PathConfig.ZNodePath +&quot;/&quot;+ &quot;huodong-&quot; data := []byte(`&#123;&quot;num&quot;:6.13,&quot;strs&quot;:[&quot;a&quot;,&quot;b&quot;]&#125;`) createPath, err := conn.Create(path, data, flags, acl) if err != nil &#123; panic(err) &#125;&#125; config-agent ç›‘æ§ ç”±äºZKçš„ç‰¹æ€§ï¼Œèƒ½ä¿æŒé›†ç¾¤çš„ä¸€è‡´æ€§ï¼Œä»¥åŠæä¾›äº†ç›‘å¬æœºåˆ¶ï¼Œåœ¨èŠ‚ç‚¹å†…å®¹è¢«æ”¹å˜æ—¶èƒ½æä¾›å›è°ƒ åœ¨config-agentç›‘å¬å¯¹åº”çš„ä¸šåŠ¡èŠ‚ç‚¹ ç›‘å¬çš„å˜åŠ¨æ—¶ï¼Œä¼šæœ‰é€šçŸ¥ï¼Œä¾‹å¦‚ï¼Œæ›´æ”¹èŠ‚ç‚¹å†…å®¹æ—¶ï¼Œè·å–èŠ‚ç‚¹çš„å†…å®¹ï¼Œç„¶åè¿›è¡Œè½ç›˜ï¼Œæˆ–è€…å­˜åˆ°å†…å­˜ä¸­éƒ½ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129package mainimport ( &quot;fmt&quot; &quot;github.com/samuel/go-zookeeper/zk&quot; . &quot;go-zk/connect&quot; &quot;os&quot; &quot;sync&quot;)type Watch struct &#123;&#125;func (this *Watch)ZkChildrenWatch(c *zk.Conn, path string) &#123; for &#123; v, _, get_ch, err := c.ChildrenW(path) if err != nil &#123; fmt.Println(err) &#125; fmt.Printf(&quot;value of path[%s]=[%s].\n&quot;, path, v) for &#123; select &#123; case ch_event := &lt;-get_ch: &#123; fmt.Printf(&quot;%+v\n&quot;, ch_event) if ch_event.Type == zk.EventNodeCreated &#123; fmt.Printf(&quot;has new node[%d] create\n&quot;, ch_event.Path) &#125; else if ch_event.Type == zk.EventNodeDeleted &#123; fmt.Printf(&quot;has node[%s] detete\n&quot;, ch_event.Path) &#125; else if ch_event.Type == zk.EventNodeDataChanged &#123; this.Callback(c, ch_event.Path) &#125; else if ch_event.Type == zk.EventNodeChildrenChanged &#123; fmt.Printf(&quot;children node change%+v\n&quot;, ch_event.Path) &#125; &#125; &#125; break &#125; &#125;&#125;func (this *Watch)ZkNodeWatch(c *zk.Conn, path string) &#123; for &#123; v, _, get_ch, err := c.GetW(path) if err != nil &#123; fmt.Println(err) &#125; fmt.Printf(&quot;value of path[%s]=[%s].\n&quot;, path, v) for &#123; select &#123; case ch_event := &lt;-get_ch: &#123; if ch_event.Type == zk.EventNodeCreated &#123; fmt.Printf(&quot;has new node[%d] create\n&quot;, ch_event.Path) &#125; else if ch_event.Type == zk.EventNodeDeleted &#123; fmt.Printf(&quot;has node[%s] detete\n&quot;, ch_event.Path) &#125; else if ch_event.Type == zk.EventNodeDataChanged &#123; this.Callback(c, ch_event.Path) &#125; &#125; &#125; break &#125; &#125;&#125;func (this *Watch)Callback(c *zk.Conn, path string) &#123; data, _, err := c.Get(path) if err != nil &#123; fmt.Println(err) &#125; // create file fileName := PathConfig.LocalPath + path + &quot;.json&quot; os.Create(fileName) f, err := os.OpenFile(fileName, os.O_WRONLY|os.O_TRUNC, 0600) defer f.Close() if err != nil &#123; fmt.Println(err.Error()) &#125; else &#123; _,err=f.Write([]byte(data)) fmt.Println(err) return &#125; fmt.Print(&quot;Write File OK !!!&quot;)&#125;func main() &#123; conn := Connect() // ç›‘å¬æ‰€æœ‰å­èŠ‚ç‚¹å˜åŒ– children, _, err := conn.Children(PathConfig.ZNodePath) if err != nil &#123; panic(err) &#125; fmt.Printf(&quot;%+v\n&quot;, children) w := Watch&#123;&#125; var wg sync.WaitGroup wg.Add(1) go func(path string) &#123; w.ZkChildrenWatch(conn, path) &#125;(PathConfig.ZNodePath) wg.Wait() // ç›‘å¬èŠ‚ç‚¹å†…å®¹å˜åŒ– //var wg sync.WaitGroup //wg.Add(len(children)) // //for _, path := range children&#123; // path = PathConfig.ZNodePath + &quot;/&quot; + path // go func(path string) &#123; // defer wg.Done() // log.Print(&quot;Zookeeper Watcher Starting, &quot;, path) // w.ZkNodeWatch(conn, path) // &#125;(path) //&#125; //wg.Wait()&#125; config-sdk å®¢æˆ·ç«¯åŠ è½½é…ç½®è¯»å–é…ç½®çš„æ–¹å¼å¾ˆå¤šæ ·ï¼Œä¸¤ç§æ€è·¯ï¼š ç›´æ¥è¯»å–æ–‡ä»¶ï¼Œç”±ä¸šåŠ¡æ–¹ç›´æ¥è¯»å–ï¼Œ.json ã€ .ini ã€ .tomlç­‰ sdkå¯ä»¥ä¸config-agentç»“åˆï¼Œå¦‚æœè¯»å–æ–‡ä»¶åŠ è½½é…ç½®å¤±è´¥ï¼Œåˆ©ç”¨agentï¼Œé‡æ–°ä¸»åŠ¨æ‹‰ä¸€æ¬¡æ–‡ä»¶åˆ°æœ¬åœ°ï¼Œå®ç°æ–‡ä»¶çš„æ‡’åŠ è½½ æ•ˆæœå±•ç¤º12345678910111213# This is Zookeeper config file.title = &quot;Zookeeper config file&quot;[zookeeper]servers = [&quot;10.00.85.70:2181&quot;, &quot;10.00.80.191:2181&quot;, &quot;10.00.97.239:2181&quot;]port = 2181session_timeout = 500enabled = true[path]znode_path = &quot;/huodong/conf&quot;local_path = &quot;/tmp/zookeeper&quot; ç”±äºåœ¨æœ¬åœ°æµ‹è¯•ï¼Œå«Œéº»çƒ¦å°±æ²¡æœ‰éƒ¨ç½²åˆ°æœåŠ¡å™¨äº†ï¼Œå°†locah_pathåˆ†åˆ«æ”¹æˆâ€/tmp/zookeeperâ€ã€â€/tmp/zookeeper1â€ã€â€/tmp/zookeeper2â€ï¼Œèµ·ä¸‰ä¸ªè¿›ç¨‹ è¿æ¥åˆ°zkæœåŠ¡å™¨ï¼Œä¿®æ”¹èŠ‚ç‚¹çš„å†…å®¹set /huodong/conf/huodong-0000000001 &#39;{&quot;num&quot;:6.13,&quot;strs&quot;:[&quot;a&quot;,&quot;b&quot;]}&#39; çœ‹ä¸‹æœ¬åœ°æ–‡ä»¶å°±ä¼šç”Ÿæˆå¯¹åº”çš„é…ç½®æ–‡ä»¶]]></content>
      <categories>
        <category>Zookeeper</category>
      </categories>
      <tags>
        <tag>Zookeeper</tag>
        <tag>åˆ†å¸ƒå¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Zookeeper é›†ç¾¤æ­å»º]]></title>
    <url>%2F2019%2F02%2F28%2FZookeeper%2FZookeeper%E9%9B%86%E7%BE%A4%E6%90%AD%E5%BB%BA%2F</url>
    <content type="text"><![CDATA[ç›®æ ‡ç”¨ä¸‰å°æœºå™¨æ­å»ºä¸€ä¸ªZookeeperé›†ç¾¤ æ–°å¢myidæ–‡ä»¶ç”¨äºé…ç½®å½“å‰IPå¯¹åº”çš„ç¼–å·ã€‚å¯ä»¥æŸ¥çœ‹/conf/zoo.cfgçš„dataDirè·¯å¾„ï¼Œåœ¨è¯¥è·¯å¾„æ–°å¢myidï¼Œå†…å®¹å°±åªåå•†å¯¹åº”çš„ç¼–å·å°±è¡Œ 12$ cat /tmp/zookeeper/myid1 ç¼–è¾‘é…ç½®æ–‡ä»¶vi /conf/zoo.cfg åœ¨è¯¥é…ç½®æ–‡ä»¶ä¸‹æ–°å¢ä»¥ä¸‹å†…å®¹ï¼Œæ¯ä¸ªæœåŠ¡å™¨éƒ½éœ€è¦å¢åŠ  123server.1=10.99.85.70:2888:3888server.2=10.99.80.191:2888:3888server.3=10.99.97.239:2888:3888 è¯´æ˜ï¼šserver.A=B:C:D A æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œå°±æ˜¯myidé‡Œçš„é‚£ä¸ªæ•°å­—ï¼Œè¡¨ç¤ºè¿™ä¸ªæ˜¯ç¬¬å‡ å·æœåŠ¡å™¨ B æ˜¯è¿™ä¸ªæœåŠ¡å™¨çš„ ip åœ°å€ C ç”¨æ¥é›†ç¾¤æˆå‘˜çš„ä¿¡æ¯äº¤æ¢ä»¥åŠä¸é›†ç¾¤ä¸­çš„ Leader æœåŠ¡å™¨äº¤æ¢ä¿¡æ¯ D ç«¯å£æ˜¯åœ¨leaderæŒ‚æ‰æ—¶ä¸“é—¨ç”¨æ¥è¿›è¡Œé€‰ä¸¾Leaderæ‰€ç”¨ã€‚ é€ä¸€å¯åŠ¨æœåŠ¡12345678910111213141516171819$ bin/zkServer.sh start#ip 1$ bin/zkServer.sh statusZooKeeper JMX enabled by defaultUsing config: /zookeeper-3.4.8/bin/../conf/zoo.cfgMode: follower#ip 2$ bin/zkServer.sh statusZooKeeper JMX enabled by defaultUsing config: /zookeeper-3.4.8/bin/../conf/zoo.cfgMode: leader# ip 3$ bin/zkServer.sh statusZooKeeper JMX enabled by defaultUsing config: /zookeeper-3.4.8/bin/../conf/zoo.cfgMode: follower Leaderé€‰ä¸¾æƒ…å†µæ­¥éª¤ä¸€ï¼šå¯åŠ¨æœåŠ¡å™¨1æ—¶ï¼ŒæŠ•ç¥¨ç»™è‡ªå·±ï¼ŒæœåŠ¡å™¨1è·å¾—äº†1ç¥¨ï¼Œæ²¡è¾¾åˆ°åŠæ•° æ­¥éª¤äºŒï¼š å¯åŠ¨æœåŠ¡å™¨2æ—¶ï¼ŒæŠ•ç¥¨ç»™è‡ªå·±ï¼ŒæœåŠ¡å™¨2è·å¾—1ç¥¨ï¼Œæ²¡è¾¾åˆ°åŠæ•°ï¼› æœåŠ¡å™¨1ä¸2éƒ½æ˜¯1ç¥¨ï¼Œé‡æ–°å‘èµ·æŠ•ç¥¨ï¼› 2çš„æœåŠ¡å™¨IDå¤§äº1ï¼Œ1ä¼šé‡æ–°æŠ•ç¥¨ç»™2ï¼Œ2è¿˜æ˜¯ä»ç„¶æŠ•ç¥¨ç»™è‡ªå·± æœåŠ¡å™¨2è·å¾—äº†2ç¥¨ï¼Œè¾¾åˆ°åŠæ•°ï¼Œå½“é€‰Leader]]></content>
      <categories>
        <category>Zookeeper</category>
      </categories>
      <tags>
        <tag>Zookeeper</tag>
        <tag>åˆ†å¸ƒå¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Kafka å…¥é—¨ä»‹ç»]]></title>
    <url>%2F2019%2F02%2F27%2FKafka%2FKafka%E5%85%A5%E9%97%A8%2F</url>
    <content type="text"></content>
      <categories>
        <category>Kafka</category>
      </categories>
      <tags>
        <tag>åˆ†å¸ƒå¼</tag>
        <tag>Kafka</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸‹ä¸€ä¸ªæœ€å¤§å…ƒç´  I]]></title>
    <url>%2F2019%2F02%2F26%2F%E6%AF%8F%E6%97%A5%E4%B8%80%E7%AE%97%2F%E4%B8%8B%E4%B8%80%E4%B8%AA%E6%9B%B4%E5%A4%A7%E5%85%83%E7%B4%A0%20I%2F</url>
    <content type="text"><![CDATA[é¢˜æºLeetCodeé¢˜ç›®ï¼šhttps://leetcode-cn.com/problems/next-greater-element-i/ ç»™å®šä¸¤ä¸ªæ²¡æœ‰é‡å¤å…ƒç´ çš„æ•°ç»„ nums1 å’Œ nums2 ï¼Œå…¶ä¸­nums1 æ˜¯ nums2 çš„å­é›†ã€‚æ‰¾åˆ° nums1 ä¸­æ¯ä¸ªå…ƒç´ åœ¨ nums2 ä¸­çš„ä¸‹ä¸€ä¸ªæ¯”å…¶å¤§çš„å€¼ã€‚ nums1 ä¸­æ•°å­— x çš„ä¸‹ä¸€ä¸ªæ›´å¤§å…ƒç´ æ˜¯æŒ‡ x åœ¨ nums2 ä¸­å¯¹åº”ä½ç½®çš„å³è¾¹çš„ç¬¬ä¸€ä¸ªæ¯” x å¤§çš„å…ƒç´ ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œå¯¹åº”ä½ç½®è¾“å‡º-1ã€‚ ç¤ºä¾‹ 1: è¾“å…¥: nums1 = [4,1,2], nums2 = [1,3,4,2].è¾“å‡º: [-1,3,-1]è§£é‡Š: å¯¹äºnum1ä¸­çš„æ•°å­—4ï¼Œä½ æ— æ³•åœ¨ç¬¬äºŒä¸ªæ•°ç»„ä¸­æ‰¾åˆ°ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ•°å­—ï¼Œå› æ­¤è¾“å‡º -1ã€‚ å¯¹äºnum1ä¸­çš„æ•°å­—1ï¼Œç¬¬äºŒä¸ªæ•°ç»„ä¸­æ•°å­—1å³è¾¹çš„ä¸‹ä¸€ä¸ªè¾ƒå¤§æ•°å­—æ˜¯ 3ã€‚ å¯¹äºnum1ä¸­çš„æ•°å­—2ï¼Œç¬¬äºŒä¸ªæ•°ç»„ä¸­æ²¡æœ‰ä¸‹ä¸€ä¸ªæ›´å¤§çš„æ•°å­—ï¼Œå› æ­¤è¾“å‡º -1ã€‚ nums1å’Œnums2ä¸­æ‰€æœ‰å…ƒç´ æ˜¯å”¯ä¸€çš„ã€‚nums1å’Œnums2 çš„æ•°ç»„å¤§å°éƒ½ä¸è¶…è¿‡1000ã€‚ è§£æ³•å…³é”®è¯ï¼šå•è°ƒæ ˆ å¾ªç¯éå†è¾ƒé•¿çš„æ•°ç»„ç»„æˆå•è°ƒé€’å‡æ ˆ å½“æ ˆé¡¶å°äºå½“å‰å…ƒç´ æ—¶ï¼Œå‡ºæ ˆï¼Œå­˜å‚¨åˆ°æ•°ç»„æˆ–hashmapä¸­ å¾ªç¯è¾ƒçŸ­çš„æ•°ç»„ï¼ŒæŸ¥æ‰¾æ˜¯å¦åœ¨hashmapä¸­ æºç 1234567891011121314151617181920212223242526272829303132333435&lt;?phpclass Solution &#123; /** * @param Integer[] $nums1 * @param Integer[] $nums2 * @return Integer[] */ function nextGreaterElement($nums1, $nums2) &#123; $hashMap = []; $stack = []; foreach ($nums2 as $value) &#123; while (!empty($stack) &amp;&amp; end($stack) &lt; $value) &#123; $hashMap[array_pop($stack)]=$value; &#125; array_push($stack, $value); &#125; $res = []; foreach ($nums1 as $value) &#123; if (isset($hashMap[$value])) &#123; $res[] = $hashMap[$value]; &#125; else &#123; $res[] = -1; &#125; &#125; return $res; &#125;&#125;$s = new Solution();$res = $s-&gt;nextGreaterElement([1,3,5,2,4],[6,5,4,3,2,1,7]);var_dump($res);]]></content>
      <categories>
        <category>æ¯æ—¥ä¸€ç®—</category>
      </categories>
      <tags>
        <tag>é¢è¯•</tag>
        <tag>ç®—æ³•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Zookeeper é¢è¯•é¢˜]]></title>
    <url>%2F2019%2F02%2F25%2F%E6%AF%8F%E6%97%A5%E4%B8%80%E9%9D%A2%2FZookeeper%E9%9D%A2%E8%AF%95%2F</url>
    <content type="text"><![CDATA[1. Zookeeperçš„ç”¨é€”ï¼Œé€‰ä¸¾çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿç”¨é€” åˆ†å¸ƒå¼é” æœåŠ¡æ³¨å†Œå’Œå‘ç° åˆ©ç”¨Znodeå’ŒWatcherï¼Œå¯ä»¥å®ç°åˆ†å¸ƒå¼æœåŠ¡çš„æ³¨å†Œå’Œå‘ç°ã€‚æœ€è‘—åçš„åº”ç”¨å°±æ˜¯é˜¿é‡Œçš„åˆ†å¸ƒå¼RPCæ¡†æ¶Dubboã€‚ å…±äº«é…ç½®å’ŒçŠ¶æ€ä¿¡æ¯ Redisçš„åˆ†å¸ƒå¼è§£å†³æ–¹æ¡ˆCodisï¼ˆè±Œè±†èšï¼‰ï¼Œå°±åˆ©ç”¨äº†Zookeeperæ¥å­˜æ”¾æ•°æ®è·¯ç”±è¡¨å’Œ codis-proxy èŠ‚ç‚¹çš„å…ƒä¿¡æ¯ã€‚åŒæ—¶ codis-config å‘èµ·çš„å‘½ä»¤éƒ½ä¼šé€šè¿‡ ZooKeeper åŒæ­¥åˆ°å„ä¸ªå­˜æ´»çš„ codis-proxyã€‚ è½¯è´Ÿè½½å‡è¡¡ é€‰ä¸¾åŸç† æ¯ä¸ª server å‘å‡ºä¸€ä¸ªæŠ•ç¥¨ï¼š æŠ•ç¥¨çš„æœ€åŸºæœ¬å…ƒç´ æ˜¯ï¼ˆSID-æœåŠ¡å™¨id,ZXID-äº‹ç‰©idï¼‰ æ¥å—æ¥è‡ªå„ä¸ªæœåŠ¡å™¨çš„æŠ•ç¥¨ å¤„ç†æŠ•ç¥¨ï¼šä¼˜å…ˆæ£€æŸ¥ ZXID(æ•°æ®è¶Šæ–°ZXIDè¶Šå¤§),ZXIDæ¯”è¾ƒå¤§çš„ä½œä¸ºleaderï¼ŒZXIDä¸€æ ·çš„æƒ…å†µä¸‹æ¯”è¾ƒSID ç»Ÿè®¡æŠ•ç¥¨ï¼šè¿™é‡Œæœ‰ä¸ªè¿‡åŠçš„æ¦‚å¿µï¼Œå¤§äºé›†ç¾¤æœºå™¨æ•°é‡çš„ä¸€åŠï¼Œå³å¤§äºæˆ–ç­‰äºï¼ˆn/2+1ï¼‰,æˆ‘ä»¬è¿™é‡Œçš„ç”±ä¸‰å°ï¼Œå¤§äºç­‰äº2å³ä¸ºè¾¾åˆ°â€œè¿‡åŠâ€çš„è¦æ±‚ã€‚è¿™é‡Œä¹Ÿæœ‰å¼•ç”³åˆ°ä¸ºä»€ä¹ˆ Zookeeper é›†ç¾¤æ¨èæ˜¯å•æ•°ã€‚ 2. zookeeper watchæœºåˆ¶ å®¢æˆ·ç«¯ æœåŠ¡ç«¯ Mainè¿›ç¨‹ åˆ›å»ºZKå®¢æˆ·ç«¯ï¼Œä¼šåˆ›å»ºconnetç½‘ç»œè¿æ¥é€šä¿¡çº¿ç¨‹ï¼Œlistenerç›‘å¬çº¿ç¨‹ é€šè¿‡connectçº¿ç¨‹å°†æ³¨å†Œçš„ç›‘å¬äº‹ä»¶å‘é€ç»™ZookeeperæœåŠ¡ç«¯ å°†ç›‘å¬äº‹ä»¶æ·»åŠ åˆ°æ³¨å†Œç›‘å¬å™¨åˆ—è¡¨ ç›‘å¬åˆ°æœ‰æ•°æ®æˆ–è·¯å¾„å˜åŒ–ï¼Œå°†æ¶ˆæ¯å‘é€ç»™listener listenerçº¿ç¨‹å†…éƒ¨è°ƒç”¨processæ–¹æ³• 3. Zookeeper åˆ†å¸ƒå¼é”]]></content>
      <categories>
        <category>Zookeeper</category>
      </categories>
      <tags>
        <tag>Zookeeper</tag>
        <tag>åˆ†å¸ƒå¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Zookeeper å…¥é—¨ä»‹ç»]]></title>
    <url>%2F2019%2F02%2F25%2FZookeeper%2FZookeeper%E5%85%A5%E9%97%A8%2F</url>
    <content type="text"><![CDATA[ä¸€ã€ä»€ä¹ˆæ˜¯ZookeeperZooKeeperæ˜¯ä¸€ä¸ªä¸ºåˆ†å¸ƒå¼åº”ç”¨æä¾›ä¸€è‡´æ€§æœåŠ¡çš„è½¯ä»¶ï¼Œæä¾›çš„åŠŸèƒ½åŒ…æ‹¬ï¼šé…ç½®ç»´æŠ¤ã€åŸŸåæœåŠ¡ã€åˆ†å¸ƒå¼åŒæ­¥ã€ç»„æœåŠ¡ç­‰ã€‚ å®ƒçš„æ ¸å¿ƒæ˜¯ï¼šæ–‡ä»¶ç³»ç»Ÿ + é€šçŸ¥æœºåˆ¶ äºŒã€é‡è¦ç‰¹ç‚¹ ä¸€ä¸ªé¢†å¯¼è€…(Leader)ï¼Œå¤šä¸ªè·Ÿéšè€…(Follower)ç»„æˆçš„é›†ç¾¤ é›†ç¾¤ä¸­åªè¦æœ‰åŠæ•°ä»¥ä¸ŠèŠ‚ç‚¹å­˜æ´»ï¼ŒZookeeperé›†ç¾¤å°±èƒ½æ­£å¸¸æœåŠ¡ å…¨å±€æ•°æ®ä¸€è‡´æ€§ï¼Œæ¯ä¸ªserverä¿å­˜ä¸€ä»½ç›¸åŒçš„å‰¯æœ¬ï¼Œclientæ— è®ºé“¾æ¥å“ªä¸ªserverï¼Œå¾—åˆ°çš„æ•°æ®éƒ½æ˜¯ä¸€è‡´çš„ æ›´æ–°è¯·æ±‚é¡ºåºæ‰§è¡Œï¼Œæ¥è‡ªåŒä¸€ä¸ªclientçš„è¯·æ±‚æŒ‰é¡ºåºæ‰§è¡Œ æ•°æ®æ›´æ–°åŸå­æ€§ï¼Œä¸€æ¬¡æ•°æ®æ›´æ–°è¦ä¹ˆæˆåŠŸè¦ä¹ˆå¤±è´¥ å®æ—¶æ€§ï¼Œåœ¨ä¸€å®šæ—¶é—´èŒƒå›´å†…ï¼Œclientèƒ½è¯»åˆ°æœ€æ–°æ•°æ® ä¸‰ã€æ•°æ®ç»“æ„Zookeeperæ•°æ®æ¨¡å‹çš„ç»“æ„ä¸Unixæ–‡ä»¶ç³»ç»Ÿå¾ˆç±»ä¼¼ï¼Œæ•´ä½“ä¸Šå¯çœ‹ä½œæ˜¯ä¸€æ£µæ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹ç§°ä½œä¸€ä¸ªZNodeã€‚æ¯ä¸ªZNodeé»˜è®¤èƒ½å­˜å‚¨1MBæ•°æ®ï¼Œæ¯ä¸ªZNodeéƒ½å¯ä»¥é€šè¿‡å…¶è·¯å¾„å”¯ä¸€æ ‡è¯†ã€‚ å››ã€åº”ç”¨åœºæ™¯(â€») åˆ†å¸ƒå¼é” æœåŠ¡æ³¨å†Œå’Œå‘ç° åˆ©ç”¨Znodeå’ŒWatcherï¼Œå¯ä»¥å®ç°åˆ†å¸ƒå¼æœåŠ¡çš„æ³¨å†Œå’Œå‘ç°ã€‚æœ€è‘—åçš„åº”ç”¨å°±æ˜¯é˜¿é‡Œçš„åˆ†å¸ƒå¼RPCæ¡†æ¶Dubboã€‚ å…±äº«é…ç½®å’ŒçŠ¶æ€ä¿¡æ¯ Redisçš„åˆ†å¸ƒå¼è§£å†³æ–¹æ¡ˆCodisï¼ˆè±Œè±†èšï¼‰ï¼Œå°±åˆ©ç”¨äº†Zookeeperæ¥å­˜æ”¾æ•°æ®è·¯ç”±è¡¨å’Œ codis-proxy èŠ‚ç‚¹çš„å…ƒä¿¡æ¯ã€‚åŒæ—¶ codis-config å‘èµ·çš„å‘½ä»¤éƒ½ä¼šé€šè¿‡ ZooKeeper åŒæ­¥åˆ°å„ä¸ªå­˜æ´»çš„ codis-proxyã€‚ äº”ã€é€‰ä¸¾æœºåˆ¶(â€»)5.1 åŠæ•°æœºåˆ¶ï¼ˆpaxosåè®®ï¼‰é›†ç¾¤ä¸­åŠæ•°ä»¥ä¸Šæœºå™¨å­˜æ´»ï¼Œé›†ç¾¤å¯ç”¨ï¼Œæ‰€ä»¥Zookeeperé€‚åˆå®‰è£…å¥‡æ•°å°æœåŠ¡å™¨ 5.2 å†…éƒ¨é€‰ä¸¾åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­é€‰ä¸»æœ€ç›´æ¥çš„æ–¹æ³•æ˜¯ç›´æ¥é€‰å®šé›†ç¾¤çš„ä¸€ä¸ªèŠ‚ç‚¹ä¸ºleaderï¼Œå…¶å®ƒçš„èŠ‚ç‚¹ä¸ºfollowerï¼Œè¿™æ ·å¼•å…¥çš„ä¸€ä¸ªé—®é¢˜æ˜¯å¦‚æœleaderèŠ‚ç‚¹æŒ‚æ‰ï¼Œæ•´ä¸ªé›†ç¾¤å°±æŒ‚æ‰äº†ã€‚éœ€è¦æœ‰ä¸€ç§ç®—æ³•è‡ªåŠ¨é€‰ä¸»ï¼Œå¦‚æœleaderèŠ‚ç‚¹æŒ‚æ‰ï¼Œåˆ™ä»followerèŠ‚ç‚¹ä¸­é€‰å‡ºä¸€ä¸ªä¸»èŠ‚ç‚¹ã€‚ 1. é€‰ä¸¾é˜¶æ®µ Leader election æœ€å¤§ZXIDä¹Ÿå°±æ˜¯èŠ‚ç‚¹æœ¬åœ°çš„æœ€æ–°äº‹åŠ¡ç¼–å·ï¼ŒåŒ…å«epochå’Œè®¡æ•°ä¸¤éƒ¨åˆ†ã€‚epochæ˜¯çºªå…ƒçš„æ„æ€ï¼Œç›¸å½“äºRaftç®—æ³•é€‰ä¸»æ—¶å€™çš„termï¼Œæ ‡è¯†å½“å‰leaderå‘¨æœŸï¼Œæ¯æ¬¡é€‰ä¸¾ä¸€ä¸ªæ–°çš„LeaderæœåŠ¡å™¨åï¼Œä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„epoch æ‰€æœ‰èŠ‚ç‚¹å¤„äºLookingçŠ¶æ€ï¼Œå„è‡ªä¾æ¬¡å‘èµ·æŠ•ç¥¨ï¼ŒæŠ•ç¥¨åŒ…å«è‡ªå·±çš„æœåŠ¡å™¨IDå’Œæœ€æ–°äº‹åŠ¡IDï¼ˆZXIDï¼‰ã€‚ å¦‚æœå‘ç°åˆ«äººçš„ZXIDæ¯”è‡ªå·±å¤§ï¼Œä¹Ÿå°±æ˜¯æ•°æ®æ¯”è‡ªå·±æ–°ï¼Œé‚£ä¹ˆå°±é‡æ–°å‘èµ·æŠ•ç¥¨ï¼ŒæŠ•ç¥¨ç»™ç›®å‰å·²çŸ¥æœ€å¤§çš„ZXIDæ‰€å±èŠ‚ç‚¹ã€‚ æ¯æ¬¡æŠ•ç¥¨åï¼ŒæœåŠ¡å™¨éƒ½ä¼šç»Ÿè®¡æŠ•ç¥¨æ•°é‡ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰æŸä¸ªèŠ‚ç‚¹å¾—åˆ°åŠæ•°ä»¥ä¸Šçš„æŠ•ç¥¨ã€‚å¦‚æœå­˜åœ¨è¿™æ ·çš„èŠ‚ç‚¹ï¼Œè¯¥èŠ‚ç‚¹å°†ä¼šæˆä¸ºå‡†Leaderï¼ŒçŠ¶æ€å˜ä¸ºLeadingã€‚å…¶ä»–èŠ‚ç‚¹çš„çŠ¶æ€å˜ä¸ºFollowingã€‚ 2. å‘ç°é˜¶æ®µ Discovery ä¸ºäº†é˜²æ­¢æŸäº›æ„å¤–æƒ…å†µï¼Œæ¯”å¦‚å› ç½‘ç»œåŸå› åœ¨ä¸Šä¸€é˜¶æ®µäº§ç”Ÿå¤šä¸ªLeaderçš„æƒ…å†µã€‚ Leaderé›†æ€å¹¿ç›Šï¼Œæ¥æ”¶æ‰€æœ‰Followerå‘æ¥å„è‡ªçš„æœ€æ–°epochå€¼ã€‚Leaderä»ä¸­é€‰å‡ºæœ€å¤§çš„epochï¼ŒåŸºäºæ­¤å€¼åŠ 1ï¼Œç”Ÿæˆæ–°çš„epochåˆ†å‘ç»™å„ä¸ªFollowerã€‚ å„ä¸ªFolloweræ”¶åˆ°å…¨æ–°çš„epochåï¼Œè¿”å›ACKç»™Leaderï¼Œå¸¦ä¸Šå„è‡ªæœ€å¤§çš„ZXIDå’Œå†å²äº‹åŠ¡æ—¥å¿—ã€‚Leaderé€‰å‡ºæœ€å¤§çš„ZXIDï¼Œå¹¶æ›´æ–°è‡ªèº«å†å²æ—¥å¿—ã€‚ 3. åŒæ­¥é˜¶æ®µ Synchronization Leaderåˆšæ‰æ”¶é›†å¾—åˆ°çš„æœ€æ–°å†å²äº‹åŠ¡æ—¥å¿—ï¼ŒåŒæ­¥ç»™é›†ç¾¤ä¸­æ‰€æœ‰çš„Followerã€‚åªæœ‰å½“åŠæ•°FolloweråŒæ­¥æˆåŠŸï¼Œè¿™ä¸ªå‡†Leaderæ‰èƒ½æˆä¸ºæ­£å¼çš„Leaderã€‚ å…­ã€ZNode å†…æ„6.1 èŠ‚ç‚¹ç±»å‹æŒä¹…persistentï¼šclient å’Œ server æ–­å¼€è¿æ¥åï¼Œåˆ›å»ºçš„èŠ‚ç‚¹ä¸åˆ é™¤ çŸ­æš‚ephemeralï¼šclient å’Œ server æ–­å¼€è¿æ¥åï¼Œåˆ›å»ºçš„èŠ‚ç‚¹è‡ªå·±åˆ é™¤ å¦å¤–åˆ† æœ‰åºå’Œæ— åºã€‚åˆ›å»ºæœ‰åºèŠ‚ç‚¹æ—¶ï¼Œä¼šè‡ªåŠ¨å°†èŠ‚ç‚¹åå¢åŠ åºåˆ—å· 12$ create -s /test/no1 &quot;no1&quot;Created /test/no10000000000 6.2 å†…éƒ¨ç»“æ„ data: ZNodeå­˜å‚¨çš„æ•°æ®ä¿¡æ¯ï¼Œæ¯ä¸ªèŠ‚ç‚¹æ•°æ®æœ€å¤§ä¸è¶…è¿‡1MB ACL(Access Control List): è®°å½•è®¿é—®æƒé™ï¼Œå“ªäº›äººæˆ–å“ªäº›IPå¯è®¿é—®æœ¬èŠ‚ç‚¹ child: å½“å‰èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ stat: å„ç§å…ƒæ•°æ®ï¼Œæ¯”å¦‚äº‹åŠ¡IDã€ç‰ˆæœ¬å·ã€æ—¶é—´æˆ³ã€å¤§å°ç­‰ czxid- å¼•èµ·è¿™ä¸ª znode åˆ›å»ºçš„ zxidï¼Œåˆ›å»ºèŠ‚ç‚¹çš„äº‹åŠ¡çš„ zxid ctime - znode è¢«åˆ›å»ºçš„æ¯«ç§’æ•° mzxid - znode æœ€åæ›´æ–°çš„ zxid mtime - znode æœ€åä¿®æ”¹çš„æ¯«ç§’æ•° pZxid-znode æœ€åæ›´æ–°çš„å­èŠ‚ç‚¹ zxid cversion - znode å­èŠ‚ç‚¹å˜åŒ–å·ï¼Œznode å­èŠ‚ç‚¹ä¿®æ”¹æ¬¡æ•° 7)dataversion - znode æ•°æ®å˜åŒ–å· aclVersion - znode è®¿é—®æ§åˆ¶åˆ—è¡¨çš„å˜åŒ–å· ephemeralOwner- å¦‚æœæ˜¯ä¸´æ—¶èŠ‚ç‚¹ï¼Œè¿™ä¸ªæ˜¯znodeæ‹¥æœ‰è€…çš„ session idã€‚å¦‚æœä¸æ˜¯ä¸´æ—¶èŠ‚ç‚¹åˆ™æ˜¯ 0 dataLength- znode çš„æ•°æ®é•¿åº¦ numChildren - znode å­èŠ‚ç‚¹æ•°é‡ ä¸ƒã€ç›‘å¬å™¨åŸç†(â€») å®¢æˆ·ç«¯ æœåŠ¡ç«¯ Mainè¿›ç¨‹ åˆ›å»ºZKå®¢æˆ·ç«¯ï¼Œä¼šåˆ›å»ºconnetç½‘ç»œè¿æ¥é€šä¿¡çº¿ç¨‹ï¼Œlistenerç›‘å¬çº¿ç¨‹ é€šè¿‡connectçº¿ç¨‹å°†æ³¨å†Œçš„ç›‘å¬äº‹ä»¶å‘é€ç»™ZookeeperæœåŠ¡ç«¯ å°†ç›‘å¬äº‹ä»¶æ·»åŠ åˆ°æ³¨å†Œç›‘å¬å™¨åˆ—è¡¨ ç›‘å¬åˆ°æœ‰æ•°æ®æˆ–è·¯å¾„å˜åŒ–ï¼Œå°†æ¶ˆæ¯å‘é€ç»™listener listenerçº¿ç¨‹å†…éƒ¨è°ƒç”¨processæ–¹æ³• å…«ã€å¸¸è§ç›‘å¬ å­èŠ‚ç‚¹å¢å‡å˜åŒ–ï¼ˆå¦‚ä¸‹ç¤ºä¾‹ï¼‰ èŠ‚ç‚¹æ•°æ®å˜åŒ– ä¹ã€å†™æ•°æ®æµç¨‹ å®¢æˆ·ç«¯å‘å‡ºå†™å…¥æ•°æ®è¯·æ±‚ç»™ä»»æ„Followerã€‚ FolloweræŠŠå†™å…¥æ•°æ®è¯·æ±‚è½¬å‘ç»™Leaderã€‚ Leaderé‡‡ç”¨äºŒé˜¶æ®µæäº¤æ–¹å¼ï¼Œå…ˆå‘é€Proposeå¹¿æ’­ç»™Followerã€‚ Followeræ¥åˆ°Proposeæ¶ˆæ¯ï¼Œå†™å…¥æ—¥å¿—æˆåŠŸåï¼Œè¿”å›ACKæ¶ˆæ¯ç»™Leaderã€‚ Leaderæ¥åˆ°åŠæ•°ä»¥ä¸ŠACKæ¶ˆæ¯ï¼Œè¿”å›æˆåŠŸç»™å®¢æˆ·ç«¯ï¼Œå¹¶ä¸”å¹¿æ’­Commitè¯·æ±‚ç»™Follower åã€å‘½ä»¤å®¢æˆ·ç«¯è¿æ¥ zkcli -server host:port create [-s] [-e] path data acl 12$ create /test "data"Created /test get path [watch] watchæŒ‡æ˜¯å¦ç›‘å¬ 12345678910111213[zk: 10.96.86.22:2181(CONNECTED) 10] get /testdatacZxid = 0x10ctime = Mon Feb 25 16:34:23 CST 2019mZxid = 0x10mtime = Mon Feb 25 16:34:23 CST 2019pZxid = 0x10cversion = 0dataVersion = 0aclVersion = 0ephemeralOwner = 0x0dataLength = 4numChildren = 0 æ›´å¤šstat path [watch]set path data [version]ls path [watch]delquota [-n|-b] pathls2 path [watch]setAcl path aclsetquota -n|-b val pathhistoryredo cmdnoprintwatches on|offdelete path [version]sync pathlistquota pathrmr pathaddauth scheme authquitgetAcl pathcloseconnect host:port å‚è€ƒhttps://juejin.im/post/5b037d5c518825426e024473https://www.bilibili.com/video/av32093417/https://blog.csdn.net/u013679744/article/details/79222103ã€Šä»Paxosåˆ°ZooKeeperã€‹ç»å…¸]]></content>
      <categories>
        <category>Zookeeper</category>
      </categories>
      <tags>
        <tag>Zookeeper</tag>
        <tag>åˆ†å¸ƒå¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æœåŠ¡ç«¯é¢è¯•é¢˜é›†ï¼ˆè¡¥å……ï¼‰]]></title>
    <url>%2F2019%2F02%2F25%2F%E6%AF%8F%E6%97%A5%E4%B8%80%E9%9D%A2%2F%E6%9C%8D%E5%8A%A1%E7%AB%AF%E9%9D%A2%E8%AF%95%E8%A1%A5%E5%85%85%2F</url>
    <content type="text"><![CDATA[æ¥æºå£°æ˜æ¥æºç½‘ç»œ è¡¥å……ä¸Šç¯‡ mysqläº‹åŠ¡éš”ç¦»çº§åˆ«ï¼Œè„è¯» mysqlç´¢å¼• B+æ•° kafkaæ€ä¹ˆé¿å…é‡å¤æ¶ˆè´¹ kafkaæ€ä¹ˆä¿è¯é¡ºåºæ¶ˆè´¹ kafkaåˆ†åŒºæœ‰ä»€ä¹ˆç”¨ æ¶ˆè´¹è€…å®•æœºäº†ï¼Œæ€ä¹ˆç¡®è®¤æœ‰æ²¡æ”¶åˆ°æ¶ˆæ¯ æ¶ˆè´¹è€…groupè®¢é˜…äº†ä¸€ä¸ªtopicï¼Œå½“topicæ¥æ”¶åˆ°æ¶ˆæ¯æ—¶ï¼Œæ¶ˆè´¹è€…groupä¸Šçš„æ‰€æœ‰æ¶ˆè´¹è€…èƒ½æ¥æ”¶åˆ°æ¶ˆæ¯å— thriftåè®®ä¸httpåè®®çš„åŒºåˆ« golangåƒåœ¾å›æ”¶ç®—æ³•ã€PHPåƒåœ¾å›æ”¶ç®—æ³• rpcä¸httpå’Œthriftå…³ç³»]]></content>
      <categories>
        <category>æ¯æ—¥ä¸€é¢</category>
      </categories>
      <tags>
        <tag>é¢è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[æœåŠ¡ç«¯é¢è¯•é¢˜é›†]]></title>
    <url>%2F2019%2F02%2F23%2F%E6%AF%8F%E6%97%A5%E4%B8%80%E9%9D%A2%2F%E6%9C%8D%E5%8A%A1%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98%EF%BC%88%E6%B1%87%E6%80%BB%EF%BC%89%2F</url>
    <content type="text"><![CDATA[æ¥æºå£°æ˜ä»GitHubæ‰¾åˆ°çš„javaé¢è¯•é¢˜é›†ï¼Œæ¶µç›–çš„å†…å®¹æ¯”è¾ƒå…¨ï¼Œè¿™é‡Œä»…æ‘˜äº†é€šç”¨çš„éƒ¨åˆ†ï¼Œä¸è¯­è¨€æ— å…³ã€‚ GitHubåœ°å€ åˆ†å¸ƒå¼ç›¸å…³ å¯¹åˆ†å¸ƒå¼äº‹åŠ¡çš„ç†è§£ å¦‚ä½•å®ç°è´Ÿè½½å‡è¡¡ï¼Œæœ‰å“ªäº›ç®—æ³•å¯ä»¥å®ç°ï¼Ÿ Zookeeperçš„ç”¨é€”ï¼Œé€‰ä¸¾çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿ æ•°æ®çš„å‚ç›´æ‹†åˆ†æ°´å¹³æ‹†åˆ†ã€‚ zookeeper watchæœºåˆ¶ redis/zkèŠ‚ç‚¹å®•æœºå¦‚ä½•å¤„ç† åˆ†å¸ƒå¼é›†ç¾¤ä¸‹å¦‚ä½•åšåˆ°å”¯ä¸€åºåˆ—å· å¦‚ä½•åšä¸€ä¸ªåˆ†å¸ƒå¼é” ç”¨è¿‡å“ªäº›MQï¼Œæ€ä¹ˆç”¨çš„ï¼Œå’Œå…¶ä»–mqæ¯”è¾ƒæœ‰ä»€ä¹ˆä¼˜ç¼ºç‚¹ï¼ŒMQçš„è¿æ¥æ˜¯çº¿ç¨‹å®‰å…¨çš„å— MQç³»ç»Ÿçš„æ•°æ®å¦‚ä½•ä¿è¯ä¸ä¸¢å¤± åˆ—ä¸¾å‡ºä½ èƒ½æƒ³åˆ°çš„æ•°æ®åº“åˆ†åº“åˆ†è¡¨ç­–ç•¥ï¼›åˆ†åº“åˆ†è¡¨åï¼Œå¦‚ä½•è§£å†³å…¨è¡¨æŸ¥è¯¢çš„é—®é¢˜ã€‚ ç®—æ³•&amp;æ•°æ®ç»“æ„&amp;è®¾è®¡æ¨¡å¼ æµ·é‡urlå»é‡ç±»é—®é¢˜ï¼ˆå¸ƒéš†è¿‡æ»¤å™¨ï¼‰ æ•°ç»„å’Œé“¾è¡¨æ•°æ®ç»“æ„æè¿°ï¼Œå„è‡ªçš„æ—¶é—´å¤æ‚åº¦ äºŒå‰æ ‘éå† å¿«é€Ÿæ’åº BTreeç›¸å…³çš„æ“ä½œ åœ¨å·¥ä½œä¸­é‡åˆ°è¿‡å“ªäº›è®¾è®¡æ¨¡å¼ï¼Œæ˜¯å¦‚ä½•åº”ç”¨çš„ hashç®—æ³•çš„æœ‰å“ªå‡ ç§ï¼Œä¼˜ç¼ºç‚¹ï¼Œä½¿ç”¨åœºæ™¯ ä»€ä¹ˆæ˜¯ä¸€è‡´æ€§hash paxosç®—æ³• åœ¨è£…é¥°å™¨æ¨¡å¼å’Œä»£ç†æ¨¡å¼ä¹‹é—´ï¼Œä½ å¦‚ä½•æŠ‰æ‹©ï¼Œè¯·ç»“åˆè‡ªèº«å®é™…æƒ…å†µèŠèŠ ä»£ç é‡æ„çš„æ­¥éª¤å’ŒåŸå› ï¼Œå¦‚æœç†è§£é‡æ„åˆ°æ¨¡å¼ï¼Ÿ æ•°æ®åº“ MySQL InnoDBå­˜å‚¨çš„æ–‡ä»¶ç»“æ„ ç´¢å¼•æ ‘æ˜¯å¦‚ä½•ç»´æŠ¤çš„ï¼Ÿ æ•°æ®åº“è‡ªå¢ä¸»é”®å¯èƒ½çš„é—®é¢˜ MySQLçš„å‡ ç§ä¼˜åŒ– mysqlç´¢å¼•ä¸ºä»€ä¹ˆä½¿ç”¨B+æ ‘ æ•°æ®åº“é”è¡¨çš„ç›¸å…³å¤„ç† ç´¢å¼•å¤±æ•ˆåœºæ™¯ é«˜å¹¶å‘ä¸‹å¦‚ä½•åšåˆ°å®‰å…¨çš„ä¿®æ”¹åŒä¸€è¡Œæ•°æ®ï¼Œä¹è§‚é”å’Œæ‚²è§‚é”æ˜¯ä»€ä¹ˆï¼ŒINNODBçš„è¡Œçº§é”æœ‰å“ª2ç§ï¼Œè§£é‡Šå…¶å«ä¹‰ æ•°æ®åº“ä¼šæ­»é”å—ï¼Œä¸¾ä¸€ä¸ªæ­»é”çš„ä¾‹å­ï¼Œmysqlæ€ä¹ˆè§£å†³æ­»é” Redis&amp;ç¼“å­˜ç›¸å…³ Redisçš„å¹¶å‘ç«äº‰é—®é¢˜å¦‚ä½•è§£å†³äº†è§£Redisäº‹åŠ¡çš„CASæ“ä½œå— ç¼“å­˜æœºå™¨å¢åˆ å¦‚ä½•å¯¹ç³»ç»Ÿå½±å“æœ€å°ï¼Œä¸€è‡´æ€§å“ˆå¸Œçš„å®ç° RedisæŒä¹…åŒ–çš„å‡ ç§æ–¹å¼ï¼Œä¼˜ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Œæ€ä¹ˆå®ç°çš„ Redisçš„ç¼“å­˜å¤±æ•ˆç­–ç•¥ ç¼“å­˜ç©¿é€çš„è§£å†³åŠæ³• redisé›†ç¾¤ï¼Œé«˜å¯ç”¨ï¼ŒåŸç† mySQLé‡Œæœ‰2000wæ•°æ®ï¼Œredisä¸­åªå­˜20wçš„æ•°æ®ï¼Œå¦‚ä½•ä¿è¯redisä¸­çš„æ•°æ®éƒ½æ˜¯çƒ­ç‚¹æ•°æ® ç”¨Rediså’Œä»»æ„è¯­è¨€å®ç°ä¸€æ®µæ¶æ„ç™»å½•ä¿æŠ¤çš„ä»£ç ï¼Œé™åˆ¶1å°æ—¶å†…æ¯ç”¨æˆ·Idæœ€å¤šåªèƒ½ç™»å½•5æ¬¡ redisçš„æ•°æ®æ·˜æ±°ç­–ç•¥ ç½‘ç»œç›¸å…³ http1.0å’Œhttp1.1æœ‰ä»€ä¹ˆåŒºåˆ« httpå’Œhttpsæœ‰ä»€ä¹ˆåŒºåˆ« TCP/IPåè®® TCPä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹çš„æµç¨‹ï¼Œä¸ºä»€ä¹ˆæ–­å¼€è¿æ¥è¦4æ¬¡,å¦‚æœæ¡æ‰‹åªæœ‰ä¸¤æ¬¡ï¼Œä¼šå‡ºç°ä»€ä¹ˆ TIME_WAITå’ŒCLOSE_WAITçš„åŒºåˆ« è¯´è¯´ä½ çŸ¥é“çš„å‡ ç§HTTPå“åº”ç  å½“ä½ ç”¨æµè§ˆå™¨æ‰“å¼€ä¸€ä¸ªé“¾æ¥çš„æ—¶å€™ï¼Œè®¡ç®—æœºåšäº†å“ªäº›å·¥ä½œæ­¥éª¤ TCP/IPå¦‚ä½•ä¿è¯å¯é æ€§ï¼Œæ•°æ®åŒ…æœ‰å“ªäº›æ•°æ®ç»„æˆ é•¿è¿æ¥ä¸çŸ­è¿æ¥ Httpè¯·æ±‚getå’Œpostçš„åŒºåˆ«ä»¥åŠæ•°æ®åŒ…æ ¼å¼ ç®€è¿°tcpå»ºç«‹è¿æ¥3æ¬¡æ¡æ‰‹ï¼Œå’Œæ–­å¼€è¿æ¥4æ¬¡æ¡æ‰‹çš„è¿‡ç¨‹ï¼›å…³é—­è¿æ¥æ—¶ï¼Œå‡ºç°TIMEWAITè¿‡å¤šæ˜¯ç”±ä»€ä¹ˆåŸå› å¼•èµ·ï¼Œæ˜¯å‡ºç°åœ¨ä¸»åŠ¨æ–­å¼€æ–¹è¿˜æ˜¯è¢«åŠ¨æ–­å¼€æ–¹ã€‚ å…¶ä»– Linuxä¸‹IOæ¨¡å‹æœ‰å‡ ç§ï¼Œå„è‡ªçš„å«ä¹‰æ˜¯ä»€ä¹ˆ å®é™…åœºæ™¯é—®é¢˜ï¼Œæµ·é‡ç™»å½•æ—¥å¿—å¦‚ä½•æ’åºå’Œå¤„ç†SQLæ“ä½œï¼Œä¸»è¦æ˜¯ç´¢å¼•å’Œèšåˆå‡½æ•°çš„åº”ç”¨ å®é™…åœºæ™¯é—®é¢˜è§£å†³ï¼Œå…¸å‹çš„TOP Ké—®é¢˜ çº¿ä¸Šbugå¤„ç†æµç¨‹ å¦‚ä½•ä»çº¿ä¸Šæ—¥å¿—å‘ç°é—®é¢˜ linuxåˆ©ç”¨å“ªäº›å‘½ä»¤ï¼ŒæŸ¥æ‰¾å“ªé‡Œå‡ºäº†é—®é¢˜ï¼ˆä¾‹å¦‚ioå¯†é›†ä»»åŠ¡ï¼Œcpuè¿‡åº¦ï¼‰ åœºæ™¯é—®é¢˜ï¼Œæœ‰ä¸€ä¸ªç¬¬ä¸‰æ–¹æ¥å£ï¼Œæœ‰å¾ˆå¤šä¸ªçº¿ç¨‹å»è°ƒç”¨è·å–æ•°æ®ï¼Œç°åœ¨è§„å®šæ¯ç§’é’Ÿæœ€å¤šæœ‰10ä¸ªçº¿ç¨‹åŒæ—¶è°ƒç”¨å®ƒï¼Œå¦‚ä½•åšåˆ°ã€‚ ç”¨ä¸‰ä¸ªçº¿ç¨‹æŒ‰é¡ºåºå¾ªç¯æ‰“å°abcä¸‰ä¸ªå­—æ¯ï¼Œæ¯”å¦‚abcabcabcã€‚ å¸¸è§çš„ç¼“å­˜ç­–ç•¥æœ‰å“ªäº›ï¼Œä½ ä»¬é¡¹ç›®ä¸­ç”¨åˆ°äº†ä»€ä¹ˆç¼“å­˜ç³»ç»Ÿï¼Œå¦‚ä½•è®¾è®¡çš„ è®¾è®¡ä¸€ä¸ªç§’æ€ç³»ç»Ÿï¼Œ30åˆ†é’Ÿæ²¡ä»˜æ¬¾å°±è‡ªåŠ¨å…³é—­äº¤æ˜“ï¼ˆå¹¶å‘ä¼šå¾ˆé«˜ï¼‰ è¯·åˆ—å‡ºä½ æ‰€äº†è§£çš„æ€§èƒ½æµ‹è¯•å·¥å…· åå°ç³»ç»Ÿæ€ä¹ˆé˜²æ­¢è¯·æ±‚é‡å¤æäº¤ï¼Ÿ æœ‰å¤šä¸ªç›¸åŒçš„æ¥å£ï¼Œæˆ‘æƒ³å®¢æˆ·ç«¯åŒæ—¶è¯·æ±‚ï¼Œç„¶ååªéœ€è¦åœ¨ç¬¬ä¸€ä¸ªè¯·æ±‚è¿”å›ç»“æœçš„æ—¶å€™è¿”å›ç»™å®¢æˆ·ç«¯ PHPç›¸å…³ php-fpmè¿è¡ŒåŸç†]]></content>
      <categories>
        <category>æ¯æ—¥ä¸€é¢</category>
      </categories>
      <tags>
        <tag>é¢è¯•</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Redisè¯»ä¹¦ç¬”è®°ä¸€ï¼šç®€å•åŠ¨æ€å­—ç¬¦ä¸²]]></title>
    <url>%2F2019%2F02%2F23%2FRedis%2F%E7%AE%80%E5%8D%95%E5%8A%A8%E6%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2%2F</url>
    <content type="text"><![CDATA[ç®€å•åŠ¨æ€å­—ç¬¦ä¸² ç»“æ„12345678struct sdshdr &#123; // è®°å½•å·²ä½¿ç”¨å­—èŠ‚çš„æ•°é‡ long len; // è®°å½•æœªä½¿ç”¨çš„å­—èŠ‚æ•°é‡ long free; // ä¿å­˜å­—ç¬¦ä¸² char buf[];&#125;; bufä»¥&#39;\0&#39;ä¸ºä½œä¸ºå­—ç¬¦ä¸²ç»“æŸç¬¦ï¼Œä¸ºäº†èƒ½ä½¿ç”¨Cè¯­è¨€æœ¬èº«çš„åº“ SDSè®¾è®¡å¯¹æ¯”Cè¯­è¨€å­—ç¬¦ä¸²çš„ä¼˜åŠ¿ï¼š è·å–å­—ç¬¦ä¸²é•¿åº¦çš„æ—¶é—´å¤æ‚åº¦ O(1) é¿å…ç¼“å†²åŒºæº¢å‡ºæƒ…å†µ åœ¨æ‹¼æ¥æ‰©å±•å­—ç¬¦ä¸²æ—¶ï¼Œå…ˆæ£€æµ‹freeæ˜¯å¦æœ‰è¶³å¤Ÿçš„å®¹é‡åŠ è½½æ–°å­—ç¬¦ï¼Œæ— åˆ™æ–°åˆ†é…å†…å­˜ å‡å°‘ä¿®æ”¹å­—ç¬¦ä¸²å¸¦æ¥çš„å†…å­˜é‡æ–°åˆ†é…æ¬¡æ•°ï¼š ç©ºé—´é¢„åˆ†é…ï¼šåœ¨åšç©ºé—´æ‰©å±•æ—¶ï¼Œä¸ä»…ä¼šåˆ†é…å¿…é¡»çš„å†…å­˜å¤§å°ï¼Œè¿˜ä¼šé¢å¤–åˆ†é…æœªä½¿ç”¨ç©ºé—´ã€‚é¢å¤–åˆ†é…è§„åˆ™ï¼š å¦‚æœåˆ†é…åï¼Œsds-&gt;lenå¤§å°å°äº1Mï¼Œå°†åˆ†é…é¢å¤–ç©ºé—´å¤§å°ä¸ºsds-&gt;lenã€‚ä¾‹å¦‚ï¼šä¿®æ”¹ålenå¤§å°ä¸º13ï¼Œåˆ™ä¼šåˆ†é…free=13ï¼Œæœ€ç»ˆbufçš„å­—èŠ‚é•¿åº¦ä¸º 13(len)+13(fee)+1(&#39;\0&#39;) = 27; å¦‚æœåˆ†é…åï¼Œsds-&gt;lenå¤§å° å¤§äº 1Mï¼Œå°†åˆ†é…é¢å¤–ç©ºé—´å¤§å°ä¸º1Mã€‚ä¾‹å¦‚ï¼Œä¿®æ”¹ålenå¤§å°ä¸º30Mï¼Œåˆ™ä¼šåˆ†é…free=1Mï¼Œæœ€ç»ˆbufçš„å­—èŠ‚é•¿åº¦ä¸º 30M + 1M +1byte æƒ°æ€§ç©ºé—´é‡Šæ”¾ é¿å…å†…å­˜é‡æ–°åˆ†é… ä¸ºå°†æ¥å¯èƒ½æœ‰çš„å¢é•¿æ“ä½œæä¾›äº†ä¼˜åŒ– äºŒè¿›åˆ¶å®‰å…¨ åœ¨Cè¯­è¨€ä¸­ï¼Œå¦‚æœå­˜åœ¨&#39;\0&#39;ï¼Œåˆ™ä¼šç»ˆæ­¢å–å€¼ã€‚äºŒè¿›åˆ¶çš„å†…å®¹å¯èƒ½å­˜åœ¨è¯¥å­—ç¬¦ï¼Œæ‰€ä»¥åœ¨Cè¯­è¨€ä¸­æ˜¯ä¸å®‰å…¨çš„ï¼Œä½†sdsæ˜¯æ ¹æ®lenå–å€¼ å…¼å®¹éƒ¨åˆ† C å­—ç¬¦ä¸²å‡½æ•°ã€‚]]></content>
      <categories>
        <category>Redis</category>
        <category>ã€ŠRedisè®¾è®¡ä¸å®ç°ã€‹è¯»ä¹¦ç¬”è®°</category>
      </categories>
      <tags>
        <tag>Redis</tag>
        <tag>è¯»ä¹¦ç¬”è®°</tag>
      </tags>
  </entry>
</search>
